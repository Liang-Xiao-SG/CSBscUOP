(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5631],{43282:function(e,t,s){"use strict";var n=s(97458),a=s(33971),r=s(53486),i=s(56535),o=s(44607),l=s(71656);t.Z=e=>{let{language:t,officialSupport:s,docsUrl:c,gitUrl:d,altIconName:u}=e;return(0,n.jsxs)("div",{className:"flex items-start md:space-x-6",children:[(0,n.jsx)("img",{src:"".concat(i.GW,"/img/libraries/").concat(u?"".concat(u,"-icon.svg"):"".concat(t.toLowerCase(),"-icon.svg")),alt:"".concat(t," logo"),width:"21",className:"hidden md:block"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("img",{src:"".concat(i.GW,"/img/libraries/").concat(u?"".concat(u,"-icon.svg"):"".concat(t.toLowerCase(),"-icon.svg")),alt:"".concat(t," logo"),width:"21",className:"block md:hidden"}),(0,n.jsxs)("h5",{className:"flex items-center gap-2 text-base text-foreground",children:[t," ",!s&&(0,n.jsx)(a.C,{variant:"brand",children:"Community"})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[c&&(0,n.jsx)("a",{href:c,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(r.z,{icon:(0,n.jsx)(o.Z,{}),type:"default",children:"Docs"})}),(0,n.jsx)("a",{href:d,target:"_blank",rel:"noreferrer",children:(0,n.jsxs)(r.z,{icon:(0,n.jsx)(l.Z,{}),type:"default",children:[(0,n.jsx)("span",{className:"hidden md:inline",children:"See"})," GitHub"]})})]})]})]})}},73225:function(e,t,s){"use strict";var n=s(97458),a=s(86817),r=s(98809),i=s(83145),o=s.n(i),l=s(73512),c=s(59884),d=s(9881),u=s(56535);t.Z=e=>{let{framework:t,title:s,description:i,url:p}=e,{resolvedTheme:m}=(0,r.F)(),{ref:h}=(0,l.UO)(),f=(0,d.l)(),{mutate:x}=(0,c.a)();return(0,n.jsx)(o(),{href:p,target:"_blank",rel:"noreferrer",onClick:()=>{var e;return x({action:"example_project_card_clicked",properties:{cardTitle:s},groups:{project:null!=h?h:"Unknown",organization:null!==(e=null==f?void 0:f.slug)&&void 0!==e?e:"Unknown"}})},children:(0,n.jsxs)("div",{className:"group relative border bg-surface-100 border-overlay flex h-32 flex-row rounded-md p-4 hover:bg-overlay-hover transition duration-150 ease-in-out",children:[(0,n.jsx)("div",{className:"mr-4 flex flex-col",children:(0,n.jsx)("img",{className:"transition-all group-hover:scale-110",src:"".concat(u.GW,"/img/libraries/").concat(t.toLowerCase()).concat(["expo","nextjs"].includes(t.toLowerCase())&&(null==m?void 0:m.includes("dark"))?"-dark":"","-icon.svg"),alt:"".concat(t," logo"),width:26,height:26})}),(0,n.jsxs)("div",{className:"w-4/5 space-y-2",children:[(0,n.jsx)("h5",{className:"text-foreground",children:s}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:i})]}),(0,n.jsx)("div",{className:" absolute right-4 top-3 text-foreground-lighter transition-all duration-200 group-hover:right-3 group-hover:text-foreground ",children:(0,n.jsx)(a.Z,{})})]})})}},6723:function(e,t,s){"use strict";s.d(t,{B:function(){return a},l:function(){return n}});let n=[{language:"JavaScript",officialSupport:!0,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/javascript/installing",gitUrl:"https://github.com/supabase/supabase-js"},{language:"Flutter",officialSupport:!0,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/dart/installing",gitUrl:"https://github.com/supabase/supabase-flutter"},{language:"Python",officialSupport:!0,releaseState:"Alpha",docsUrl:"https://supabase.com/docs/reference/python/initializing",gitUrl:"https://github.com/supabase/supabase-py"},{language:"C#",officialSupport:!1,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/csharp/installing",gitUrl:"https://github.com/supabase-community/supabase-csharp",altIconName:"c-sharp"},{language:"Swift",officialSupport:!0,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/swift/initializing",gitUrl:"https://github.com/supabase/supabase-swift"},{language:"Kotlin",officialSupport:!1,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/kotlin/installing",gitUrl:"https://github.com/supabase-community/supabase-kt"}],a=[{framework:"Svelte",title:"Svelte kanban board",description:"A Trello clone using Supabase as the storage system.",url:"https://github.com/joshnuss/supabase-kanban",type:"app"},{framework:"nextjs",title:"Next.js Realtime chat app",description:"Next.js Slack clone app using Supabase realtime subscriptions",url:"https://github.com/supabase/supabase/tree/master/examples/slack-clone/nextjs-slack-clone",type:"app"},{framework:"nextjs",title:"Next.js Subscription and Auth",description:"The all-in-one starter kit for high-performance SaaS applications.",url:"https://github.com/vercel/nextjs-subscription-payments",type:"app"},{framework:"Expo",title:"Expo Starter",description:"Template bottom tabs with auth flow (Typescript)",url:"https://github.com/codingki/react-native-expo-template/tree/master/template-typescript-bottom-tabs-supabase-auth-flow",type:"mobile"},{framework:"NestJS",title:"NestJS example",description:"NestJS example using Supabase Auth",url:"https://github.com/hiro1107/nestjs-supabase-auth",type:"app"},{framework:"React",title:"React realtime chat app",description:"Example app of real-time chat using supabase realtime api",url:"https://github.com/shwosner/realtime-chat-supabase-react",type:"app"},{framework:"nextjs",title:"Next.js todo list app",description:"Next.js todo list example",url:"https://github.com/supabase/supabase/tree/master/examples/todo-list/nextjs-todo-list",type:"app"},{framework:"Svelte",title:"Svelte todo list app",description:"Sveltejs todo with TailwindCSS and Snowpack",url:"https://github.com/supabase/supabase/tree/master/examples/todo-list/sveltejs-todo-list",type:"app"},{framework:"Flutter",title:"Flutter chat app",description:"A Flutter chat app built with supabase-flutter",url:"https://github.com/supabase-community/flutter-chat",type:"mobile"},{framework:"Swift",title:"Swift user management app",description:"Swift user management app using supabase-swift",url:"https://github.com/supabase/supabase-swift/tree/main/Examples/UserManagement",type:"mobile"},{framework:"Swift",title:"Swift Slack Clone",description:"Swift Slack clone app using supabase-swift",url:"https://github.com/supabase/supabase-swift/tree/main/Examples/SlackClone",type:"mobile"},{framework:"Flutter",title:"Flutter MFA app",description:"A Flutter app demonstrating how to implement MFA",url:"https://github.com/supabase/supabase/tree/master/examples/auth/flutter-mfa"},{framework:"NuxtJS",title:"NuxtJS todo list app",description:"NuxtJS todo app example",url:"https://github.com/nuxt-modules/supabase/tree/main/demo"}]},12425:function(e,t,s){"use strict";s.d(t,{b:function(){return l}});var n=s(97458),a=s(85847),r=s(62933),i=s(50322),o=s(43633);let l=e=>{var t,s;let{icon:l,label:c,actions:d,loading:u=!1,draggable:p=!1,showDragHandle:m=!1,tooltip:h,onDragStart:f,children:x}=e,g=Array.isArray(x)?x.filter(Boolean).filter(e=>!!e.props.children).length>0:!!x;return(0,n.jsxs)("div",{draggable:p,unselectable:p?"on":void 0,onDragStart:f,className:"h-full flex flex-col overflow-hidden bg-surface-100 border-overlay relative rounded border shadow-sm",children:[(0,n.jsxs)(i.u,{children:[(0,n.jsx)(i.aJ,{asChild:!0,children:(0,n.jsxs)("div",{className:(0,o.cn)("grid-item-drag-handle flex py-1 pl-3 pr-1 items-center gap-2 z-10 shrink-0 group",p&&"cursor-move"),children:[(0,n.jsx)("div",{className:(0,o.cn)(m&&"transition-opacity opacity-100 group-hover:opacity-0"),children:u?(0,n.jsx)(a.Z,{size:null!==(s=null==l?void 0:null===(t=l.props)||void 0===t?void 0:t.size)&&void 0!==s?s:16,className:"text-foreground-lighter animate-spin"}):l}),m&&(0,n.jsx)("div",{className:"absolute left-3 top-2.5 z-10 opacity-0 transition-opacity group-hover:opacity-100",children:(0,n.jsx)(r.Z,{size:16,strokeWidth:1.5})}),(0,n.jsx)("h3",{title:c,className:"text-xs font-medium text-foreground-light flex-1 truncate",children:c}),(0,n.jsx)("div",{className:"flex items-center",children:d})]})}),h&&(0,n.jsx)(i._v,{asChild:!0,side:"bottom",children:h})]}),(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col flex-grow items-center justify-center",g&&"border-t"),children:x})]})}},3075:function(e,t,s){"use strict";s.d(t,{$C:function(){return r},Tu:function(){return o},_x:function(){return i},eg:function(){return a},su:function(){return n}});let n={name:"New Query",description:"",type:"sql",visibility:"user",content:{schema_version:"1.0",content_id:"",sql:"this is a test",favorite:!1}},a="\n-- Supabase AI is experimental and may produce incorrect answers\n-- Always verify the output before executing\n".trim(),r="Untitled query",i=[RegExp("^(.*;)?\\s*(drop|delete|truncate)\\s","is")],o=[{value:-1,label:"No limit"},{value:100,label:"100 rows"},{value:500,label:"500 rows"},{value:1e3,label:"1,000 rows"}]},90777:function(e,t,s){"use strict";var n,a;s.d(t,{U:function(){return n}}),(a=n||(n={})).Modification="modification",a.Addition="addition",a.NewSnippet="new-snippet"},71926:function(e,t,s){"use strict";s.d(t,{BJ:function(){return m},EF:function(){return p},GS:function(){return u},YI:function(){return c},c6:function(){return h},kL:function(){return l},mw:function(){return i},se:function(){return f},tA:function(){return o},wI:function(){return r},y4:function(){return d}});var n=s(6433),a=s(3075);s(90777);let r=e=>{let{id:t,name:s,sql:n,owner_id:r,project_id:i,folder_id:o}=e;return{...a.su,id:t,owner_id:r,project_id:i,name:s,folder_id:o,favorite:!1,inserted_at:new Date().toISOString(),updated_at:new Date().toISOString(),content:{...a.su.content,content_id:null!=t?t:"",sql:null!=n?n:""}}};function i(e){let t=(0,n.hj)(e);return a._x.some(e=>e.test(t))}function o(e){let t=RegExp('(?:^|;)\\s*update\\s+(?:"[\\w.]+"\\."[\\w.]+"|[\\w.]+)\\s+set\\s+[\\w\\W]+?(?!\\s*where\\s)',"is");return e.split(";").filter(e=>e.trim().toLowerCase().startsWith("update")).some(e=>t.test(e)&&!/where\s/i.test(e))}let l=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"\n".concat(s?"npx ":"","supabase snippets download ").concat(e," |\n").concat(s?"npx ":"","supabase migration new ").concat(t,"\n").trim()},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"\n".concat(t?"npx ":"","supabase snippets download ").concat(e," >> \\\n  supabase/seed.sql\n").trim()},d=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"\n".concat(s?"npx ":"","supabase snippets download ").concat(e," > \\\n  ").concat(t,".sql\n").trim()},u=e=>{let t=e.modified.replace(a.eg,"").trim();return{original:e.original,modified:"".concat(t)}},p=e=>{let t=e.original.replace(a.eg,"").trim(),s=e.modified.replace(a.eg,"").trim();return{original:e.original,modified:(t?t+"\n\n":"")+s}},m=e=>({original:"",modified:e.modified}),h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e.trim().replaceAll("\n"," ").replaceAll(/\s+/g," "),n=Array(...s.matchAll(/[a-zA-Z]*[0-9]*[;]+/g)),a=s.lastIndexOf(";"),r=s.includes("--"),i=n.length>1||a>0&&a!==s.length-1,o=t>0&&!r&&!i&&s.toLowerCase().startsWith("select")&&!s.toLowerCase().match(/fetch\s+first/i)&&!s.match(/limit$/i)&&!s.match(/limit;$/i)&&!s.match(/limit [0-9]* offset [0-9]*[;]?$/i)&&!s.match(/limit [0-9]*[;]?$/i);return{cleanedSql:s,appendAutoLimit:o}},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{cleanedSql:s,appendAutoLimit:n}=h(e,t);return n?s.endsWith(";")?e.replace(/[;]+$/," limit ".concat(t,";")):"".concat(e," limit ").concat(t,";"):e}},54669:function(e,t,s){"use strict";s.d(t,{Z:function(){return j}});var n=s(97458),a=s(32024),r=s(22221),i=s(52983),o=s(44914),l=s(89898),c=s(6433),d=s(97079),u=s(43633),p=s(4938),m=s(79663),h=s(81932),f=s(26369),x=s(33968);let g=e=>{let{column:t,value:s,visible:a,onClose:r}=e,[o,l]=(0,i.useState)("view"),c=null===s?"":"object"==typeof s?JSON.stringify(s,null,"	"):String(s),d="string"==typeof s;return(0,i.useEffect)(()=>{a&&l("view")},[a]),(0,n.jsx)(x.yo,{open:a,onOpenChange:()=>r(),children:(0,n.jsxs)(x.ue,{size:"lg",className:"flex flex-col gap-0",children:[(0,n.jsx)(x.Tu,{className:"py-2.5",children:(0,n.jsxs)(x.bC,{className:"flex items-center justify-between pr-7",children:[(0,n.jsxs)("p",{className:"truncate",children:["Viewing cell details on column: ",(0,n.jsx)("code",{className:"text-sm",children:t})]}),d&&(0,n.jsx)(f.Z,{options:["MD","view"],activeOption:o,borderOverride:"border-muted",onClickOption:l})]})}),"view"===o?(0,n.jsx)("div",{className:"relative h-full",children:(0,n.jsx)(h.Z,{isReadOnly:!0,id:"sql-editor-expand-cell",language:"json",value:c,placeholder:null===s?"NULL":void 0,options:{wordWrap:"off",contextmenu:!1}})}):(0,n.jsx)("div",{className:"flex-grow py-4 px-4 bg-default overflow-y-auto",children:(0,n.jsx)(m.U,{remarkPlugins:[p.Z],className:"!max-w-full markdown-body",content:c})})]})})};function v(e){return null===e?"":"object"==typeof e||Array.isArray(e)?JSON.stringify(e):e}var j=e=>{var t,s,p;let{rows:m}=e,[h,f]=(0,i.useState)(!1),[x,j]=(0,i.useState)(),b=()=>{if(x){var e,t;let{rowIdx:s,column:n}=x,a=n.key,r=v(null!==(t=null===(e=m[s])||void 0===e?void 0:e[a])&&void 0!==t?t:"");(0,c.vQ)(r)}};(0,l.aL)({"Command+c":e=>{e.stopPropagation(),b()},"Control+c":e=>{e.stopPropagation(),b()}},["INPUT","TEXTAREA"]);let y=(e,t)=>{let s=t[e];return(0,n.jsxs)(d.xV,{modal:!1,children:[(0,n.jsx)(d.W4,{asChild:!0,children:(0,n.jsx)("div",{className:(0,u.cn)("flex items-center h-full font-mono text-xs w-full whitespace-pre",null===s&&"text-foreground-lighter"),children:null===s?"NULL":"string"==typeof s?s:JSON.stringify(s)})}),(0,n.jsxs)(d.h_,{onCloseAutoFocus:e=>e.stopPropagation(),children:[(0,n.jsxs)(d.Zo,{className:"gap-x-2",onSelect:()=>{let e=v(null!=s?s:"");(0,c.vQ)(e)},onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(a.Z,{size:14}),"Copy cell content"]}),(0,n.jsxs)(d.Zo,{className:"gap-x-2",onSelect:()=>f(!0),onFocusCapture:e=>e.stopPropagation(),children:[(0,n.jsx)(r.Z,{size:14}),"View cell content"]})]})]})},w=e=>(0,n.jsx)("div",{className:"flex h-full items-center justify-center font-mono text-xs",children:e}),N=Object.keys(null!==(s=null==m?void 0:m[0])&&void 0!==s?s:[]).map((e,t)=>{let s=m.map(t=>String(t[e]).length).reduce((e,t)=>Math.max(e,t),0);return{idx:t,key:e,name:e,resizable:!0,parent:void 0,level:0,width:Math.max(Math.min(8.25*s,500),100),minWidth:100,maxWidth:void 0,draggable:!1,frozen:!1,sortable:!1,isLastFrozenColumn:!1,renderCell:t=>{let{row:s}=t;return y(e,s)},renderHeaderCell:()=>w(e)}});return(0,n.jsx)(n.Fragment,{children:0===m.length?(0,n.jsx)("div",{className:"bg-table-header-light [[data-theme*=dark]_&]:bg-table-header-dark",children:(0,n.jsx)("p",{className:"m-0 border-0 px-4 py-3 font-mono text-sm text-foreground-light",children:"Success. No rows returned"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.ZP,{columns:N,rows:m,className:"h-full flex-grow border-t-0",rowClass:()=>"[&>.rdg-cell]:items-center",onSelectedCellChange:j}),(0,n.jsx)(g,{column:null!==(p=null==x?void 0:x.column.name)&&void 0!==p?p:"",value:null==x?void 0:null===(t=x.row)||void 0===t?void 0:t[x.column.name],visible:h,onClose:()=>f(!1)})]})})}},88683:function(e,t,s){"use strict";s.d(t,{F:function(){return c}});var n=s(97458),a=s(6433),r=s(85847),i=s(39390),o=s(17783),l=s(53486);let c=e=>{let{isDisabled:t=!1,isExecuting:s=!1,hasSelection:c=!1,className:d,onClick:u}=e,p=(0,a.fV)();return(0,n.jsx)(l.z,{onClick:function(){u()},disabled:t,type:"primary",size:"tiny",iconRight:s?(0,n.jsx)(r.Z,{className:"animate-spin",size:10,strokeWidth:1.5}):(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:["macos"===p?(0,n.jsx)(i.Z,{size:10,strokeWidth:1.5}):(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:"CTRL"}),(0,n.jsx)(o.Z,{size:10,strokeWidth:1.5})]}),className:d,children:c?"Run selected":"Run"})}},75307:function(e,t,s){"use strict";s.d(t,{Yx:function(){return f},iM:function(){return g}});var n=s(40540),a=s(32691),r=s(52983),i=s(34549),o=s(73512),l=s(32672),c=s(94281),d=s(6433),u=s(27610),p=s(22332),m=s(90777),h=s(71926);function f(){let[e,t]=(0,r.useState)(),[s,n]=(0,r.useState)(),[a,i]=(0,r.useState)(),[o,l]=(0,r.useState)(!1),c=!!e,d=(0,r.useMemo)(()=>{if(!e)return{original:"",modified:""};switch(s){case m.U.Modification:return(0,h.GS)(e);case m.U.Addition:return(0,h.EF)(e);case m.U.NewSnippet:return(0,h.BJ)(e);default:return{original:"",modified:""}}},[s,e]),u=(0,r.useCallback)(()=>{t(void 0),i(void 0),n(void 0)},[]);return{sourceSqlDiff:e,setSourceSqlDiff:t,selectedDiffType:s,setSelectedDiffType:n,pendingTitle:a,setPendingTitle:i,isAcceptDiffLoading:o,setIsAcceptDiffLoading:l,isDiffOpen:c,defaultSqlDiff:d,closeDiff:u}}let x={isOpen:!1,selection:"",beforeSelection:"",afterSelection:"",startLineNumber:0,endLineNumber:0};function g(){let[e,t]=(0,r.useState)(x),[s,n]=(0,r.useState)("");return(0,r.useEffect)(()=>{e.isOpen||n("")},[e.isOpen]),{promptState:e,setPromptState:t,promptInput:s,setPromptInput:n,resetPrompt:()=>{t(x),n("")}}}t.ZP=()=>{let e=(0,a.useRouter)(),{ref:t}=(0,o.UO)(),{profile:s}=(0,u.Un)(),{project:r}=(0,l.d2)(),m=(0,p.B0)(),f=(0,c.Xo)(n.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==s?void 0:s.id},subject:{id:null==s?void 0:s.id}});return{newQuery:async function(n,a){let o=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!t)return console.error("Project ref is required");if(!r)return console.error("Project is required");if(!s)return console.error("Profile is required");if(!f){(0,i.Am)("Your queries will not be saved as you do not have sufficient permissions");return}try{let i=(0,h.wI)({id:(0,d.k$)(),name:a,sql:n,owner_id:null==s?void 0:s.id,project_id:null==r?void 0:r.id});if(m.addSnippet({projectRef:t,snippet:i}),m.addNeedsSaving(i.id),!o)return i.id;e.push("/project/".concat(t,"/sql/").concat(i.id));return}catch(e){i.Am.error("Failed to create new query: ".concat(e.message));return}}}}},56318:function(e,t,s){"use strict";s.d(t,{Z:function(){return N}});var n=s(97458),a=s(40540),r=s(32691),i=s(52983),o=s(34549),l=s(90358),c=s(32672),d=s(35613),u=s(36457),p=s(64618),m=s(129),h=s(24448),f=s(68406);async function x(e){let{projectRef:t}=e,{data:s,error:n}=await (0,m.IV)("/platform/projects/{ref}",{params:{path:{ref:t}}});return n&&(0,m.S3)(n),s}let g=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,u.NL)();return(0,p.D)(e=>x(e),{async onSuccess(t,s,a){await n.invalidateQueries(h.i.list()),s.organizationSlug&&n.invalidateQueries(f.O.freeProjectLimitCheck(s.organizationSlug)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?o.Am.error("Failed to delete project: ".concat(e.message)):t(e,s,n)},...s})};var v=s(5359),j=s(94281),b=s(9881),y=s(60661),w=s(2183),N=e=>{var t,s;let{visible:u,onClose:p}=e,m=(0,r.useRouter)(),{project:h}=(0,c.d2)(),f=(0,b.l)(),x=null==h?void 0:h.ref,{data:N}=(0,v.Gl)({orgSlug:null==f?void 0:f.slug}),k="free"===(null!==(s=null==N?void 0:null===(t=N.plan)||void 0===t?void 0:t.id)&&void 0!==s?s:"free"),[S,C]=(0,i.useState)(""),[_,z]=(0,i.useState)([]),{mutate:A,isLoading:L}=g({onSuccess:async()=>{if(!k)try{await E({projectRef:x,message:S,reasons:_.reduce((e,t)=>"".concat(e,"- ").concat(t,"\n"),""),exitAction:"delete"})}catch(e){}o.Am.success("Successfully deleted ".concat(null==h?void 0:h.name)),m.push("/projects")}}),{mutateAsync:E,isLoading:R}=(0,d.S)(),U=L||R;(0,i.useEffect)(()=>{u&&(z([]),C(""))},[u]),(0,j.Xo)(a.KA.UPDATE,"projects",{resource:{project_id:null==h?void 0:h.id}});let P=e=>{z(void 0===_.find(t=>t===e)?_.concat([e]):_.filter(t=>t!==e))};async function Z(){if(void 0!==h){if(!k&&0===_.length)return o.Am.error("Please select at least one reason for deleting your project");A({projectRef:h.ref,organizationSlug:null==f?void 0:f.slug})}}return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(w.Z,{visible:u,loading:U,size:k?"small":"medium",title:"Confirm deletion of ".concat(null==h?void 0:h.name),variant:"destructive",alert:{title:k?"This action cannot be undone.":"This will permanently delete the ".concat(null==h?void 0:h.name),description:k?"":"All project data will be lost, and cannot be undone"},text:k?"This will permanently delete the ".concat(null==h?void 0:h.name," project and all of its data."):void 0,confirmPlaceholder:"Type the project name in here",confirmString:(null==h?void 0:h.name)||"",confirmLabel:"I understand, delete this project",onConfirm:Z,onCancel:()=>{U||p()},children:!k&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("h4",{className:"text-base",children:"Help us improve."}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"We always strive to improve Supabase as much as we can. Please let us know the reasons you are deleting your project so that we can improve in the future."})]}),(0,n.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:l.Y.map(e=>{let t=_.find(t=>t===e);return(0,n.jsxs)("label",{className:["flex cursor-pointer items-center space-x-2 rounded-md py-1","pl-2 pr-3 text-center text-sm shadow-sm transition-all duration-100","".concat(t?" bg-foreground text-background opacity-100 hover:bg-opacity-75":" bg-border-strong text-foreground opacity-25 hover:opacity-50")].join(" "),children:[(0,n.jsx)("input",{type:"checkbox",name:"options",value:e,className:"hidden",onClick:e=>P(e.target.value)}),(0,n.jsx)("div",{children:e})]},e)})}),(0,n.jsx)("div",{className:"text-area-text-sm",children:(0,n.jsx)(y.Z.TextArea,{name:"message",label:"Anything else that we can improve on?",rows:3,value:S,onChange:e=>C(e.target.value)})})]})]})})})}},90133:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var n=s(97458),a=s(73512),r=s(61115),i=s(19890);t.C=()=>{var e;let{ref:t}=(0,a.UO)(),{data:s,isLoading:l}=(0,i.Sy)(),c="default"!==t?null==s?void 0:null===(e=s.find(e=>e.ref===t))||void 0===e?void 0:e.name:"Welcome to your project";return(0,n.jsxs)("div",{className:"w-full mx-auto my-16 space-y-16 max-w-7xl",children:[(0,n.jsx)("div",{className:"flex items-center mx-6 space-x-6",children:l?(0,n.jsx)(r.Z,{className:"h-9 w-40"}):(0,n.jsx)("h1",{className:"text-3xl",children:c})}),(0,n.jsx)("div",{className:"mx-6",children:(0,n.jsx)(o,{})}),(0,n.jsxs)("div",{className:"mx-6 space-y-4",children:[(0,n.jsx)(r.Z,{className:"w-40 h-7"}),(0,n.jsx)(r.Z,{className:"w-full h-32"})]})]})};let o=()=>(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(r.Z,{className:"w-40 h-7"}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 md:gap-4 lg:gap-8",children:[(0,n.jsx)(r.Z,{className:"w-full h-[304px]"}),(0,n.jsx)(r.Z,{className:"w-full h-[304px]"}),(0,n.jsx)(r.Z,{className:"w-full h-[304px]"}),(0,n.jsx)(r.Z,{className:"w-full h-[304px]"})]})]})},28408:function(e,t,s){"use strict";s.d(t,{$:function(){return el}});var n=s(97458),a=s(90330),r=s(40540),i=s(36457),o=s(28977),l=s.n(o),c=s(13099),d=s(99033),u=s(83145),p=s.n(u),m=s(52983),h=s(86848),f=s(34549),x=s(5394),g=s(73512),v=s(84261),j=s(2861),b=s(28894),y=s(129),w=s(61569);async function N(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:a}=await (0,y.U2)("/platform/projects/{ref}/restore/versions",{params:{path:{ref:s}},signal:t});return a&&(0,y.S3)(a),n}let k=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.a)(w.U.projectUnpausePostgresVersions(t),e=>{let{signal:s}=e;return N({projectRef:t},s)},{enabled:s&&void 0!==t,...n})};var S=s(82436),C=s(24448);async function _(e,t){let{ref:s}=e;if(!s)throw Error("Project ref is required");let{data:n,error:a}=await (0,y.U2)("/platform/projects/{ref}/pause/status",{params:{path:{ref:s}},signal:t});return a&&(0,y.S3)(a),n}let z=function(e){let{ref:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.a)(C.i.pauseStatus(t),e=>{let{signal:s}=e;return _({ref:t},s)},{enabled:s&&void 0!==t,...n})};var A=s(64618);async function L(e){let{ref:t,postgresEngine:s,releaseChannel:n}=e,{data:a,error:r}=await (0,y.v_)("/platform/projects/{ref}/restore",{params:{path:{ref:t}},body:{postgres_engine:s,release_channel:n}});return r&&(0,y.S3)(r),a}let E=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,A.D)(e=>L(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?f.Am.error("Failed to restore project: ".concat(e.message)):t(e,s,n)},...s})};var R=s(19890),U=s(5359),P=s(94281),Z=s(9881),I=s(30114),T=s(56535),F=s(19405),O=s(53486),D=s(37914),q=s(76707),W=s(68981),V=s(33971),H=s(59225),M=s(28179),B=s(11968),Y=s(15647),K=s(86490),G=s(20156),Q=s(2626);let J=async e=>{let{projectRef:t}=e;if(!t)throw Error("projectRef is required");let{data:s,error:n}=await (0,y.v_)("/platform/storage/{ref}/archive",{params:{path:{ref:t}}});return n&&(0,y.S3)(n),s};async function X(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:a}=await (0,y.U2)("/platform/storage/{ref}/archive",{params:{path:{ref:s}},signal:t});if(a){var r;if(null==a?void 0:null===(r=a.message)||void 0===r?void 0:r.includes("Storage archive not found"))return{fileUrl:void 0};(0,y.S3)(a)}return n}let $=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.a)(Q.m.archive(t),e=>{let{signal:s}=e;return X({projectRef:t},s)},{enabled:s&&void 0!==t,...n})};var ee=s(27735),et=s(3696),es=s(15011),en=s(32672);let ea=()=>{var e,t;let{ref:s}=(0,g.UO)(),{project:a}=(0,en.d2)(),[r,o]=(0,m.useState)(),[l,c]=(0,m.useState)(!1),u=null==a?void 0:null===(e=a.dbVersion)||void 0===e?void 0:e.replace("supabase-postgres-",""),p=(0,I.P)("enforceNinetyDayUnpauseExpiry"),h=(0,I.P)("enableNinetyDayStorageDownload"),{data:x}=z({ref:s},{enabled:(null==a?void 0:a.status)===T.S.INACTIVE&&p}),v=null==x?void 0:x.latest_downloadable_backup_id,{data:j}=$({projectRef:s},{refetchInterval:l,refetchOnWindowFocus:!1,onSuccess:e=>{e.fileUrl&&!1!==l&&(f.Am.success("Downloading storage objects",{id:r}),o(void 0),c(!1),k(e.fileUrl))}}),b=null==j?void 0:j.fileUrl,{mutate:y}=(0,G.s)({onSuccess:e=>{let{fileUrl:t}=e,s=document.createElement("a");s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}),{mutate:w}=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.NL)();return(0,A.D)(e=>J(e),{async onSuccess(t,s,a){let{projectRef:r}=s;await n.invalidateQueries(Q.m.archive(r)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?f.Am.error("Failed to create storage archive: ".concat(e.message)):t(e,s,n)},...s})}({onSuccess:()=>{o(f.Am.loading("Retrieving storage archive. This may take a few minutes depending on the size of your storage objects.")),c(5e3)}}),N=()=>{if(void 0===s)return console.error("Project ref is required");if(!v)return f.Am.error("No backups available for download");let e=f.Am.loading("Fetching database backup");y({ref:s,backup:{id:v,project_id:-1,inserted_at:"",isPhysicalBackup:!1,status:{}}},{onSuccess:()=>{f.Am.success("Downloading database backup",{id:e})}})},k=e=>{let t=document.createElement("a");t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)},S=()=>{b?(f.Am.success("Downloading storage objects"),k(b)):w({projectRef:s})};return(0,n.jsxs)(F.bZ,{variant:"warning",children:[(0,n.jsx)(et.aN,{}),(0,n.jsx)(F.Cd,{children:"Project cannot be restored through the dashboard"}),(0,n.jsxs)(F.X,{children:["This project has been paused for over"," ",(0,n.jsxs)("span",{className:"text-foreground",children:[null!==(t=null==x?void 0:x.max_days_till_restore_disabled)&&void 0!==t?t:90," days"]})," ","and cannot be restored through the dashboard. However, your data remains intact and can be downloaded as a backup."]}),(0,n.jsxs)(F.X,{className:"flex items-center gap-x-2 mt-3",children:[(0,n.jsxs)(es.h_,{children:[(0,n.jsx)(es.$F,{asChild:!0,children:(0,n.jsx)(O.z,{type:"default",icon:(0,n.jsx)(B.Z,{}),iconRight:(0,n.jsx)(Y.Z,{}),children:"Download backups"})}),(0,n.jsxs)(es.AW,{className:"w-56",align:"start",children:[(0,n.jsxs)(K._,{className:"gap-x-2",disabled:!v,onClick:()=>N(),tooltip:{content:{side:"right",text:"No backups available, please reach out via support for assistance"}},children:[(0,n.jsx)(ee.vo,{size:16}),"Database backup (PG: ",u,")"]}),(0,n.jsxs)(K._,{className:"gap-x-2",disabled:!h,onClick:()=>S(),tooltip:{content:{side:"right",text:"This feature is not available yet, please reach out to support for assistance"}},children:[(0,n.jsx)(ee.Ke,{size:16}),"Storage objects"]})]})]}),(0,n.jsx)(O.z,{asChild:!0,type:"default",icon:(0,n.jsx)(d.Z,{}),children:(0,n.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/platform/migrating-and-upgrading-projects#time-limits",children:"More information"})})]})]})},er=()=>(0,n.jsxs)(F.bZ,{children:[(0,n.jsx)(et.aN,{}),(0,n.jsx)(F.Cd,{children:"Project will count towards compute usage once restored"}),(0,n.jsx)(F.X,{children:"For every hour your instance is active, we will bill you based on the compute size of your project."}),(0,n.jsx)(F.X,{className:"mt-3",children:(0,n.jsx)(O.z,{asChild:!0,type:"default",icon:(0,n.jsx)(d.Z,{}),children:(0,n.jsx)("a",{href:"https://supabase.com/docs/guides/platform/manage-your-usage/compute",target:"_blank",rel:"noreferrer",children:"More information"})})})]}),ei=e=>{let{postgres_engine:t,release_channel:s}=e;return"".concat(t,"|").concat(s)},eo=e=>{let[t,s]=e.split("|");return{postgresEngine:t,releaseChannel:s}},el=e=>{var t,s,o,u,b;let{product:y}=e,{ref:w}=(0,g.UO)(),N=(0,i.NL)(),{project:C}=(0,en.d2)(),_=(0,Z.l)(),A=(0,I.P)("enforceNinetyDayUnpauseExpiry"),L=(0,I.P)("disableProjectVersionSelection"),B=(0,I.O)("proBenefitWording"),Y=null==_?void 0:_.slug,{data:K}=(0,U.Gl)({orgSlug:Y}),{data:G,error:Q,isError:J,isSuccess:X,isLoading:$}=z({ref:w},{enabled:(null==C?void 0:C.status)===T.S.INACTIVE&&A}),ee=null!==(o=null!==(s=null==G?void 0:G.remaining_days_till_restore_disabled)&&void 0!==s?s:null==G?void 0:G.max_days_till_restore_disabled)&&void 0!==o?o:0,et=(null==K?void 0:null===(t=K.plan)||void 0===t?void 0:t.id)==="free",es=A&&X&&!G.can_restore,{data:el}=(0,S.u)({slug:Y},{enabled:et}),{data:ec}=k({projectRef:null==C?void 0:C.ref}),ed=(null==ec?void 0:ec.available_versions)||[],eu=(el||[]).length>0,[ep,em]=(0,m.useState)(!1),[eh,ef]=(0,m.useState)(!1),{mutate:ex,isLoading:eg}=E({onSuccess:(e,t)=>{(0,R.k7)(N,t.ref,T.S.RESTORING),f.Am.success("Restoring project")}}),ev=(0,P.Xo)(r.KA.INFRA_EXECUTE,"queue_jobs.projects.initialize_or_resume"),ej=async e=>{if(!C)return f.Am.error("Unable to restore: project is required");if(L)ex({ref:C.ref});else{let{postgresVersionSelection:t}=e,s=eo(t);ex({ref:C.ref,releaseChannel:s.releaseChannel,postgresEngine:s.postgresEngine})}},eb=x.z.object({postgresVersionSelection:x.z.string()}),ey=(0,h.cI)({resolver:(0,a.F)(eb),mode:"onChange",defaultValues:{postgresVersionSelection:""}});return(0,m.useEffect)(()=>{let e=(null==ec?void 0:ec.available_versions[0])?ei(null==ec?void 0:ec.available_versions[0]):"";ey.setValue("postgresVersionSelection",e)},[ec,ey]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)("div",{className:"w-full mx-auto mb-8 md:mb-16 max-w-7xl",children:(0,n.jsx)("div",{className:"mx-6 flex md:h-[500px] items-center justify-center rounded border border-overlay bg-surface-100 p-4 md:p-8",children:(0,n.jsxs)("div",{className:"grid w-[550px] gap-4",children:[(0,n.jsx)("div",{className:"mx-auto flex max-w-[300px] items-center justify-center space-x-4 lg:space-x-8",children:(0,n.jsx)(c.Z,{className:"text-foreground-light",size:50,strokeWidth:1.5})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsxs)("p",{className:"text-center",children:['The project "',null!==(u=null==C?void 0:C.name)&&void 0!==u?u:"",'" is currently paused.']}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light text-center",children:["All of your project's data is still intact, but your project is inaccessible while paused."," ",void 0!==y?(0,n.jsxs)(n.Fragment,{children:["Restore this project to access the"," ",(0,n.jsx)("span",{className:"text-brand",children:y})," page"]}):"Restore this project and get back to building!"]})]}),A&&(0,n.jsxs)(n.Fragment,{children:[$&&(0,n.jsx)(M.A,{}),J&&(0,n.jsx)(v.Z,{error:Q,subject:"Failed to retrieve pause status"}),X&&(0,n.jsx)(n.Fragment,{children:es?(0,n.jsx)(ea,{}):et?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light text-center",children:"variant-a"===B?"Upgrade to Pro plan to prevent future pauses and use Pro features like branching, compute upgrades, and daily backups.":"To prevent future pauses, consider upgrading to Pro."}),(0,n.jsxs)(F.bZ,{children:[(0,n.jsxs)(F.Cd,{children:["Project can be restored through the dashboard within the next"," ",ee," day",ee>1?"s":""]}),(0,n.jsxs)(F.X,{children:["Free projects cannot be restored through the dashboard if they are paused for more than"," ",(0,n.jsxs)("span",{className:"text-foreground",children:[null==G?void 0:G.max_days_till_restore_disabled," days"]}),". The latest that your project can be restored is by"," ",(0,n.jsx)("span",{className:"text-foreground",children:l()().utc().add(null!==(b=G.remaining_days_till_restore_disabled)&&void 0!==b?b:0,"day").format("DD MMM YYYY")}),". However, your database backup and Storage objects will still be available for download thereafter."]}),(0,n.jsx)(F.X,{className:"mt-3",children:(0,n.jsx)(O.z,{asChild:!0,type:"default",icon:(0,n.jsx)(d.Z,{}),children:(0,n.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/platform/migrating-and-upgrading-projects#time-limits",children:"More information"})})})]})]}):(0,n.jsx)(er,{})})]}),!A&&!et&&(0,n.jsx)(er,{})]}),(!A||X&&!es)&&(0,n.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,n.jsx)(j.u,{size:"tiny",type:"default",disabled:!ev,onClick:()=>{ev?eu?ef(!0):em(!0):f.Am.error("You do not have the required permissions to restore this project")},tooltip:{content:{side:"bottom",text:ev?void 0:"You need additional permissions to resume this project"}},children:"Restore project"}),et?(0,n.jsx)(O.z,{asChild:!0,type:"primary",children:(0,n.jsx)(p(),{href:"/org/".concat(Y,"/billing?panel=subscriptionPlan&source=projectPausedStateRestore"),children:"Upgrade to Pro"})}):(0,n.jsx)(O.z,{asChild:!0,type:"default",children:(0,n.jsx)(p(),{href:"/project/".concat(w,"/settings/general"),children:"View project settings"})})]})]})})})}),(0,n.jsx)(D.Z,{hideFooter:!0,visible:ep,size:"small",title:"Restore this project",description:"Confirm to restore this project? Your project's data will be restored to when it was initially paused.",onCancel:()=>em(!1),header:"Restore this project",children:(0,n.jsx)(q.l0,{...ey,children:(0,n.jsxs)("form",{onSubmit:ey.handleSubmit(ej),children:[!L&&(0,n.jsx)(D.Z.Content,{children:(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)(q.Wi,{control:ey.control,name:"postgresVersionSelection",render:e=>{let{field:t}=e;return(0,n.jsx)(H.E,{label:"Select the version of Postgres to restore to",children:(0,n.jsx)(q.NI,{children:(0,n.jsxs)(W.Ph,{value:t.value,onValueChange:t.onChange,disabled:ed.length<=1,children:[(0,n.jsx)(W.i4,{className:"[&>:nth-child(1)]:w-full [&>:nth-child(1)]:flex [&>:nth-child(1)]:items-start",children:(0,n.jsx)(W.ki,{placeholder:"Select a Postgres version"})}),(0,n.jsx)(W.Bw,{children:(0,n.jsx)(W.DI,{children:ed.map(e=>{var t;let s=null===(t=e.version.split("supabase-postgres-")[1])||void 0===t?void 0:t.replace("-orioledb","");return(0,n.jsx)(W.Ql,{value:ei(e),className:"w-full [&>:nth-child(2)]:w-full",children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between w-full",children:[(0,n.jsx)("span",{className:"text-foreground",children:s}),(0,n.jsxs)("div",{children:["ga"!==e.release_channel&&(0,n.jsx)(V.C,{variant:"warning",className:"mr-1 capitalize",children:e.release_channel}),e.postgres_engine.includes("oriole-preview")&&(0,n.jsxs)("span",{children:[(0,n.jsx)(V.C,{variant:"warning",className:"mr-1",children:"OrioleDB"}),(0,n.jsx)(V.C,{variant:"warning",className:"mr-1",children:"Preview"})]})]})]})},ei(e))})})})]})})})}})})}),(0,n.jsxs)(D.Z.Content,{className:"flex items-center space-x-2 justify-end",children:[(0,n.jsx)(O.z,{type:"default",disabled:eg,onClick:()=>em(!1),children:"Cancel"}),(0,n.jsx)(O.z,{htmlType:"submit",loading:eg,children:"Confirm restore"})]})]})})}),(0,n.jsxs)(D.Z,{hideFooter:!0,visible:eh,size:"medium",header:"Your organization has members who have exceeded their free project limits",onCancel:()=>ef(!1),children:[(0,n.jsxs)(D.Z.Content,{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"The following members have reached their maximum limits for the number of active free plan projects within organizations where they are an administrator or owner:"}),(0,n.jsx)("ul",{className:"pl-5 text-sm list-disc text-foreground-light",children:(el||[]).map((e,t)=>(0,n.jsxs)("li",{children:[e.username||e.primary_email," (Limit: ",e.free_project_limit," free projects)"]},"member-".concat(t)))}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"These members will need to either delete, pause, or upgrade one or more of these projects before you're able to unpause this project."})]}),(0,n.jsx)(D.Z.Separator,{}),(0,n.jsx)(D.Z.Content,{children:(0,n.jsx)(O.z,{htmlType:"button",type:"default",onClick:()=>ef(!1),block:!0,children:"Understood"})})]})]})}},15631:function(e,t,s){"use strict";s.d(t,{$:function(){return nl},Z:function(){return nc}});var n=s(97458),a=s(73512),r=s(52983),i=s(26944),o=s(53486),l=s(38391),c=s(86891),d=s(41212),u=s(44151),p=s(79663),m=e=>{var t;let{apikey:s,endpoint:r,selectedLanguage:i,snippet:o,children:l}=e,{ref:c}=(0,a.UO)(),d=null===(t=o[i])||void 0===t?void 0:t.call(o,s,r).replaceAll("[ref]",null!=c?c:"");return(0,n.jsxs)("div",{id:o.key,className:"space-y-4 py-6 pb-2 last:pb-6",children:[(0,n.jsxs)("div",{className:"px-4 space-y-4",children:[(0,n.jsx)("h2",{className:"doc-heading",children:o.title}),void 0!==o.description&&(0,n.jsx)("div",{className:"doc-section",children:(0,n.jsx)("article",{className:"text text-sm text-foreground-light",children:(0,n.jsx)(p.U,{className:"max-w-none",content:o.description.replaceAll("[ref]",null!=c?c:"_")})})})]}),l,void 0!==d&&(0,n.jsx)("div",{className:"px-4 codeblock-container",children:(0,n.jsx)("div",{className:"bg rounded p-2",children:(0,n.jsx)(u.c,{className:i,children:d})})})]})};let h=[{name:"Connect",key:"introduction"},{name:"User Management",key:"user-management"},{name:"Tables & Views",key:"entities"},{name:"Stored Procedures",key:"stored-procedures"},{name:"Storage",key:"storage"},{name:"Edge Functions",key:"edge-functions"},{name:"Realtime",key:"realtime"}],f={init:{key:"introduction",category:"introduction",title:"Connect to your project",description:"Projects have a RESTful endpoint that you can use with your project's API key to query and manage your database. Put these keys in your .env file.",js:(e,t)=>"\nimport { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = '".concat(t,"'\nconst supabaseKey = process.env.SUPABASE_KEY\nconst supabase = createClient(supabaseUrl, supabaseKey)"),bash:()=>"# No client library required for Bash."},clientApiKeys:{key:"client-api-keys",category:"introduction",title:"Client API Keys",description:'Client keys allow "anonymous access" to your database, until the user has logged in. After logging in, the keys will switch to the user\'s own login token.\n\nIn this documentation, we will refer to the key using the name `SUPABASE_KEY`. You can find the `anon` key in the [API settings](/project/[ref]/settings/api) page.',js:(e,t)=>"\nconst SUPABASE_KEY = '".concat(e,"'\nconst SUPABASE_URL = '").concat(t,"'\nconst supabase = createClient(SUPABASE_URL, process.env.SUPABASE_KEY);"),bash:(e,t)=>"".concat(e)},serviceApiKeys:{key:"service-keys",category:"introduction",title:"Service Keys",description:"Service keys have *FULL* access to your data, bypassing any security policies. Be VERY careful where you expose these keys. They should only be used on a server and never on a client or browser.\n\nIn this documentation, we refer to the key using the name `SERVICE_KEY`. You can find the `service_role` key above or in the [API settings](/project/[ref]/settings/api) page.",js:(e,t)=>"\nconst SUPABASE_KEY = '".concat(e,"'\nconst SUPABASE_URL = 'https://").concat(t,"'\nconst supabase = createClient(SUPABASE_URL, process.env.SUPABASE_KEY);"),bash:(e,t)=>"".concat(e)},userManagement:{key:"user-management",category:"user-management",title:"Introduction",description:"Supabase makes it easy to manage your users.\n\n  Supabase assigns each user a unique ID. You can reference this ID anywhere in your database. For example, you might create a `profiles` table references the user using a `user_id` field.\n\n  Supabase already has built in the routes to sign up, login, and log out for managing users in your apps and websites.",js:void 0,bash:void 0},signUp:{key:"sign-up",category:"user-management",title:"Sign up",description:'Allow your users to sign up and create a new account\n\n  After they have signed up, all interactions using the Supabase client will be performed as "that user".',js:(e,t)=>"\nconst { data, error } = await supabase.auth.signUp({\n  email: 'someone@email.com',\n  password: 'some-secure-password'\n})",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/signup' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "email": "someone@email.com",\n  "password": "some-secure-password"\n}\'')},emailLogin:{key:"email-login",category:"user-management",title:"Log in with Email/Password",description:'\nIf an account is created, users can login to your app.\n\nAfter they have logged in, all interactions using the Supabase JS client will be performed as "that user".',js:(e,t)=>"\nconst { data, error } = await supabase.auth.signInWithPassword({\n  email: 'someone@email.com',\n  password: 'some-secure-password'\n})\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/token?grant_type=password' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "email": "someone@email.com",\n  "password": "some-secure-password"\n}\'\n    ')},magicLinkLogin:{key:"magic-link-login",category:"user-management",title:"Log in with Magic Link via Email",description:'\nSend a user a passwordless link which they can use to redeem an access_token.\n\nAfter they have clicked the link, all interactions using the Supabase JS client will be performed as "that user".',js:(e,t)=>"\nconst { data, error } = await supabase.auth.signInWithOtp({\n  email: 'someone@email.com'\n})\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/magiclink' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "email": "someone@email.com"\n}\'\n    ')},phoneLogin:{key:"phone-log-in",category:"user-management",title:"Sign up with Phone/Password",description:"\nA phone number can be used instead of an email as a primary account confirmation mechanism.\n\nThe user will receive a mobile OTP via sms with which they can verify that they control the phone number.\n\nYou must enter your own twilio credentials on the auth settings page to enable sms confirmations.",js:(e,t)=>"\nconst { data, error } = await supabase.auth.signUp({\n  phone: '+13334445555',\n  password: 'some-password'\n})\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/signup' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "phone": "+13334445555",\n  "password": "some-password"\n}\'\n    ')},smsLogin:{key:"sms-otp-log-in",category:"user-management",title:"Login via SMS OTP",description:"\nSMS OTPs work like magic links, except you have to provide an interface for the user to verify the 6 digit number they receive.\n\nYou must enter your own twilio credentials on the auth settings page to enable SMS-based Logins.",js:(e,t)=>"\nconst { data, error } = await supabase.auth.signInWithOtp({\n  phone: '+13334445555'\n})\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/otp' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "phone": "+13334445555"\n}\'\n    ')},smsVerify:{key:"sms-verify",category:"user-management",title:"Verify an SMS OTP",description:"\nOnce the user has received the OTP, have them enter it in a form and send it for verification\n\nYou must enter your own twilio credentials on the auth settings page to enable SMS-based OTP verification.",js:(e,t)=>"\nconst { data, error } = await supabase.auth.verifyOtp({\n  phone: '+13334445555',\n  token: '123456',\n  type: 'sms'\n})\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/verify' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "type": "sms",\n  "phone": "+13334445555",\n  "token": "123456"\n}\'\n    ')},oauthLogin:{key:"oauth-login",category:"user-management",title:"Log in with Third Party OAuth",description:'\nUsers can log in with Third Party OAuth like Google, Facebook, GitHub, and more. You must first enable each of these in the Auth Providers settings [here](https://supabase.com).\n\nView all the available [Third Party OAuth providers](https://supabase.com).\n\nAfter they have logged in, all interactions using the Supabase JS client will be performed as "that user".\n\nGenerate your Client ID and secret from: [Google](https://console.developers.google.com/apis/credentials), [Github](https://github.com/settings/applications/new), [Gitlab](https://gitlab.com/oauth/applications), [Facebook](https://developers.facebook.com/apps), and [Bitbucket](https://support.atlassian.com/bitbucket-cloud/docs/use-oauth-on-bitbucket-cloud).',js:(e,t)=>"\nconst { data, error } = await supabase.auth.signInWithOAuth({\n  provider: 'github'\n})\n    ",bash:(e,t)=>"No available command"},user:{key:"get-user",category:"user-management",title:"Get user",description:"Get the JSON object for the logged in user.",js:(e,t)=>"\nconst { data: { user } } = await supabase.auth.getUser()\n    ",bash:(e,t)=>"\ncurl -X GET '".concat(t,"/auth/v1/user' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Authorization: Bearer USER_TOKEN"\n    ')},forgotPassWordEmail:{key:"forgot-password-email",category:"user-management",title:"Forgot password / email",description:'Sends the user a log in link via email. Once logged in you should direct the user to a new password form. And use "Update User" below to save the new password.',js:(e,t)=>"\nconst { data, error } = await supabase.auth.resetPasswordForEmail(email)\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/recover' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n"email": "someone@email.com"\n}\'\n')},updateUser:{key:"update-user",category:"user-management",title:"Update User",description:"Update the user with a new email or password. Each key (email, password, and data) is optional.",js:(e,t)=>'\nconst { data, error } = await supabase.auth.updateUser({\n  email: "new@email.com",\n  password: "new-password",\n  data: { hello: \'world\' }\n})\n    ',bash:(e,t)=>"\ncurl -X PUT '".concat(t,"/auth/v1/user' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Authorization: Bearer <USERS-ACCESS-TOKEN>" \\\n-H "Content-Type: application/json" \\\n-d \'{\n"email": "someone@email.com",\n"password": "new-password",\n"data": {\n  "key": "value"\n}\n}\'\n')},logout:{key:"log-out",category:"user-management",title:"Log out",description:'After calling log out, all interactions using the Supabase JS client will be "anonymous".',js:(e,t)=>"\nconst { error } = await supabase.auth.signOut()\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/logout' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer USER_TOKEN"\n    ')},emailInvite:{key:"email-invite",category:"user-management",title:"Invite user over email",description:'\nSend a user a passwordless link which they can use to sign up and log in.\n\nAfter they have clicked the link, all interactions using the Supabase JS client will be performed as "that user".\n\nThis endpoint requires you use the `service_role_key` when initializing the client, and should only be invoked from the server, never from the client.',js:(e,t)=>"\nconst { data, error } = await supabase.auth.api.inviteUserByEmail('someone@email.com')\n    ",bash:(e,t)=>"\ncurl -X POST '".concat(t,"/auth/v1/invite' \\\n-H \"apikey: ").concat(e,'" \\\n-H "Authorization: Bearer ').concat(e,'" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "email": "someone@email.com"\n}\'\n    ')},storage:{key:"storage",category:"storage",title:"Introduction",description:"Supabase Storage makes it simple to upload and serve files of any size, providing a robust framework for file access controls.\n\nYou can use Supabase Storage to store images, videos, documents, and any other file type. Serve your assets with a global CDN to reduce latency from over 285 cities globally. Supabase Storage includes a built-in image optimizer, so you can resize and compress your media files on the fly.",js:void 0,bash:void 0},edgeFunctions:{key:"edge-function",category:"edge-functions",title:"Introduction",description:"\nEdge Functions are server-side TypeScript functions, distributed globally at the edgeâ€”close to your users. They can be used for listening to webhooks or integrating your Supabase project with third-parties like Stripe. Edge Functions are developed using Deno, which offers a few benefits to you as a developer:\n",js:void 0,bash:void 0},edgeFunctionsPreReq:{key:"edge-function-pre-req",category:"edge-functions",title:"Pre-requisites",description:"\nFollow the steps to prepare your Supabase project on your local machine.\n\n- Install the Supabase [CLI](https://supabase.com/docs/guides/cli).\n- [Login to the CLI](https://supabase.com/docs/reference/cli/usage#supabase-login) using the command: `supabase login`..\n- [Initialize Supabase](https://supabase.com/docs/guides/getting-started/local-development#getting-started) inside your project using the command: `supabase init`..\n- [Link to your Remote Project](https://supabase.com/docs/reference/cli/usage#supabase-link) using the command `supabase link --project-ref [ref]`..\n- Setup your environment: Follow the steps [here](https://supabase.com/docs/guides/functions/quickstart#setting-up-your-environment).\n",js:void 0,bash:void 0},createEdgeFunction:{key:"create-edge-function",category:"edge-functions",title:"Create an Edge Function",description:"\nCreate a Supabase Edge Function locally via the Supabase CLI.\n",js:()=>"// Create an edge function via the Supabase CLI",bash:()=>"\nsupabase functions new hello-world\n"},deployEdgeFunction:{key:"deploy-edge-function",category:"edge-functions",title:"Deploy an Edge Function",description:"\nDeploy a Supabase Edge Function to your Supabase project via the Supabase CLI.\n",js:()=>"// Deploy an edge function via the Supabase CLI",bash:()=>"supabase functions deploy hello-world --project-ref [ref]\n"},entitiesIntroduction:{key:"entities-introduction",category:"entities",title:"Introduction",description:"\nAll views and tables in the `public` schema, and those accessible by the active database role for a request are available for querying via the API.\n\nIf you don't want to expose tables in your API, simply add them to a different schema (not the `public` schema).\n",js:void 0,bash:void 0},generatingTypes:{key:"generating-types",category:"entities",title:"Generating Types",description:"\nSupabase APIs are generated from your database, which means that we can use database introspection to generate type-safe API definitions.\n\nYou can generate types from your database either through the [Supabase CLI](https://supabase.com/docs/guides/database/api/generating-types), or by downloading the types file via the button on the right and importing it in your application within `src/index.ts`.\n",js:void 0,bash:void 0},graphql:{key:"graphql",category:"entities",title:"GraphQL vs PostgREST",description:"\nIf you have a GraphQL background, you might be wondering if you can fetch your data in a single round-trip. The answer is yes! The syntax is very similar. This example shows how you might achieve the same thing with Apollo GraphQL and Supabase.\n\nStill want GraphQL?\nIf you still want to use GraphQL, you can. Supabase provides you with a full Postgres database, so as long as your middleware can connect to the database then you can still use the tools you love. You can find the database connection details [in the settings](/project/[ref]/settings/database).\n",js:(e,t)=>"\n// With Apollo GraphQL\nconst { loading, error, data } = useQuery(gql`\n  query GetDogs {\n    dogs {\n      id\n      breed\n      owner {\n        id\n        name\n      }\n    }\n  }\n    `)\n\n// With Supabase\nconst { data, error } = await supabase\n  .from('dogs')\n  .select(`\n      id, breed,\n      owner (id, name)\n  `)\n",bash:(e,t)=>"\n// With Apollo GraphQL\nconst { loading, error, data } = useQuery(gql`\n  query GetDogs {\n    dogs {\n      id\n      breed\n      owner {\n        id\n        name\n      }\n    }\n  }\n    `)\n\n// With Supabase\nconst { data, error } = await supabase\n  .from('dogs')\n  .select(`\n      id, breed,\n      owner (id, name)\n  `)\n    "},storedProceduresIntroduction:{key:"stored-procedures-introduction",category:"stored-procedures",title:"Introduction",description:"\nAll of your database stored procedures are available on your API. This means you can build your logic directly into the database (if you're brave enough)!\n\nThe API endpoint supports POST (and in some cases GET) to execute the function.\n",js:void 0,bash:void 0},realtime:{key:"realtime-introduction",category:"realtime",title:"Introduction",description:"\nSupabase provides a globally distributed cluster of Realtime servers that enable the following functionality:\n\n- [Broadcast](https://supabase.com/docs/guides/realtime/broadcast): Send ephemeral messages from client to clients with low latency.\n- [Presence](https://supabase.com/docs/guides/realtime/presence): Track and synchronize shared state between clients.\n- [Postgres Changes](https://supabase.com/docs/guides/realtime/postgres-changes): Listen to Postgres database changes and send them to authorized clients.\n",js:void 0,bash:void 0},subscribeChannel:{key:"subscribe-to-channel",category:"realtime",title:"Subscribe to channel",description:"\nCreates an event handler that listens to changes.\n\n- By default, Broadcast and Presence are enabled for all projects.\n- By default, listening to database changes is disabled for new projects due to database performance and security concerns. You can turn it on by managing Realtime's [replication](https://supabase.com/docs/guides/api#realtime-api-overview).\n- You can receive the \"previous\" data for updates and deletes by setting the table's `REPLICA IDENTITY` to `FULL` (e.g., `ALTER TABLE your_table REPLICA IDENTITY FULL;`).\n- Row level security is not applied to delete statements. When RLS is enabled and replica identity is set to full, only the primary key is sent to clients.\n",js:()=>"\nsupabase\n  .channel('any')\n  .on('broadcast', { event: 'cursor-pos' }, payload => {\n    console.log('Cursor position received!', payload)\n  })\n  .subscribe((status) => {\n    if (status === 'SUBSCRIBED') {\n      channel.send({\n        type: 'broadcast',\n        event: 'cursor-pos',\n        payload: { x: Math.random(), y: Math.random() },\n      })\n    }\n  })\n    ",bash:()=>"# Realtime streams are only supported by our client libraries"},unsubscribeChannel:{key:"unsubscribe-channel",category:"realtime",title:"Unsubscribe from a channel",description:"\nUnsubscribes and removes Realtime channel from Realtime client.\n\nRemoving a channel is a great way to maintain the performance of your project's Realtime service as well as your database if you're listening to Postgres changes. Supabase will automatically handle cleanup 30 seconds after a client is disconnected, but unused channels may cause degradation as more clients are simultaneously subscribed.\n",js:()=>"supabase.removeChannel(myChannel)",bash:()=>"# Realtime streams are only supported by our client libraries"},unsubscribeChannels:{key:"unsubscribe-channels",category:"realtime",title:"Unsubscribe from all channels",description:"\nUnsubscribes and removes all Realtime channels from Realtime client.\n\nRemoving a channel is a great way to maintain the performance of your project's Realtime service as well as your database if you're listening to Postgres changes. Supabase will automatically handle cleanup 30 seconds after a client is disconnected, but unused channels may cause degradation as more clients are simultaneously subscribed.\n",js:()=>"supabase.removeChannels()",bash:()=>"# Realtime streams are only supported by our client libraries"},retrieveAllChannels:{key:"unsubscribe-channel",category:"realtime",title:"Unsubscribe from a channel",description:"\nReturns all Realtime channels.\n",js:()=>"const channels = supabase.getChannels()",bash:()=>"# Realtime streams are only supported by our client libraries"}},x={rpcSingle:{key:"invoke-function",title:"Invoke function",category:"stored-procedures",description:void 0,docsUrl:"https://supabase.com/docs/reference/javascript/rpc",code:e=>{let{rpcName:t,rpcParams:s,endpoint:n,apiKey:a,showBearer:r=!0}=e,i=s.map(e=>'"'.concat(e.name,'": "value"')).join(", "),o=!s.length,l=o?"":", {".concat(s.length?s.map(e=>"\n    ".concat(e.name)).join(", ").concat("\n  "):"","}");return[{key:"rpc-single",title:void 0,bash:"\n  curl -X POST '".concat(n,"/rest/v1/rpc/").concat(t,"' \\").concat(o?"":"\n-d '{ ".concat(i," }' \\"),'\n  -H "Content-Type: application/json" \\\n  -H "apikey: ').concat(a,'" ').concat(r?'\\\n  -H "Authorization: Bearer '.concat(a,'"'):"","\n        "),js:"\nlet { data, error } = await supabase\n  .rpc('".concat(t,"'").concat(l,")\n\nif (error) console.error(error)\nelse console.log(data)\n        ")}]}},readRows:{key:"read-rows",title:"Read rows",category:"entities",docsUrl:"https://supabase.com/docs/reference/javascript/select",description:"To read rows in this table, use the `select` method.",code:e=>{let{resourceId:t,endpoint:s,apikey:n}=e;return[{key:"read-all-rows",title:"Read all rows",bash:"\ncurl '".concat(s,"/rest/v1/").concat(t,"?select=*' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'"\n          '),js:"\nlet { data: ".concat(t,", error } = await supabase\n  .from('").concat(t,"')\n  .select('*')\n          ")},{key:"read-specific-columns",title:"Read specific columns",bash:"\ncurl '".concat(s,"/rest/v1/").concat(t,"?select=some_column,other_column' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'"\n          '),js:"\nlet { data: ".concat(t,", error } = await supabase\n  .from('").concat(t,"')\n  .select('some_column,other_column')\n  ")},{key:"read-foreign-tables",title:"Read referenced tables",bash:"\ncurl '".concat(s,"/rest/v1/").concat(t,"?select=some_column,other_table(foreign_key)' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'"\n          '),js:"\nlet { data: ".concat(t,", error } = await supabase\n  .from('").concat(t,"')\n  .select(`\n    some_column,\n    other_table (\n      foreign_key\n    )\n  `)\n          ")},{key:"with-pagination",title:"With pagination",bash:"\ncurl '".concat(s,"/rest/v1/").concat(t,"?select=*' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Range: 0-9"\n          '),js:"\nlet { data: ".concat(t,", error } = await supabase\n  .from('").concat(t,"')\n  .select('*')\n  .range(0, 9)\n          ")}]}},filtering:{key:"filter-rows",category:"entities",title:"Filtering",description:"Supabase provides a wide range of filters",docsUrl:"https://supabase.com/docs/reference/javascript/using-filters",code:e=>{let{resourceId:t,endpoint:s,apikey:n}=e;return[{key:"with-filtering",title:"With filtering",bash:"\ncurl --get '".concat(s,"/rest/v1/").concat(t,"' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Range: 0-9" \\\n-d "select=*" \\\n\\\n`# Filters` \\\n-d "column=eq.Equal+to" \\\n-d "column=gt.Greater+than" \\\n-d "column=lt.Less+than" \\\n-d "column=gte.Greater+than+or+equal+to" \\\n-d "column=lte.Less+than+or+equal+to" \\\n-d "column=like.*CaseSensitive*" \\\n-d "column=ilike.*CaseInsensitive*" \\\n-d "column=is.null" \\\n-d "column=in.(Array,Values)" \\\n-d "column=neq.Not+equal+to" \\\n\\\n`# Arrays` \\\n-d "array_column=cs.{array,contains}" \\\n-d "array_column=cd.{contained,by}" \\\n\\\n`# Logical operators` \\\n-d "column=not.like.Negate+filter" \\\n-d "or=(some_column.eq.Some+value,other_column.eq.Other+value)"\n        '),js:"\nlet { data: ".concat(t,", error } = await supabase\n  .from('").concat(t,"')\n  .select(\"*\")\n\n  // Filters\n  .eq('column', 'Equal to')\n  .gt('column', 'Greater than')\n  .lt('column', 'Less than')\n  .gte('column', 'Greater than or equal to')\n  .lte('column', 'Less than or equal to')\n  .like('column', '%CaseSensitive%')\n  .ilike('column', '%CaseInsensitive%')\n  .is('column', null)\n  .in('column', ['Array', 'Values'])\n  .neq('column', 'Not equal to')\n\n  // Arrays\n  .contains('array_column', ['array', 'contains'])\n  .containedBy('array_column', ['contained', 'by'])\n\n  // Logical operators\n  .not('column', 'like', 'Negate filter')\n  .or('some_column.eq.Some value, other_column.eq.Other value')\n          ")}]}},insertRows:{key:"insert-rows",category:"entities",title:"Insert rows",description:"\n`insert` lets you insert into your tables. You can also insert in bulk and do UPSERT.\n\n`insert` will also return the replaced values for UPSERT.\n",docsUrl:"https://supabase.com/docs/reference/javascript/insert",code:e=>{let{resourceId:t,endpoint:s,apikey:n}=e;return[{key:"insert-a-row",title:"Insert a row",bash:"\ncurl -X POST '".concat(s,"/rest/v1/").concat(t,"' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Content-Type: application/json" \\\n-H "Prefer: return=minimal" \\\n-d \'{ "some_column": "someValue", "other_column": "otherValue" }\'\n          '),js:"\nconst { data, error } = await supabase\n  .from('".concat(t,"')\n  .insert([\n    { some_column: 'someValue', other_column: 'otherValue' },\n  ])\n  .select()\n          ")},{key:"insert-many-rows",title:"Insert many rows",bash:"\ncurl -X POST '".concat(s,"/rest/v1/").concat(t,"' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Content-Type: application/json" \\\n-d \'[{ "some_column": "someValue" }, { "other_column": "otherValue" }]\'\n          '),js:"\nconst { data, error } = await supabase\n  .from('".concat(t,"')\n  .insert([\n    { some_column: 'someValue' },\n    { some_column: 'otherValue' },\n  ])\n  .select()\n          ")},{key:"upsert-matching-rows",title:"Upsert matching rows",bash:"\ncurl -X POST '".concat(s,"/rest/v1/").concat(t,"' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Content-Type: application/json" \\\n-H "Prefer: resolution=merge-duplicates" \\\n-d \'{ "some_column": "someValue", "other_column": "otherValue" }\'\n          '),js:"\nconst { data, error } = await supabase\n  .from('".concat(t,"')\n  .upsert({ some_column: 'someValue' })\n  .select()\n          ")}]}},updateRows:{key:"update-rows",category:"entities",title:"Update rows",description:"\n`update` lets you update rows. `update` will match all rows by default. You can update specific rows using horizontal filters, e.g. `eq`, `lt`, and `is`.\n\n`update` will also return the replaced values for UPDATE.\n",docsUrl:"https://supabase.com/docs/reference/javascript/update",code:e=>{let{resourceId:t,endpoint:s,apikey:n}=e;return[{key:"update-matching-rows",title:"Update matching rows",bash:"\ncurl -X PATCH '".concat(s,"/rest/v1/").concat(t,"?some_column=eq.someValue' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'" \\\n-H "Content-Type: application/json" \\\n-H "Prefer: return=minimal" \\\n-d \'{ "other_column": "otherValue" }\'\n          '),js:"\nconst { data, error } = await supabase\n  .from('".concat(t,"')\n  .update({ other_column: 'otherValue' })\n  .eq('some_column', 'someValue')\n  .select()\n          ")}]}},deleteRows:{key:"delete-rows",category:"entities",title:"Delete rows",description:"\n`delete` lets you delete rows. `delete` will match all rows by default, so remember to specify your filters!\n",docsUrl:"https://supabase.com/docs/reference/javascript/delete",code:e=>{let{resourceId:t,endpoint:s,apikey:n}=e;return[{key:"delete-matching-rows",title:"Delete matching rows",bash:"\ncurl -X DELETE '".concat(s,"/rest/v1/").concat(t,"?some_column=eq.someValue' \\\n-H \"apikey: ").concat(n,'" \\\n-H "Authorization: Bearer ').concat(n,'"\n          '),js:"\nconst { error } = await supabase\n  .from('".concat(t,"')\n  .delete()\n  .eq('some_column', 'someValue')\n          ")}]}},subscribeChanges:{key:"subscribe-changes",category:"entities",title:"Subscribe to changes",description:"\nSupabase provides realtime functionality and broadcasts database changes to authorized users depending on Row Level Security (RLS) policies.\n",docsUrl:"https://supabase.com/docs/reference/javascript/subscribe",code:e=>{let{resourceId:t}=e;return[{key:"subscribe-all-events",title:"Subscribe to all events",bash:"# Realtime streams are only supported by our client libraries",js:"\nconst channels = supabase.channel('custom-all-channel')\n  .on(\n    'postgres_changes',\n    { event: '*', schema: 'public', table: '".concat(t,"' },\n    (payload) => {\n      console.log('Change received!', payload)\n    }\n  )\n  .subscribe()")},{key:"subscribe-to-inserts",title:"Subscribe to inserts",bash:"# Realtime streams are only supported by our client libraries",js:"\nconst channels = supabase.channel('custom-insert-channel')\n  .on(\n    'postgres_changes',\n    { event: 'INSERT', schema: 'public', table: '".concat(t,"' },\n    (payload) => {\n      console.log('Change received!', payload)\n    }\n  )\n  .subscribe()")},{key:"subscribe-to-updates",title:"Subscribe to updates",bash:"# Realtime streams are only supported by our client libraries",js:"\nconst channels = supabase.channel('custom-update-channel')\n  .on(\n    'postgres_changes',\n    { event: 'UPDATE', schema: 'public', table: '".concat(t,"' },\n    (payload) => {\n      console.log('Change received!', payload)\n    }\n  )\n  .subscribe()")},{key:"subscribe-to-deletes",title:"Subscribe to deletes",bash:"# Realtime streams are only supported by our client libraries",js:"\nconst channels = supabase.channel('custom-delete-channel')\n  .on(\n    'postgres_changes',\n    { event: 'DELETE', schema: 'public', table: '".concat(t,"' },\n    (payload) => {\n      console.log('Change received!', payload)\n    }\n  )\n  .subscribe()")},{key:"subscribe-to-specific-rows",title:"Subscribe to specific rows",bash:"# Realtime streams are only supported by our client libraries",js:"\nconst channels = supabase.channel('custom-filter-channel')\n  .on(\n    'postgres_changes',\n    { event: '*', schema: 'public', table: '".concat(t,"', filter: 'some_column=eq.some_value' },\n    (payload) => {\n      console.log('Change received!', payload)\n    }\n  )\n  .subscribe()")}]}},uploadFile:{key:"upload-file",category:"storage",title:"Upload a file",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-upload",description:"\nUpload a file to an existing bucket. RLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: only `insert` when you are uploading new files and `select`, `insert`, and `update` when you are upserting files.\n",code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-upload-file",title:void 0,bash:"\ncurl -X POST '".concat(n,"/storage/v1/object/").concat(t,"/folder/avatar1.png' \\\n-H 'Content-Type: image/png' \\\n-H \"Authorization: Bearer ").concat(s,"\" \\\n--data-binary @/path/to/your/file'\n-H 'Content-Type: multipart/form-data' \\\n-H \"Authorization: Bearer ").concat(s,"\" \\\n--data-raw $'your_file_data'\n        "),js:"\nconst avatarFile = event.target.files[0]\nconst { data, error } = await supabase\n  .storage\n  .from('".concat(t,"')\n  .upload('folder/avatar1.png', avatarFile, {\n    cacheControl: '3600',\n    upsert: false\n  })\n")}]}},deleteFiles:{key:"delete-files",category:"storage",title:"Delete files",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-remove",description:"\nDelete files within the bucket. RLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: `delete` and `select`\n",code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-delete-files",title:void 0,bash:"\ncurl -X DELETE '".concat(n,"/storage/v1/object/").concat(t,'\' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ').concat(s,'" \\\n-d \'{ "prefixes": ["file_name", "another_file_name"] }\'\n'),js:"\nconst { data, error } = await supabase\n  .storage\n  .from('".concat(t,"')\n  .remove(['folder/avatar1.png'])\n        ")}]}},listFiles:{key:"list-files",category:"storage",title:"List all files",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-list",description:"\nList all files within the bucket. RLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: `select`\n",code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-list-files",title:void 0,bash:"\ncurl -X POST '".concat(n,"/storage/v1/object/list/").concat(t,'\' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ').concat(s,'" \\\n-d \'{ "limit": 100, "offset": 0, "prefix": "", "sortBy": { "column": "name", "order": "asc" } }\''),js:"\nconst { data, error } = await supabase\n  .storage\n  .from('".concat(t,"')\n  .list('folder', {\n    limit: 100,\n    offset: 0,\n    sortBy: { column: 'name', order: 'asc' },\n  })\n        ")}]}},downloadFile:{key:"download-file",category:"storage",title:"Download a file",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-download",description:"\nDownloads a file from a private bucket. For public buckets, make a request to the URL returned from getPublicUrl instead. RLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: `select`\n",code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-download-file",title:void 0,bash:"\ncurl -X GET '".concat(n,"/storage/v1/object/").concat(t,'/folder/avatar1.png\' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ').concat(s,'" \\\n--output avatar1.png\n'),js:"\nconst { data, error } = await supabase\n  .storage\n  .from('".concat(t,"')\n  .download('folder/avatar1.png')\n      ")}]}},createSignedURL:{key:"create-signed-url",category:"storage",title:"Create a signed URL",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-createsignedurl",description:"\nCreate a signed URL which can be used to share a file for a fixed amount of time. RLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: `select`\n",code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-create-signed-url",title:void 0,bash:"\ncurl -X POST '".concat(n,"/storage/v1/object/sign/").concat(t,'/folder/avatar1.png\' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ').concat(s,'" \\\n-d \'{ "expiresIn": 60 }\'\n        '),js:"\nconst { data, error } = await supabase\n  .storage\n  .from('".concat(t,"')\n  .createSignedUrl('folder/avatar1.png', 60)\n        ")}]}},retrievePublicURL:{key:"retrieve-public-url",category:"storage",title:"Retrieve public URL",docsUrl:"https://supabase.com/docs/reference/javascript/storage-from-getpublicurl",description:'\nA simple convenience function to get the URL for an asset in a public bucket. If you do not want to use this function, you can construct the public URL by concatenating the bucket URL with the path to the asset.\n\nThis function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.\n\nThe bucket needs to be set to public, either via `updateBucket()` or by going to Storage on supabase.com/dashboard, clicking the overflow menu on a bucket and choosing "Make public"\n\nRLS policy permissions required:\n- `buckets` table permissions: none\n- `objects` table permissions: none\n',code:e=>{let{name:t,apikey:s,endpoint:n}=e;return[{key:"storage-retrieve-public-url",title:void 0,bash:"\n# No bash command available.\n# You can construct the public URL by concatenating the bucket URL with the path to the asset\n# e.g ".concat(n,"/storage/v1/object/public/").concat(t,"/folder/avatar1.png"),js:"\nconst { data } = supabase\n  .storage\n  .from('".concat(t,"')\n  .getPublicUrl('folder/avatar1.png')\n        ")}]}},invokeEdgeFunction:{key:"invoke-edge-function",category:"edge-functions",title:"Invoke an edge function",docsUrl:"https://supabase.com/docs/reference/javascript/functions-invoke",description:"\nInvokes a Supabase Edge Function. Requires an Authorization header, and invoke params generally match the [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) spec.\n\nWhen you pass in a body to your function, we automatically attach the `Content-Type` header for `Blob`, `ArrayBuffer`, `File`, `FormData` and `String`. If it doesn't match any of these types we assume the payload is `json`, serialize it and attach the `Content-Type` header as `application/json`. You can override this behavior by passing in a `Content-Type` header of your own.\n\nResponses are automatically parsed as `json`, `blob` and `form-data` depending on the `Content-Type` header sent by your function. Responses are parsed as `text` by default.\n",code:e=>{let{name:t,endpoint:s,apikey:n}=e;return[{key:"invoke-edge-function",title:void 0,bash:"\ncurl --request POST '".concat(s,"/functions/v1/").concat(t,"' \\\n--header 'Authorization: Bearer ").concat(n,"' \\\n--header 'Content-Type: application/json' \\\n--data '{ \"name\": \"Functions\" }'\n        "),js:"\nconst { data, error } = await supabase\n  .functions\n  .invoke('".concat(t,"', {\n    body: { foo: 'bar' }\n  })")}]}}};var g=e=>{let{language:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{selectedLanguage:t,snippet:f.edgeFunctions}),(0,n.jsx)(m,{selectedLanguage:t,snippet:f.edgeFunctionsPreReq}),(0,n.jsx)(m,{selectedLanguage:t,snippet:f.createEdgeFunction}),(0,n.jsx)(m,{selectedLanguage:t,snippet:f.deployEdgeFunction})]})},v=s(34549),j=s(27477),b=s(93578),y=s(74808),w=s(11968),N=e=>{let{language:t}=e,{ref:s}=(0,a.UO)(),[i,l]=(0,r.useState)(!1),{data:c}=(0,b.s)({projectRef:s}),d=async()=>{try{l(!0);let e=await (0,y.J)({ref:s,included_schemas:null==c?void 0:c.db_schema}),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e.types)),t.setAttribute("download","supabase.ts"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),v.Am.success("Successfully generated types! File is being downloaded")}catch(e){v.Am.error("Failed to generate types: ".concat(e.message))}finally{l(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{selectedLanguage:t,snippet:f.entitiesIntroduction}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m,{selectedLanguage:t,snippet:f.generatingTypes}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2 px-4 mt-3",children:[(0,n.jsx)(j.G,{href:"https://supabase.com/docs/guides/database/api/generating-types"}),(0,n.jsx)(o.z,{type:"default",disabled:i,loading:i,icon:(0,n.jsx)(w.Z,{strokeWidth:1.5}),onClick:d,children:"Generate and download types"})]}),(0,n.jsx)("p",{className:"text-xs text-foreground-light px-4 mt-2",children:"Remember to re-generate and download this file as you make changes to your tables."})]}),(0,n.jsx)(m,{selectedLanguage:t,snippet:f.graphql})]})},k=s(60661),S=s(6433),C=s(74459),_=e=>{var t,s,i,c,d;let{showKeys:u,language:p,apikey:h,endpoint:x}=e,{ref:g}=(0,a.UO)(),{data:v}=(0,l.zR)({projectRef:g}),[j,b]=(0,r.useState)();(0,r.useEffect)(()=>{void 0!==j&&setTimeout(()=>b(void 0),2e3)},[j]);let y=null===(t=(null!==(i=null==v?void 0:v.service_api_keys)&&void 0!==i?i:[]).find(e=>"anon"===e.tags))||void 0===t?void 0:t.api_key,w=null!==(d=null===(s=(null!==(c=null==v?void 0:v.service_api_keys)&&void 0!==c?c:[]).find(e=>"service_role"===e.tags))||void 0===s?void 0:s.api_key)&&void 0!==d?d:"SUPABASE_CLIENT_SERVICE_KEY";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{selectedLanguage:p,apikey:h,endpoint:x,snippet:f.init,children:(0,n.jsxs)("div",{className:"px-4 space-y-6",children:[(0,n.jsxs)("div",{className:"flex space-x-4 mt-8",children:[(0,n.jsx)("p",{className:"text-sm w-40",children:"Project URL"}),(0,n.jsx)(k.Z,{disabled:!0,readOnly:!0,copy:!0,size:"small",value:x,className:"w-full"})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("p",{className:"text-sm w-40",children:"Client API key"}),(0,n.jsx)(k.Z,{disabled:!0,readOnly:!0,size:"small",value:u?h:"Reveal API keys via dropdown in the header",className:"w-full",descriptionText:"This key is safe to use in a browser if you have enabled Row Level Security (RLS) for your tables and configured policies.",actions:[(0,n.jsx)(o.z,{type:"default",icon:(0,n.jsx)(C.Z,{}),onClick:()=>{b("anon"),(0,S.vQ)(null!=y?y:"SUPABASE_CLIENT_ANON_KEY")},children:"anon"===j?"Copied":"Copy"},"copy")]})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("p",{className:"text-sm w-40 mb-16",children:"Service key"}),(0,n.jsx)(k.Z,{disabled:!0,readOnly:!0,size:"small",value:u?null!=w?w:"SUPABASE_CLIENT_SERVICE_KEY":"Reveal API keys via dropdown in the header",className:"w-full",descriptionText:(0,n.jsxs)("p",{children:["This key has the ability to bypass Row Level Security."," ",(0,n.jsx)("span",{className:"text-amber-900",children:"Never share it publicly."})]}),actions:[(0,n.jsx)(o.z,{type:"default",icon:(0,n.jsx)(C.Z,{}),onClick:()=>{b("service"),(0,S.vQ)(w)},children:"service"===j?"Copied":"Copy"},"copy")]})]})]})}),(0,n.jsx)(m,{selectedLanguage:p,apikey:h,endpoint:x,snippet:f.clientApiKeys}),(0,n.jsx)(m,{selectedLanguage:p,apikey:u?w:"SUPABASE_CLIENT_SERVICE_KEY",endpoint:x,snippet:f.serviceApiKeys})]})},z=e=>{let{language:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{selectedLanguage:t,snippet:f.realtime}),(0,n.jsx)(m,{selectedLanguage:t,snippet:f.subscribeChannel}),(0,n.jsx)(m,{selectedLanguage:t,snippet:f.unsubscribeChannel}),(0,n.jsx)(m,{selectedLanguage:t,snippet:f.unsubscribeChannels}),(0,n.jsx)(m,{selectedLanguage:t,snippet:f.retrieveAllChannels})]})},A=e=>{let{language:t}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m,{selectedLanguage:t,snippet:f.storage})})},L=e=>{let{language:t}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m,{selectedLanguage:t,snippet:f.storedProceduresIntroduction})})},E=e=>{let{language:t,apikey:s,endpoint:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{selectedLanguage:t,snippet:f.userManagement}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.signUp}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.emailLogin}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.magicLinkLogin}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.phoneLogin}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.smsLogin}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.smsVerify}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.oauthLogin}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.user}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.forgotPassWordEmail}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.updateUser}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.logout}),(0,n.jsx)(m,{selectedLanguage:t,apikey:s,endpoint:a,snippet:f.emailInvite})]})},R=s(33971),U=s(64245),P=e=>{let{selectedLanguage:t,snippet:s,codeSnippets:r}=e,{ref:i}=(0,a.UO)();return(0,n.jsxs)("div",{id:s.key,className:"space-y-4 py-6",children:[(0,n.jsxs)("div",{className:"px-4 space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"doc-heading",children:s.title}),void 0!==s.docsUrl&&(0,n.jsx)(j.G,{abbrev:!1,href:s.docsUrl})]}),void 0!==s.description&&(0,n.jsx)("div",{className:"doc-section",children:(0,n.jsx)("article",{className:"text text-sm text-foreground-light",children:(0,n.jsx)(p.U,{className:"max-w-none",content:s.description.replaceAll("[ref]",null!=i?i:"_")})})})]}),r.map(e=>(0,n.jsxs)("div",{className:"px-4 space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:e.title}),(0,n.jsx)("div",{className:"codeblock-container",children:(0,n.jsx)("div",{className:"bg rounded p-2",children:(0,n.jsx)(u.c,{className:t,children:e[t]})})})]},e.key))]})},Z=e=>{let{language:t,apikey:s,endpoint:r}=e,{ref:i}=(0,a.UO)(),o=(0,d.WZ)(),{data:l}=(0,U.K)({projectRef:i}),c=o.activeDocsSection[1],u=(null!=l?l:[]).find(e=>e.name===c),p=null==u?void 0:u.allowed_mime_types,m=null==u?void 0:u.file_size_limit;return void 0===u?null:(0,n.jsxs)("div",{className:"divide-y",children:[(0,n.jsxs)("div",{className:"space-y-1 px-4 py-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("h2",{className:"text-xl",children:u.name}),(0,n.jsx)(R.C,{variant:u.public?"warning":"default",children:u.public?"Public":"Private"})]}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Allowed MIME types:"," ",null===p?"All types are allowed":0===(null!=p?p:[]).length?"No types are allowed":(null!=p?p:[]).length>1?(null!=p?p:[]).join(", "):"Unknown"]}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Max file size limit:"," ",null===m?"No limit":"".concat((0,S.td)(m))]})]}),(0,n.jsx)(P,{selectedLanguage:t,snippet:x.uploadFile,codeSnippets:x.uploadFile.code({name:c,apikey:s,endpoint:r})}),(0,n.jsx)(P,{selectedLanguage:t,snippet:x.deleteFiles,codeSnippets:x.deleteFiles.code({name:c,apikey:s,endpoint:r})}),(0,n.jsx)(P,{selectedLanguage:t,snippet:x.listFiles,codeSnippets:x.listFiles.code({name:c,apikey:s,endpoint:r})}),(0,n.jsx)(P,{selectedLanguage:t,snippet:x.downloadFile,codeSnippets:x.downloadFile.code({name:c,apikey:s,endpoint:r})}),u.public?(0,n.jsx)(P,{selectedLanguage:t,snippet:x.retrievePublicURL,codeSnippets:x.retrievePublicURL.code({name:c,apikey:s,endpoint:r})}):(0,n.jsx)(P,{selectedLanguage:t,snippet:x.createSignedURL,codeSnippets:x.createSignedURL.code({name:c,apikey:s,endpoint:r})})]})},I=s(51326),T=e=>{let{language:t,apikey:s="API_KEY",endpoint:r}=e,{ref:i}=(0,a.UO)(),o=(0,d.WZ)(),{data:l}=(0,I.I)({projectRef:i}),c=o.activeDocsSection[1],u=(null!=l?l:[]).find(e=>e.name===c);return void 0===u?null:(0,n.jsxs)("div",{className:"divide-y",children:[(0,n.jsx)("div",{className:"space-y-1 px-4 py-4",children:(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("h2",{className:"text-xl",children:u.name})})}),(0,n.jsx)(P,{selectedLanguage:t,snippet:x.invokeEdgeFunction,codeSnippets:x.invokeEdgeFunction.code({name:c,endpoint:"".concat(r),apikey:s})})]})},F=s(2052),O=s(71211);let D=e=>{{let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}},q=e=>{let t=e.lastIndexOf("Note:\nThis is a Primary Key.<pk/>"),s=e.lastIndexOf("Note:\nThis is a Foreign Key to"),n=e;return t>=0&&(n=n.substring(0,t)),s>=0&&(n=n.substring(0,s)),n};var W=s(56535),V=s(25289),H=s(15647),M=s(12753),B=s(22921),Y=e=>{let{simplifiedVersion:t=!1}=e,s=(0,d.WZ)(),[a,i]=(0,r.useState)(!1),l=e=>{s.setDocsLanguage(e),i(!1)};return(0,n.jsx)("div",{className:"flex items-center gap-x-2",children:(0,n.jsxs)(M.J2,{modal:!1,open:a,onOpenChange:i,children:[(0,n.jsx)(M.xo,{asChild:!0,children:(0,n.jsx)(o.z,{type:"default",className:t?"px-1":"",icon:t?"js"===s.docsLanguage?(0,n.jsx)("img",{src:"".concat(W.GW,"/img/libraries/javascript-icon.svg"),alt:"javascript logo",width:"14"}):(0,n.jsx)(V.Z,{size:14,strokeWidth:2.5}):void 0,iconRight:!t&&(0,n.jsx)(H.Z,{size:14,strokeWidth:2}),children:t?void 0:"Language: ".concat("js"===s.docsLanguage?"Javascript":"Bash")})}),(0,n.jsx)(M.yk,{className:"p-0 w-24",side:"bottom",align:"end",children:(0,n.jsx)(B.mY,{children:(0,n.jsx)(B.e8,{children:(0,n.jsxs)(B.fu,{children:[(0,n.jsx)(B.di,{className:"cursor-pointer",onSelect:()=>l("js"),onClick:()=>l("js"),children:(0,n.jsx)("p",{children:"Javascript"})}),(0,n.jsx)(B.di,{className:"cursor-pointer",onSelect:()=>l("bash"),onClick:()=>l("bash"),children:(0,n.jsx)("p",{children:"Bash"})})]})})})})]})})},K=e=>{var t,s;let{language:i,apikey:o="",endpoint:l=""}=e,{ref:c}=(0,a.UO)(),u=(0,d.WZ)().activeDocsSection[1],{data:p,refetch:m}=(0,O.a)({projectRef:c}),h=null==p?void 0:null===(t=p.definitions)||void 0===t?void 0:t[u],f=void 0!==h?Object.entries(h.properties).map(e=>{var t;let[s,n]=e;return{...n,id:s,required:(null!==(t=null==h?void 0:h.required)&&void 0!==t?t:[]).includes(s)}}):[];return((0,r.useEffect)(()=>{void 0!==u&&m()},[u]),void 0===u)?null:(0,n.jsxs)("div",{className:"divide-y relative",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sticky top-0 bg-surface-100 z-10 border-b shadow-md",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)("h2",{className:"text-xl",children:u}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:null!==(s=null==h?void 0:h.description)&&void 0!==s?s:"No description available"})]}),(0,n.jsx)(Y,{})]}),(0,n.jsxs)("div",{className:"space-y-2 px-4 py-4 !border-t-0",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Columns"}),(0,n.jsx)(F.Z,{head:[(0,n.jsx)(F.Z.th,{children:"Name"},"name"),(0,n.jsx)(F.Z.th,{children:"Format"},"format"),(0,n.jsx)(F.Z.th,{children:"Type"},"type"),(0,n.jsx)(F.Z.th,{children:"Description"},"description")],body:f.map(e=>{var t;let s=function(e,t){if(void 0===e&&("jsonb"===t||"json"===t))return"json";switch(e){case"string":return"string";case"integer":case"number":return"number";case"json":return"json";case"boolean":return"boolean";default:return e}}(e.type,e.format);return(0,n.jsxs)(F.Z.tr,{children:[(0,n.jsx)(F.Z.td,{title:e.id,children:e.id}),(0,n.jsx)(F.Z.td,{title:e.format,children:(0,n.jsx)("p",{className:"truncate",children:e.format})}),(0,n.jsx)(F.Z.td,{title:s,children:s}),(0,n.jsx)(F.Z.td,{title:e.description,children:q(null!==(t=e.description)&&void 0!==t?t:"").trim()})]},e.id)})})]}),(0,n.jsx)(P,{selectedLanguage:i,snippet:x.readRows,codeSnippets:x.readRows.code({resourceId:u,endpoint:l,apikey:o})}),(0,n.jsx)(P,{selectedLanguage:i,snippet:x.filtering,codeSnippets:x.filtering.code({resourceId:u,endpoint:l,apikey:o})}),(0,n.jsx)(P,{selectedLanguage:i,snippet:x.insertRows,codeSnippets:x.insertRows.code({resourceId:u,endpoint:l,apikey:o})}),(0,n.jsx)(P,{selectedLanguage:i,snippet:x.updateRows,codeSnippets:x.updateRows.code({resourceId:u,endpoint:l,apikey:o})}),(0,n.jsx)(P,{selectedLanguage:i,snippet:x.deleteRows,codeSnippets:x.deleteRows.code({resourceId:u,endpoint:l,apikey:o})}),(0,n.jsx)(P,{selectedLanguage:i,snippet:x.subscribeChanges,codeSnippets:x.subscribeChanges.code({resourceId:u})})]})},G=s(36861);let Q=e=>{var t,s;let{language:i}=e,{ref:o}=(0,a.UO)(),l=(0,d.WZ)(),{data:c,refetch:u}=(0,O.a)({projectRef:o}),{data:p,refetch:m}=(0,G.H)({projectRef:o}),h=null!==(s=null==p?void 0:p.functions)&&void 0!==s?s:[],f=l.activeDocsSection[1],g=h.find(e=>e.name===f),{post:{parameters:v}}=null!=g?g:{},j=null==c?void 0:c.paths[null==g?void 0:g.path],b=null==j?void 0:null===(t=j.post)||void 0===t?void 0:t.summary,y=Object.entries(v&&v[0]&&v[0].schema&&v[0].schema.properties?v[0].schema.properties:{}).map(e=>{let[t,s]=e;return{name:t,...s,required:v[0].schema.required.includes(t)}}).filter(e=>!!e.name);return((0,r.useEffect)(()=>{void 0!==f&&(u(),m())},[f]),void 0===g)?null:(0,n.jsxs)("div",{className:"divide-y",children:[(0,n.jsxs)("div",{className:"space-y-1 px-4 py-4",children:[(0,n.jsx)("h2",{className:"text-xl",children:g.name}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:null!=b?b:"No description available"})]}),(0,n.jsxs)("div",{className:"space-y-2 px-4 py-4",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Function arguments"}),(0,n.jsx)(F.Z,{head:[(0,n.jsx)(F.Z.th,{children:"Name"},"name"),(0,n.jsx)(F.Z.th,{children:"Format"},"format"),(0,n.jsx)(F.Z.th,{children:"Type"},"type"),(0,n.jsx)(F.Z.th,{},"required")],body:y.map(e=>(0,n.jsxs)(F.Z.tr,{children:[(0,n.jsx)(F.Z.td,{title:e.name,children:(0,n.jsx)("p",{className:"font-mono text-xs text-foreground truncate",children:e.name})}),(0,n.jsx)(F.Z.td,{title:e.format,children:e.format}),(0,n.jsx)(F.Z.td,{title:e.type,children:e.type}),(0,n.jsx)(F.Z.td,{children:e.required?(0,n.jsx)(R.C,{variant:"warning",children:"Required"}):(0,n.jsx)(R.C,{variant:"default",children:"Optional"})})]},e.name))})]}),(0,n.jsx)(P,{selectedLanguage:i,snippet:x.rpcSingle,codeSnippets:x.rpcSingle.code({rpcName:f,rpcParams:y,endpoint:"endpoint",apiKey:"apiKey",showBearer:!0})})]})};var J=s(83145),X=s.n(J),$=s(50588),ee=s(20424),et=s(44607),es=s(29427);let en=()=>(0,n.jsx)("div",{className:"border-t !mt-3 pb-1 mx-3"});var ea=()=>{var e,t;let{ref:s}=(0,a.UO)(),i=(0,d.WZ)(),{projectAuthAll:l,projectStorageAll:c,projectEdgeFunctionAll:u,realtimeAll:p}=(0,ee.N)(["project_auth:all","project_storage:all","project_edge_function:all","realtime:all"]),m=h.filter(e=>"user-management"===e.key?l:"storage"===e.key?c:"edge-functions"===e.key?u:"realtime"!==e.key||p),{data:x}=(0,G.H)({projectRef:s}),g=null!==(e=null==x?void 0:x.tables)&&void 0!==e?e:[],v=null!==(t=null==x?void 0:x.functions)&&void 0!==t?t:[],{data:j}=(0,U.K)({projectRef:s}),{data:b}=(0,I.I)({projectRef:s});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"px-2 py-4  border-b",children:m.map(e=>{let t=i.activeDocsSection[0]===e.key,s=Object.values(f).filter(t=>t.category===e.key);return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("div",{className:"cursor-pointer text-sm py-2 px-3 rounded-md transition ".concat(t?"bg-surface-300":""),onClick:()=>i.setActiveDocsSection([e.key]),children:e.name}),t&&s.length>0&&(0,n.jsxs)("div",{className:"space-y-2 py-2",children:[s.map(t=>(0,n.jsx)("p",{title:t.title,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>{i.setActiveDocsSection([e.key]),D(t.key)},children:t.title},t.key)),"entities"===e.key&&(0,n.jsxs)(n.Fragment,{children:[g.length>0&&(0,n.jsx)(en,{}),g.map(t=>(0,n.jsx)("p",{title:t.name,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>i.setActiveDocsSection([e.key,t.name]),children:t.name},t.name))]}),"stored-procedures"===e.key&&(0,n.jsxs)(n.Fragment,{children:[v.length>0&&(0,n.jsx)(en,{}),v.map(t=>(0,n.jsx)("p",{title:t.name,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>i.setActiveDocsSection([e.key,t.name]),children:t.name},t.name))]}),"storage"===e.key&&(0,n.jsxs)(n.Fragment,{children:[(null!=j?j:[]).length>0&&(0,n.jsx)(en,{}),(null!=j?j:[]).map(t=>(0,n.jsx)("p",{title:t.name,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>i.setActiveDocsSection([e.key,t.name]),children:t.name},t.name))]}),"edge-functions"===e.key&&(0,n.jsxs)(n.Fragment,{children:[(null!=b?b:[]).length>0&&(0,n.jsx)(en,{}),(null!=b?b:[]).map(t=>(0,n.jsx)("p",{title:t.name,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>i.setActiveDocsSection([e.key,t.name]),children:t.name},t.name))]})]})]},e.key)})}),(0,n.jsxs)("div",{className:"px-2 py-4 border-b",children:[(0,n.jsx)(o.z,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,n.jsx)($.Z,{src:"".concat(W.GW,"/img/graphql.svg"),style:{width:"".concat(16,"px"),height:"".concat(16,"px")},className:"text-foreground",preProcessor:e=>e.replace(/svg/,'svg class="m-auto text-color-inherit"')}),onClick:()=>i.setShowProjectApiDocs(!1),children:(0,n.jsx)(X(),{className:"!justify-start",href:"/project/".concat(s,"/api/graphiql"),children:"GraphiQL"})}),(0,n.jsx)(o.z,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,n.jsx)(et.Z,{}),children:(0,n.jsx)(X(),{href:"https://supabase.com/docs/guides/graphql",target:"_blank",rel:"noreferrer",className:"!justify-start",children:"GraphQL guide"})})]}),(0,n.jsxs)("div",{className:"px-2 py-4",children:[(0,n.jsx)(o.z,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,n.jsx)(es.Z,{}),children:(0,n.jsx)(X(),{href:"https://supabase.com/docs",target:"_blank",rel:"noreferrer",className:"!justify-start",children:"Documentation"})}),(0,n.jsx)(o.z,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,n.jsx)(et.Z,{}),children:(0,n.jsx)(X(),{href:"https://supabase.com/docs/guides/api",target:"_blank",rel:"noreferrer",className:"!justify-start",children:"REST guide"})})]})]})},er=s(19405),ei=s(63640),eo=s(38498),el=s(64714),ec=()=>{var e,t;let{ref:s}=(0,a.UO)(),i=(0,d.WZ)(),[l,c]=(0,r.useState)(!1),u=(0,ei.cg)(),{data:p}=(0,G.H)({projectRef:s}),m=null!==(e=null==p?void 0:p.tables)&&void 0!==e?e:[],h=null!==(t=null==p?void 0:p.functions)&&void 0!==t?t:[],[f,g]=i.activeDocsSection,{data:v}=(0,U.K)({projectRef:s}),{data:b}=(0,I.I)({projectRef:s}),y=(null!=v?v:[]).find(e=>e.name===g),w={entities:{title:"Tables & Views",options:m,docsUrl:"https://supabase.com/docs/reference/javascript/select"},"stored-procedures":{title:"Stored Procedures",options:h,docsUrl:"https://supabase.com/docs/reference/javascript/rpc"},storage:{title:"Storage",options:null!=v?v:[],docsUrl:"https://supabase.com/docs/reference/javascript/storage-createbucket"},"edge-functions":{title:"Edge Functions",options:null!=b?b:[],docsUrl:"https://supabase.com/docs/reference/javascript/functions-invoke"}},N=e=>{i.setActiveDocsSection([i.activeDocsSection[0],e]),c(!1)},k=Object.values(x).filter(e=>e.category===i.activeDocsSection[0]);return(0,n.jsxs)("div",{className:"py-4",children:[(0,n.jsxs)("div",{className:"px-4 flex items-center space-x-2 mb-2",children:[u&&(0,n.jsx)(o.z,{type:"text",icon:(0,n.jsx)(eo.Z,{}),className:"px-1",onClick:()=>i.setActiveDocsSection([i.activeDocsSection[0]])}),(0,n.jsx)("p",{className:"text-sm text-foreground-light capitalize",children:w[f].title})]}),(0,n.jsxs)(M.J2,{open:l,onOpenChange:c,modal:!1,children:[(0,n.jsx)(M.xo,{asChild:!0,children:(0,n.jsx)("div",{className:"px-4",children:(0,n.jsx)(o.z,{block:!0,type:"default",size:"small",className:"[&>span]:w-full",children:(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsx)("p",{children:i.activeDocsSection[1]}),(0,n.jsx)("div",{children:(0,n.jsx)(el.Z,{className:"rotate-90",strokeWidth:1.5,size:12})})]})})})})}),(0,n.jsx)(M.yk,{className:"p-0 w-60",side:"bottom",align:"center",children:(0,n.jsx)(B.mY,{children:(0,n.jsx)(B.e8,{children:(0,n.jsx)(B.fu,{children:w[f].options.map(e=>(0,n.jsx)(B.di,{className:"cursor-pointer",onSelect:()=>N(e.name),onClick:()=>N(e.name),children:(0,n.jsx)("p",{children:e.name})},e.name))})})})})]}),(0,n.jsx)("div",{className:"px-2 py-4 space-y-2",children:k.map(e=>"storage"===f&&void 0!==y&&(!y.public&&"retrieve-public-url"===e.key||y.public&&"create-signed-url"===e.key)?null:(0,n.jsx)("p",{title:e.title,className:"text-sm text-foreground-light px-4 hover:text-foreground transition cursor-pointer",onClick:()=>D(e.key),children:e.title},e.key))}),(0,n.jsx)("div",{className:"px-4 py-4 border-t space-y-2",children:(0,n.jsxs)(er.bZ,{className:"p-3",children:[(0,n.jsx)(er.Cd,{children:(0,n.jsx)("p",{className:"text-xs",children:"Unable to find what you're looking for?"})}),(0,n.jsxs)(er.X,{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-xs !leading-normal",children:"The API methods shown here are only the commonly used ones to get you started building quickly."}),(0,n.jsx)("p",{className:"text-xs !leading-normal",children:"Head over to our docs site for the full API documentation."}),(0,n.jsx)(j.G,{className:"!mt-2",href:w[f].docsUrl})]})]})})]})},ed=()=>{var e,t,s,u,p,m;let{ref:h}=(0,a.UO)(),f=(0,d.WZ)(),x=2===f.activeDocsSection.length&&"entities"===f.activeDocsSection[0],[v,j]=(0,r.useState)(!1),b=f.docsLanguage,{data:y}=(0,l.zR)({projectRef:h}),{data:w}=(0,c.z)({projectRef:h}),{anonKey:k}=(0,l.Pb)(y),S=v&&null!==(p=null==k?void 0:k.api_key)&&void 0!==p?p:"SUPABASE_CLIENT_ANON_KEY",C=null!==(m=null==y?void 0:null===(e=y.app_config)||void 0===e?void 0:e.protocol)&&void 0!==m?m:"https",R=null==y?void 0:null===(t=y.app_config)||void 0===t?void 0:t.endpoint,U=(null==w?void 0:null===(s=w.customDomain)||void 0===s?void 0:s.status)==="active"?"https://".concat(null===(u=w.customDomain)||void 0===u?void 0:u.hostname):"".concat(C,"://").concat(null!=R?R:"");return(0,n.jsx)(i.ZP,{hideFooter:!0,size:"xxlarge",className:"max-w-5xl",visible:f.showProjectApiDocs,onCancel:()=>f.setShowProjectApiDocs(!1),children:(0,n.jsxs)("div",{className:"flex items-start h-full",children:[(0,n.jsxs)("div",{className:"w-72 border-r h-full",children:[(0,n.jsxs)("div",{className:"border-b px-4 py-2 flex items-center justify-between",children:[(0,n.jsx)("h4",{children:"API Docs"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[!x&&(0,n.jsx)(Y,{simplifiedVersion:!0}),(0,n.jsx)(o.z,{type:"default",onClick:()=>j(!v),children:v?"Hide keys":"Show keys"})]})]}),1===f.activeDocsSection.length?(0,n.jsx)(ea,{}):(0,n.jsx)(ec,{})]}),(0,n.jsxs)("div",{className:"flex-1 divide-y space-y-4 max-h-screen overflow-auto",children:["introduction"===f.activeDocsSection[0]&&(0,n.jsx)(_,{showKeys:v,language:b,apikey:S,endpoint:U}),"user-management"===f.activeDocsSection[0]&&(0,n.jsx)(E,{language:b,apikey:S,endpoint:U}),"realtime"===f.activeDocsSection[0]&&(0,n.jsx)(z,{language:b}),"storage"===f.activeDocsSection[0]&&(0,n.jsx)(n.Fragment,{children:void 0!==f.activeDocsSection[1]?(0,n.jsx)(Z,{language:b,apikey:S,endpoint:U}):(0,n.jsx)(A,{language:b})}),"edge-functions"===f.activeDocsSection[0]&&(0,n.jsx)(n.Fragment,{children:void 0!==f.activeDocsSection[1]?(0,n.jsx)(T,{language:b,apikey:S,endpoint:U}):(0,n.jsx)(g,{language:b})}),"entities"===f.activeDocsSection[0]&&(0,n.jsx)(n.Fragment,{children:void 0!==f.activeDocsSection[1]?(0,n.jsx)(K,{language:b,apikey:S,endpoint:U}):(0,n.jsx)(N,{language:b})}),"stored-procedures"===f.activeDocsSection[0]&&(0,n.jsx)(n.Fragment,{children:void 0!==f.activeDocsSection[1]?(0,n.jsx)(Q,{language:b}):(0,n.jsx)(L,{language:b})})]})]})})},eu=s(43633),ep=s(40540),em=s(42019),eh=s(16402),ef=s(59171),ex=s(77875),eg=s.n(ex),ev=s(21116),ej=s(11321),eb=s(28346),ey=s(29360),ew=s(32691),eN=s(39978),ek=s(16303),eS=s(95084),eC=s(72709),e_=s(28894),ez=s(129),eA=s(92753);let eL=()=>["api-key"];async function eE(e){let t;let s=await (0,ez.oT)(),n=await fetch("".concat(W.GW,"/api/ai/sql/check-api-key"),{headers:s,signal:e});try{t=await n.json()}catch(e){}if(!n.ok)throw new eA.V(null==t?void 0:t.message,n.status);return t}let eR=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,e_.a)(eL(),e=>{let{signal:t}=e;return eE(t)},{enabled:!W.Qy&&e,...t})};var eU=s(31853),eP=s(5359),eZ=s(21925),eI=s(59884),eT=s(94281),eF=s(91955),eO=s(9881),eD=s(289),eq=s(30114),eW=s(65496),eV=s(22332),eH=s(8294),eM=s(50322),eB=s(27429),eY=s(28179),eK=s(85847),eG=s(92271);let eQ=r.forwardRef((e,t)=>{let{loading:s=!1,disabled:i=!1,value:o="",textAreaRef:l,commandsOpen:c=!1,icon:d=null,onValueChange:u,setCommandsOpen:p,onSubmit:m,placeholder:h,...f}=e,x=(0,r.useRef)(null),g=(0,r.useRef)(null),v=(0,a.Gc)("md");return(0,n.jsxs)("form",{id:"assistant-chat",ref:x,...f,onSubmit:m,className:(0,eu.cn)("relative",f.className),children:[d&&(0,n.jsx)("div",{className:(0,eu.cn)("absolute","top-2 left-2","ml-1 w-6 h-6 rounded-full bg-dbnew"),children:d}),(0,n.jsx)(eG.D,{ref:l,autoFocus:v,disabled:i,className:(0,eu.cn)(d?"pl-12":"","text-sm pr-10 rounded-[18px]"),placeholder:h,spellCheck:!1,value:o,onChange:e=>u(e),onKeyDown:e=>{"Enter"!==e.key||13!==e.keyCode||e.shiftKey||c||(e.preventDefault(),g.current&&g.current.click()),"Enter"===e.key&&c&&p&&p(!1)}}),(0,n.jsxs)("div",{className:"absolute right-1.5 top-1.5 flex gap-3 items-center",children:[s&&(0,n.jsx)(eK.Z,{size:22,className:"animate-spin w-7 h-7 text-muted",strokeWidth:1}),(0,n.jsx)("button",{ref:g,type:"submit",className:(0,eu.cn)("transition-all","flex items-center justify-center w-7 h-7 border border-control rounded-full mr-0.5 p-1.5 background-alternative",o?"text-default opacity-100":"text-muted opacity-50",s&&"hidden"),children:(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 3V2.25H15V3V10C15 10.5523 14.5522 11 14 11H3.56062L5.53029 12.9697L6.06062 13.5L4.99996 14.5607L4.46963 14.0303L1.39641 10.9571C1.00588 10.5666 1.00588 9.93342 1.39641 9.54289L4.46963 6.46967L4.99996 5.93934L6.06062 7L5.53029 7.53033L3.56062 9.5H13.5V3Z",fill:"currentColor"})})})]})]})});eQ.displayName="AssistantChatFormComponent";let eJ=(0,r.memo)(eQ);var eX=s(15518),e$=e=>{let{rows:t,columns:s,count:a}=e,r={hidden:{opacity:0},visible:{opacity:[1,.5,1],transition:{repeat:1/0,duration:.5,repeatDelay:1.5,ease:"easeInOut"}}};return(0,n.jsx)("div",{className:"relative w-full h-full",style:{maskImage:"linear-gradient(to bottom, black, transparent)",WebkitMaskImage:"linear-gradient(to bottom, black, transparent)"},children:(0,n.jsx)(eh.E.div,{className:"grid w-full h-full justify-between items-space-between items-start",style:{gridTemplateColumns:"repeat(".concat(s,", 1px)"),gridTemplateRows:"repeat(".concat(t,", 1fr)"),rowGap:"auto"},variants:{hidden:{opacity:1},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.05}}},initial:"hidden",animate:"visible","aria-label":"Grid of ".concat(t*s," dots, ").concat(a," highlighted"),children:Array.from({length:t*s}).map((e,t)=>(0,n.jsx)(eh.E.div,{variants:r,className:"w-[1px] h-[1px] rounded-full bg-foreground"},t))})})},e0=s(90667),e1=s(51700),e4=s(5817);function e3(e){let{setMessages:t,onSendMessage:s}=e,a=e=>{s(e)};return(0,n.jsx)("div",{className:"w-full p-5 flex flex-col grow shrink-0 justify-end overflow-auto",children:(0,n.jsxs)("div",{className:"shrink-0",children:[(0,n.jsxs)(eh.E.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},transition:{delay:0},children:[(0,n.jsx)("p",{className:"text-base mb-2",children:"How can I assist you?"}),(0,n.jsx)("p",{className:"text-sm text-foreground-lighter mb-4",children:"I can help you build and manage your database by writing SQL or supabase-js, set up policies, functions or triggers, and query your data - ask me anything."})]}),(0,n.jsxs)(eh.E.div,{children:[(0,n.jsx)(eh.E.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},transition:{delay:0},children:(0,n.jsxs)(e4.GZ,{className:"border-b border-muted py-3",children:[(0,n.jsx)(e4.Qn,{className:"px-0 -mx-3",title:"Tables"}),(0,n.jsx)(e4.rt,{children:(0,n.jsxs)("div",{className:"mt-3 mb-1 space-y-1",children:[(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(e0.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("Create a table of countries and a table of cities. The cities table should have a country column that's a foreign key to the countries table."),children:"Create a new table"}),(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(eb.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("Give me a list of new users from the auth.users table who signed up in the past week"),children:"Query your data"}),(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(e1.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("Give me a chart showing the number of new sign ups in the auth.users table per day over the last week"),children:"Chart your data"})]})})]})}),(0,n.jsx)(eh.E.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},children:(0,n.jsxs)(e4.GZ,{className:"border-b border-muted py-3",children:[(0,n.jsx)(e4.Qn,{className:"px-0 -mx-3",title:"RLS Policies"}),(0,n.jsx)(e4.rt,{children:(0,n.jsxs)("div",{className:"mt-3 mb-1 space-y-1",children:[(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(e0.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("Suggest some database RLS policies I can add to my public schema"),children:"Suggest RLS policies"}),(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(eb.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("Generate some examples of database RLS policies"),children:"Examples of RLS policies"}),(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(e1.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("What are database RLS policies"),children:"What are RLS policies?"})]})})]})}),(0,n.jsx)(eh.E.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:(0,n.jsxs)(e4.GZ,{className:"border-b border-muted py-3",children:[(0,n.jsx)(e4.Qn,{className:"px-0 -mx-3",title:"Functions"}),(0,n.jsx)(e4.rt,{children:(0,n.jsxs)("div",{className:"mt-3 mb-1 space-y-1",children:[(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(e0.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("Suggest some database functions I can add to my public schema"),children:"Suggest database functions"}),(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(eb.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("Generate some examples of database functions"),children:"Examples of database functions"}),(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(e1.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("What are database functions"),children:"What are database functions?"})]})})]})}),(0,n.jsx)(eh.E.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:(0,n.jsxs)(e4.GZ,{className:"py-3",children:[(0,n.jsx)(e4.Qn,{className:"px-0 -mx-3",title:"Triggers"}),(0,n.jsx)(e4.rt,{children:(0,n.jsxs)("div",{className:"mt-3 mb-1 space-y-1",children:[(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(e0.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("Suggest some database triggers I can add to my public schema"),children:"Suggest database Triggers"}),(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(eb.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("Generate some examples of database triggers"),children:"Examples of database triggers"}),(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(e1.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>a("What are database triggers"),children:"What are database triggers?"})]})})]})})]})]})})}var e2=s(9090),e5=s(7879),e6=e=>{let{onRemove:t,...s}=e,[a,i]=(0,r.useState)(!1),l=s.value||s.children,c=a?l:(null==l?void 0:l.substring(0,l.indexOf("\n")))||l;return(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("div",{className:(0,eu.cn)("flex items-center gap-1 p-1 bg-surface-100 border border-default w-full overflow-hidden","rounded-md"),children:[(0,n.jsx)(o.z,{type:"text",size:"tiny",className:"w-6 h-6",onClick:()=>i(!a),icon:a?(0,n.jsx)(e2.Z,{size:14}):(0,n.jsx)(H.Z,{size:14})}),(0,n.jsx)("div",{className:"flex-1 shrink-1 overflow-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:(0,n.jsx)(e5.d,{...s,value:c,hideCopy:!0,className:(0,eu.cn)("block !bg-transparent max-h-32 max-w-full !py-0 !px-0 !border-t-0 prose dark:prose-dark border-0 text-foreground !rounded-none w-full text-wrap whitespace-pre-wrap","[&>code]:m-0 [&>code>span]:flex border-t-0 [&>code>span]:flex-wrap [&>code]:block [&>code>span]:text-foreground text-wrap whitespace-pre-wrap",s.className)})}),t&&(0,n.jsx)(o.z,{type:"text",size:"tiny",className:"shrink-0 w-6 h-6",onClick:t,icon:(0,n.jsx)(ej.Z,{size:14})})]})})},e8=s(86392),e9=s(87831),e7=s(4938),te=s(92860),tt=s(3696),ts=s(27610);function tn(e){let{value:t,delay:s=500,fallback:a=(0,n.jsx)("div",{className:"text-sm",children:"Loading..."}),children:i}=e,[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(),d=(0,r.useRef)(t),u=(0,r.useRef)(!0);return(0,r.useEffect)(()=>((u.current||d.current!==t)&&(l(!1),d.current=t,c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{l(!0),u.current=!1},s)),()=>{c.current&&clearTimeout(c.current)}),[t,s]),o?i:a}var ta=s(19013),tr=s(90940),ti=s(56447),to=s(12425),tl=s(31527);let tc=e=>{var t;let{label:s,code:i,functionName:c,actions:d,showCode:u=!1,tooltip:p}=e,{ref:m}=(0,a.UO)(),[h,f]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),{data:j}=(0,l.zR)({projectRef:m}),{data:b}=(0,tl.J)({projectRef:m,slug:c}),{mutateAsync:y,isLoading:w}=(0,ti.t)({onSuccess:()=>{f(!0),v.Am.success("Successfully deployed edge function")}}),N=async()=>{if(i&&!w&&m){if(b)return g(!0);try{await y({projectRef:m,metadata:{entrypoint_path:"index.ts",name:c,verify_jwt:!0},files:[{name:"index.ts",content:i}]})}catch(e){v.Am.error("Failed to deploy function: ".concat(e instanceof Error?e.message:"Unknown error"))}}},k="Function URL not available",S=null==j?void 0:null===(t=j.app_config)||void 0===t?void 0:t.endpoint;if(S){let e="https://".concat(S),t=e?new URL(e).hostname.split(".").pop():"co";k=m&&c&&t?"https://".concat(m,".supabase.").concat(t,"/functions/v1/").concat(c):"Function URL will be available after deployment"}return(0,n.jsxs)(to.b,{tooltip:p,icon:(0,n.jsx)(el.Z,{size:16,strokeWidth:1.5,className:"text-foreground-muted"}),label:s,actions:m&&c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.z,{type:"outline",size:"tiny",loading:w,disabled:!m,onClick:N,children:w?"Deploying...":"Deploy"}),d]}):null,children:[x&&m&&c&&(0,n.jsxs)(eB.J,{type:"warning",className:"mb-0 rounded-none border-0 border-b shrink-0 bg-background-100",children:[(0,n.jsxs)("p",{children:['An edge function with the name "',c,'" already exists.']}),(0,n.jsx)("p",{className:"text-foreground-light",children:"Deploying will replace the existing function. Are you sure you want to proceed?"}),(0,n.jsxs)("div",{className:"flex justify-stretch mt-2 gap-2",children:[(0,n.jsx)(o.z,{type:"outline",size:"tiny",className:"w-full flex-1",onClick:()=>g(!1),children:"Cancel"}),(0,n.jsx)(o.z,{type:"danger",size:"tiny",className:"w-full flex-1",onClick:async()=>{g(!1);try{await y({projectRef:m,metadata:{entrypoint_path:"index.ts",name:c,verify_jwt:!0},files:[{name:"index.ts",content:i}]})}catch(e){v.Am.error("Failed to deploy function: ".concat(e instanceof Error?e.message:"Unknown error"))}},children:"Replace function"})]})]}),(0,n.jsx)("div",{className:"shrink-0 w-full max-h-96 overflow-y-auto",children:(0,n.jsx)(e5.d,{hideLineNumbers:!0,wrapLines:!1,value:i,language:"typescript",className:(0,eu.cn)("max-w-none block !bg-transparent !py-3 !px-3.5 prose dark:prose-dark border-0 text-foreground !rounded-none w-full","[&>code]:m-0 [&>code>span]:text-foreground")})}),(w||h)&&(0,n.jsx)("div",{className:"p-4 w-full border-t bg-surface-75 text-xs",children:w?(0,n.jsx)("p",{className:"text-foreground-light",children:"Deploying function..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{className:"text-foreground-light mb-2",children:["The"," ",(0,n.jsx)(X(),{className:"text-foreground",href:"/project/".concat(m,"/functions/").concat(c,"/details"),children:"new function"})," ","is now live at:"]}),(0,n.jsx)(e5.d,{language:"bash",hideLineNumbers:!0,value:k,className:"text-xs p-2"}),(0,n.jsx)("p",{className:"text-foreground-light mt-4 mb-2",children:"To download and work on this function locally, use the CLI command:"}),(0,n.jsx)(e5.d,{hideLineNumbers:!0,language:"bash",value:"supabase functions download ".concat(c),className:"text-xs p-2"})]})})]})},td=(0,r.memo)(e=>{let{children:t}=e;return(0,n.jsx)("ol",{className:"flex flex-col gap-y-4",children:t})});td.displayName="OrderedList";let tu=(0,r.memo)(e=>{let{children:t}=e;return(0,n.jsx)("li",{className:"[&>pre]:mt-2",children:t})});tu.displayName="ListItem";let tp=(0,r.memo)(e=>{let{children:t}=e;return(0,n.jsx)("h3",{className:"underline",children:t})});tp.displayName="Heading3";let tm=(0,r.memo)(e=>{let{className:t,children:s}=e;return(0,n.jsx)("code",{className:(0,eu.cn)("text-xs",t),children:s})});tm.displayName="InlineCode";let th=(0,r.memo)(e=>{let{href:t,children:s}=e;return(0,n.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:t,className:"underline transition underline-offset-2 decoration-foreground-lighter hover:decoration-foreground text-foreground",children:s})});th.displayName="Link";let tf=(0,r.memo)(e=>{let{sql:t,title:s,xAxis:a,yAxis:r,isChart:i,isLoading:o,isDraggable:l,runQuery:c,onRunQuery:d,onDragStart:u,onUpdateChartConfig:p}=e;return(0,n.jsx)(tn,{delay:500,value:t,fallback:(0,n.jsx)("div",{className:"bg-surface-100 border-overlay rounded border shadow-sm px-3 py-2 text-xs",children:"Writing SQL..."}),children:(0,n.jsx)(ta.L,{lockColumns:!0,label:s,sql:t,chartConfig:{type:"bar",cumulative:!1,xKey:null!=a?a:"",yKey:null!=r?r:"",view:i?"chart":"table"},tooltip:l?(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(R.C,{variant:"success",className:"text-xs rounded px-1",children:"NEW"}),(0,n.jsx)("p",{children:"Drag to add this chart into your custom report"})]}):void 0,showSql:!i,isChart:i,isLoading:o,draggable:l,runQuery:c,onRunQuery:d,onDragStart:u,onUpdateChartConfig:p})})});tf.displayName="MemoizedQueryBlock";let tx=(0,r.createContext)({isLoading:!1}),tg={ol:td,li:tu,h3:tp,code:tm,a:th,pre:e=>{var t;let{children:s}=e,a=(0,ew.useRouter)(),{profile:i}=(0,ts.Un)(),{isLoading:o,readOnly:l}=(0,r.useContext)(tx),{mutate:c}=(0,eI.a)(),d=(0,eq.P)("reportsV2"),u=(0,eT.Xo)(ep.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==i?void 0:i.id},subject:{id:null==i?void 0:i.id}}),p=(0,r.useRef)({view:"table",type:"bar",xKey:"",yKey:"",cumulative:!1}),m=(null===(t=s[0].props.className)||void 0===t?void 0:t.replace("language-",""))||"sql",h=s[0].props.children[0],f=h.match(/(?:--|\/\/)\s*props:\s*(\{[^}]+\})/),x=(0,r.useMemo)(()=>f?JSON.parse(f[1]):{},[f]),{xAxis:g,yAxis:v}=x,j=x.title||("edge"===m?"Edge Function":"SQL Query"),b="true"===x.isChart,y="true"===x.runQuery,w=h.replace(/(?:--|\/\/)\s*props:\s*\{[^}]+\}/,"").trim(),N=d&&u&&a.pathname.endsWith("/reports/[id]");(0,r.useEffect)(()=>{p.current={...p.current,view:b?"chart":"table",xKey:null!=g?g:"",yKey:null!=v?v:""}},[x]);let k=async e=>{var t;c({action:"assistant_suggestion_run_query_clicked",properties:{queryType:e,..."mutation"===e?{category:null!==(t=(0,tr.Dk)(w))&&void 0!==t?t:"unknown"}:{}}})};return(0,n.jsx)("div",{className:"w-auto -ml-[36px] overflow-x-hidden",children:"edge"===m?(0,n.jsx)(tc,{label:j,code:w,functionName:x.name||"my-function",showCode:!l}):"sql"===m?l?(0,n.jsx)(e6,{value:w,language:"sql",hideLineNumbers:!0}):(0,n.jsx)(tf,{sql:w,title:j,xAxis:g,yAxis:v,isChart:b,isLoading:o,isDraggable:N,runQuery:y,onRunQuery:k,onUpdateChartConfig:e=>{let{chartConfig:t}=e;p.current={...p.current,...t}},onDragStart:e=>{e.dataTransfer.setData("application/json",JSON.stringify({label:j,sql:w,config:p.current}))}}):(0,n.jsx)(e5.d,{hideLineNumbers:!0,value:w,language:m,className:(0,eu.cn)("max-h-96 max-w-none block border rounded !bg-transparent !py-3 !px-3.5 prose dark:prose-dark text-foreground","[&>code]:m-0 [&>code>span]:flex [&>code>span]:flex-wrap [&>code]:block [&>code>span]:text-foreground")})})}},tv=function(e){let{role:t,content:s,isLoading:a,readOnly:i,children:o,action:l=null,variant:c="default"}=e,d="user"===t,u=(0,r.useMemo)(()=>({...te.t,...tg}),[]);return s?(0,n.jsx)(tx.Provider,{value:{isLoading:a,readOnly:i},children:(0,n.jsxs)("div",{className:(0,eu.cn)("mb-5 text-foreground-light text-sm",d&&"text-foreground","warning"===c&&"bg-warning-200"),children:[o,"warning"===c&&(0,n.jsx)(tt.aN,{className:"w-6 h-6"}),l,(0,n.jsxs)("div",{className:"flex gap-4 w-auto overflow-hidden",children:[d?(0,n.jsx)("figure",{className:"w-5 h-5 shrink-0 bg-foreground rounded-full flex items-center justify-center",children:(0,n.jsx)(e8.Z,{size:16,strokeWidth:1.5,className:"text-background"})}):(0,n.jsx)(eH.c,{size:20,className:"text-foreground-muted shrink-0"}),(0,n.jsx)(e9.D,{className:"space-y-5 flex-1 [&>*>code]:text-xs [&>*>*>code]:text-xs min-w-0 [&_li]:space-y-4",remarkPlugins:[e7.Z],components:u,children:s})]})]})}):null},tj=(0,r.memo)(e=>{let{message:t,isLoading:s}=e;return(0,n.jsx)(tv,{role:t.role,content:t.content,readOnly:"user"===t.role,isLoading:s},t.id)});tj.displayName="MemoizedMessage";let tb=e=>{var t,s,a,i,l,c,u,m,h;let{id:f,initialMessages:x,className:g,onResetConversation:j}=e,b=(0,ew.useRouter)(),y=(0,eD.Vm)(),w=(0,eF.C)(),N=(0,eO.l)(),{id:k}=(0,eN.UO)(),S=(0,eN.WN)(),C=w||!W.Qy,_=(0,eq.P)("disableAssistantPrompts"),{snippets:z}=(0,eV.B0)(),{aiAssistantPanel:A,setAiAssistantPanel:L,saveLatestMessage:E}=(0,d.WZ)(),{open:R,initialInput:U,sqlSnippets:P,suggestions:Z}=A,I=(0,r.useRef)(null),{ref:T,isSticky:F,scrollToEnd:O}=function(){let{enabled:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,r.useState)(null),[n,a]=(0,r.useState)(!0),i=(0,r.useRef)(!0),o=(0,r.useRef)(),l=(0,r.useCallback)(e=>{e&&s(e)},[]),c=(0,r.useCallback)(()=>{t&&(i.current=!0,a(!0),t.scrollTo({top:t.scrollHeight,behavior:"smooth"}))},[t]);return(0,r.useEffect)(()=>{let s;if(!t||!e)return;let n=new ResizeObserver(()=>{clearTimeout(s),s=setTimeout(()=>{void 0!==o.current&&t.scrollHeight!==o.current&&(o.current=t.scrollHeight,i.current&&c())},100)}),r=()=>{let e=10>Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight);i.current=e,a(e)};return Array.from(t.children).forEach(e=>{n.observe(e)}),t.addEventListener("scroll",r),()=>{clearTimeout(s),n.disconnect(),t.removeEventListener("scroll",r)}},[t,e,c]),{ref:l,isSticky:n,scrollToEnd:c}}(),[D,q]=(0,r.useState)(U),[V,H]=(0,r.useState)(),[M,B]=(0,r.useState)(),[Y,K]=(0,r.useState)(!1),{data:G,isSuccess:Q}=eR(),J=W.Qy||!!(null==G?void 0:G.hasKey),X=b.pathname.includes("/sql/[id]"),$=z[null!=k?k:""],ee=null==$?void 0:null===(s=$.snippet)||void 0===s?void 0:null===(t=s.content)||void 0===t?void 0:t.sql,{data:et}=(0,eP.Gl)({orgSlug:null==N?void 0:N.slug}),es=(0,ek.$w)(et),{data:en,isLoading:ea}=(0,eZ.Bj)({projectRef:null==y?void 0:y.ref,connectionString:null==y?void 0:y.connectionString,schema:"public"},{enabled:J}),er=null==en?void 0:en.find(e=>e.id.toString()===k),ei=null!==(h=null==S?void 0:S.get("schema"))&&void 0!==h?h:"public",{ref:eo}=(0,eN.UO)(),el=(0,eO.l)(),{mutate:ec}=(0,eI.a)(),{messages:ed,isLoading:ex,append:e_,setMessages:eA}=(0,em.RJ)({id:f,api:"".concat(W.GW,"/api/ai/sql/generate-v3"),maxSteps:5,initialMessages:x,body:{includeSchemaMetadata:C,projectRef:null==y?void 0:y.ref,connectionString:null==y?void 0:y.connectionString,schema:ei,table:null==er?void 0:er.name},onFinish:e=>E(e),onError:e=>{let t=JSON.parse(e.message).message;v.Am.error(t)}}),eL=(0,eT.Xo)(ep.KA.UPDATE,"organizations"),{mutate:eE,isLoading:eK}=(0,eU.k)(),eG=(0,r.useMemo)(()=>[...ed,...void 0!==V&&void 0!==M?[M]:[]],[ed,V,M]),eQ=(0,r.useMemo)(()=>eG.map(e=>(0,n.jsx)(tj,{message:e,isLoading:ex&&e.id===eG[eG.length-1].id},e.id)),[eG,ex]),e0=eG.length>0,e1=async e=>{var t,s,n;let a={role:"user",createdAt:new Date,content:e};e_(a,{headers:{Authorization:null!==(t=(await (0,ez.oT)()).get("Authorization"))&&void 0!==t?t:""}}),L({sqlSnippets:void 0,messages:[...eG,a]}),q(""),H(void 0),B(a),e.includes("Help me to debug")?ec({action:"assistant_debug_submitted",groups:{project:null!=eo?eo:"Unknown",organization:null!==(s=null==el?void 0:el.slug)&&void 0!==s?s:"Unknown"}}):ec({action:"assistant_prompt_submitted",groups:{project:null!=eo?eo:"Unknown",organization:null!==(n=null==el?void 0:el.slug)&&void 0!==n?n:"Unknown"}})},e4=async()=>{var e;if(!eL)return v.Am.error("You do not have the required permissions to update this organization");if(!(null==N?void 0:N.slug))return console.error("Organization slug is required");let t=null!==(e=null==N?void 0:N.opt_in_tags)&&void 0!==e?e:[],s=t.includes(W.PV.AI_SQL)?t:[...t,W.PV.AI_SQL];eE({slug:null==N?void 0:N.slug,opt_in_tags:s},{onSuccess:()=>{v.Am.success("Successfully opted-in"),K(!1)}})};return(0,r.useEffect)(()=>{!ex&&I.current&&I.current.focus(),F&&setTimeout(O,0)},[ex,F,O,eG]),(0,r.useEffect)(()=>{q(U),I.current&&(I.current.focus(),I.current.setSelectionRange(U.length,U.length))},[U]),(0,r.useEffect)(()=>{P&&0!==P.length||L({suggestions:void 0})},[P,Z,L]),(0,r.useEffect)(()=>{R&&X&&ee&&L({sqlSnippets:[ee]})},[R,X,ee]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,eu.cn)("flex flex-col h-full",g),children:[(0,n.jsxs)("div",{ref:T,className:(0,eu.cn)("flex-grow overflow-auto flex flex-col"),children:[(0,n.jsxs)("div",{className:"z-30 sticky top-0",children:[(0,n.jsxs)("div",{className:"border-b flex items-center bg gap-x-3 px-5 h-[46px]",children:[(0,n.jsx)(eH.c,{allowHoverEffect:!0}),(0,n.jsx)("div",{className:"text-sm flex-1",children:"Assistant"}),(0,n.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,n.jsxs)(eM.u,{children:[(0,n.jsx)(eM.aJ,{asChild:!0,children:(0,n.jsx)(ev.Z,{size:14,className:"text-foreground-light"})}),(0,n.jsxs)(eM._v,{className:"w-80",children:["The Assistant is in Alpha and your prompts might be rate limited."," ",C?"Project metadata is being shared to improve Assistant responses.":"Project metadata is not being shared. Opt in to improve Assistant responses."]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(e0||Z||P)&&(0,n.jsx)(o.z,{type:"default",disabled:ex,onClick:j,children:"Reset"}),(0,n.jsx)(o.z,{type:"default",className:"w-7",onClick:()=>{L({open:!1})},icon:(0,n.jsx)(ej.Z,{})})]})]})]}),!C&&N&&(0,n.jsx)(eB.J,{type:"default",title:"Project metadata is not shared",description:es?"Your organization has the HIPAA addon and will not send any project metadata with your prompts.":"The Assistant can improve the quality of the answers if you send project metadata along with your prompts. Opt into sending anonymous data to share your schema and table definitions.",className:"border-0 border-b rounded-none bg-background",children:!es&&(0,n.jsx)(o.z,{type:"default",className:"w-fit mt-4",onClick:()=>K(!0),children:"Update AI settings"})})]}),!e0&&(0,n.jsx)("div",{className:"h-48 flex-0 m-8",children:(0,n.jsx)(e$,{rows:10,columns:10,count:33})}),e0?(0,n.jsxs)("div",{className:"w-full p-5",children:[eQ,((null===(a=eg()(eG))||void 0===a?void 0:a.role)==="user"||(null===(l=eg()(eG))||void 0===l?void 0:null===(i=l.content)||void 0===i?void 0:i.length)===0)&&(0,n.jsxs)("div",{className:"flex gap-4 w-auto overflow-hidden",children:[(0,n.jsx)(eH.c,{size:20,className:"text-foreground-muted shrink-0"}),(0,n.jsxs)("div",{className:"text-foreground-lighter text-sm flex gap-1.5 items-center",children:[(0,n.jsx)("span",{children:"Thinking"}),(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)(eh.E.span,{animate:{opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0,delay:0},children:"."}),(0,n.jsx)(eh.E.span,{animate:{opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0,delay:.3},children:"."}),(0,n.jsx)(eh.E.span,{animate:{opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0,delay:.6},children:"."})]})]})]}),(0,n.jsx)("div",{className:"h-1"})]}):Z?(0,n.jsxs)("div",{className:"w-full h-full px-8 py-0 flex flex-col flex-1 justify-end",children:[(0,n.jsx)("h3",{className:"text-foreground-light font-mono text-sm uppercase mb-3",children:"Suggestions"}),Z.title&&(0,n.jsx)("p",{children:Z.title}),(0,n.jsx)("div",{className:"-mx-3 mt-4 mb-12",children:null==Z?void 0:null===(c=Z.prompts)||void 0===c?void 0:c.map((e,t)=>(0,n.jsx)(o.z,{size:"small",icon:(0,n.jsx)(eb.Z,{strokeWidth:1.5,size:16}),type:"text",className:"w-full justify-start py-1 h-auto",onClick:()=>{q(e),I.current&&(I.current.focus(),I.current.setSelectionRange(U.length,U.length))},children:e},"suggestion-".concat(t)))})]}):ea&&J?(0,n.jsx)("div",{className:"w-full h-full flex-1 flex flex-col justify-end items-start p-5",children:(0,n.jsx)(eY.A,{className:"w-4/5"})}):(null===(u=null!=en?en:[])||void 0===u?void 0:u.length)>0?(0,n.jsx)(e3,{setMessages:eA,onSendMessage:e1}):J?(0,n.jsxs)("div",{className:"w-full flex flex-col justify-end flex-1 h-full p-5",children:[(0,n.jsx)("h2",{className:"text-base mb-2",children:"Welcome to Supabase!"}),(0,n.jsx)("p",{className:"text-sm text-foreground-lighter mb-6",children:"This is the Supabase assistant which will help you create, debug and modify tables, policies, functions and more. You can even use it to query your data using just your words. It looks like we have a blank canvas though, so what are you looking to build? Here are some ideas."}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsx)(o.z,{onClick:()=>q("Generate a database schema for ..."),className:"rounded-full",children:"Generate a ..."}),eC.o.filter(e=>"quickstart"===e.type).map(e=>(0,n.jsx)(eM.pn,{children:(0,n.jsxs)(eM.u,{children:[(0,n.jsx)(eM.aJ,{asChild:!0,children:(0,n.jsx)(o.z,{type:"outline",className:"rounded-full",onClick:()=>{eA([{id:(0,eW.Z)(),role:"user",createdAt:new Date(Date.now()-3e3),content:e.description},{id:(0,eW.Z)(),role:"assistant",createdAt:new Date,content:'Sure! I can help you with that. Here is a starting point you can run directly or customize further. Would you like to make any changes?  \n\n```sql\n-- props: {"title": "'.concat(e.title,'"}\n').concat(e.sql,"\n```")}])},children:e.title})}),(0,n.jsx)(eM._v,{children:(0,n.jsx)("p",{children:e.description})})]})},e.title))]})]}):null]}),(0,n.jsx)(ef.M,{children:!F&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"pointer-events-none z-10 -mt-24",children:(0,n.jsx)("div",{className:"h-24 w-full bg-gradient-to-t from-background to-transparent"})}),(0,n.jsx)(eh.E.div,{className:"absolute bottom-20 left-1/2 -translate-x-1/2",variants:{hidden:{y:5,opacity:0},show:{y:0,opacity:1}},transition:{duration:.1},initial:"hidden",animate:"show",exit:"hidden",children:(0,n.jsx)(o.z,{type:"default",className:"rounded-full w-8 h-8 p-1.5",onClick:()=>{O(),I.current&&I.current.focus()},children:(0,n.jsx)(ey.Z,{size:16})})})]})}),(0,n.jsxs)("div",{className:"p-5 pt-0 z-20 relative",children:[P&&P.length>0&&(0,n.jsx)("div",{className:"mb-2",children:P.map((e,t)=>(0,n.jsx)(e6,{hideLineNumbers:!0,value:e,onRemove:()=>{let e=[...P];e.splice(t,1),L({sqlSnippets:e})},className:"text-xs"},t))}),_&&(0,n.jsx)(eB.J,{showIcon:!1,type:"default",title:"Assistant has been temporarily disabled",description:"We're currently looking into getting it back online"}),Q&&!J&&(0,n.jsx)(eB.J,{type:"default",title:"OpenAI API key not set",description:(0,n.jsx)(p.U,{content:"Add your `OPENAI_API_KEY` to your environment variables to use the AI Assistant."})}),(0,n.jsx)(eJ,{textAreaRef:I,className:(0,eu.cn)("z-20 [&>textarea]:text-base [&>textarea]:md:text-sm [&>textarea]:border-1 [&>textarea]:rounded-md [&>textarea]:!outline-none [&>textarea]:!ring-offset-0 [&>textarea]:!ring-0"),loading:ex,disabled:!J||_||ex,placeholder:e0?"Reply to the assistant...":(null===(m=null!=P?P:[])||void 0===m?void 0:m.length)>0?"Ask a question or make a change...":"Chat to Postgres...",value:D,onValueChange:e=>q(e.target.value),onSubmit:e=>{e.preventDefault(),C?(e1([D,(null==P?void 0:P.map(e=>"```sql\n"+e+"\n```").join("\n"))||""].filter(Boolean).join("\n\n")),O()):e1(D)}})]})]}),(0,n.jsxs)(eX.Z,{visible:Y,size:"large",title:"Confirm sending anonymous data to OpenAI",confirmLabel:"Confirm",onCancel:()=>K(!1),onConfirm:e4,loading:eK,children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"By opting into sending anonymous data, Supabase AI can improve the answers it shows you. This is an organization-wide setting, and affects all projects in your organization."}),(0,n.jsx)(eS.Z,{})]})]})},ty=()=>{var e;let{aiAssistantPanel:t,resetAiAssistantPanel:s}=(0,d.WZ)(),[a,i]=(0,r.useState)((null===(e=t.messages)||void 0===e?void 0:e.length)>0?t.messages:void 0),{open:o}=t,[l,c]=(0,r.useState)(()=>(0,S.k$)());return o?(0,n.jsx)(tb,{initialMessages:a,id:l,className:(0,eu.cn)("w-full h-[100dvh] md:h-full max-h-[100dvh]"),onResetConversation:()=>{c((0,S.k$)()),i(void 0),s()}}):null};var tw=s(77837),tN=s.n(tw),tk=s(8064),tS=s(71926),tC=s(54669),t_=s(88683),tz=s(14723),tA=s(49736),tL=s(31785),tE=s(86665),tR=s(32946),tU=s(2861),tP=s(94744),tZ=s(23746);let tI=e=>{var t,s,i,l,c,u,p,m;let{onChange:h}=e,{ref:f}=(0,a.UO)(),x=(0,eD.Vm)(),{editorPanel:g,setEditorPanel:j,setAiAssistantPanel:b}=(0,d.WZ)(),{profile:y}=(0,ts.Un)(),w=(0,eV.B0)(),{mutateAsync:N}=(0,tz.g)(),k=(0,eF.C)()||!W.Qy,[C,_]=(0,r.useState)(!1),[z,A]=(0,r.useState)(),[L,E]=(0,r.useState)(void 0),[R,U]=(0,r.useState)(),[P,Z]=(0,r.useState)(g.initialValue||""),[I,T]=(0,r.useState)(""),[F,O]=(0,r.useState)(!1),[D,q]=(0,r.useState)(!0),[V,H]=(0,r.useState)(!1),Y=null==z?void 0:null===(i=z.formattedError)||void 0===i?void 0:null===(s=i.split("\n"))||void 0===s?void 0:null===(t=s.filter(e=>e.length>0))||void 0===t?void 0:t[0],K=null!==(m=null==z?void 0:null===(u=z.formattedError)||void 0===u?void 0:null===(c=u.split("\n"))||void 0===c?void 0:null===(l=c.filter(e=>e.length>0))||void 0===l?void 0:l.slice(1))&&void 0!==m?m:[],{mutate:G,isLoading:Q}=(0,tA.r)({onSuccess:async e=>{E(e.result)},onError:e=>{A(e),E([])}}),J=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(A(void 0),U(void 0),0!==P.length){if(!e&&!(0,tr.mU)(P)){U((0,tr.De)(P)?"hasUnknownFunctions":"hasWriteOperation");return}g.onSave&&g.onSave(P),G({sql:(0,tS.se)(P,100),projectRef:null==x?void 0:x.ref,connectionString:null==x?void 0:x.connectionString,handleError:e=>{throw e},contextualInvalidation:!0})}},X=e=>{Z(e),null==h||h(e)},$=e=>{X(e),H(!1)},ee=(0,r.useCallback)(tN()(()=>{O(!1),X(I)},300),[I]);return(0,r.useEffect)(()=>()=>{ee.cancel()},[ee]),(0,r.useEffect)(()=>{void 0!==g.initialValue&&g.initialValue!==P&&Z(g.initialValue)},[g.initialValue]),(0,r.useEffect)(()=>{g.initialValue!==P&&j({initialValue:P})},[P,j]),(0,n.jsxs)("div",{className:"flex flex-col h-full bg-surface-100",children:[(0,n.jsxs)("div",{className:"border-b flex shrink-0 items-center gap-x-3 px-5 h-[46px]",children:[(0,n.jsx)("span",{className:"text-sm flex-1",children:"SQL Editor"}),(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsxs)(M.J2,{open:V,onOpenChange:H,children:[(0,n.jsx)(M.xo,{asChild:!0,children:(0,n.jsx)(o.z,{size:"tiny",type:"default",role:"combobox","aria-expanded":V,icon:(0,n.jsx)(es.Z,{size:14}),children:"Templates"})}),(0,n.jsx)(M.yk,{align:"end",className:"w-[300px] p-0",children:(0,n.jsxs)(B.mY,{children:[(0,n.jsx)(B.sZ,{placeholder:"Search templates..."}),(0,n.jsxs)(B.e8,{children:[(0,n.jsx)(B.rb,{children:"No templates found."}),(0,n.jsx)(B.fu,{children:null===(p=g.templates)||void 0===p?void 0:p.map(e=>(0,n.jsxs)(tL.zs,{children:[(0,n.jsx)(tL.Yi,{asChild:!0,children:(0,n.jsx)(B.di,{value:e.name,onSelect:()=>$(e.content),className:"cursor-pointer",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(tE.KK,{size:16,className:(0,eu.cn)("w-5 h-5 flex-0 mr-2 transition-colors fill-foreground-muted")}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h4",{className:"text-foreground flex-1",children:e.name}),(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:e.description})]})]})})}),(0,n.jsx)(tL.bZ,{side:"left",className:"w-[500px] p-0",children:(0,n.jsx)(e5.d,{language:"sql",className:"language-sql border-none",hideLineNumbers:!0,value:e.content})})]},e.name))})]})]})})]}),(0,n.jsx)(tU.u,{tooltip:{content:{side:"bottom",text:"Save as snippet"}},size:"tiny",type:"default",className:"w-7 h-7",loading:C,icon:(0,n.jsx)(tk.Z,{size:16}),onClick:async()=>{if(!f)return console.error("Project ref is required");if(!x)return console.error("Project is required");if(!y)return console.error("Profile is required");try{_(!0);let{title:e}=await N({sql:P}),t=(0,tS.wI)({id:(0,S.k$)(),name:e,sql:P,owner_id:y.id,project_id:x.id});w.addSnippet({projectRef:f,snippet:t}),w.addNeedsSaving(t.id),v.Am.success((0,n.jsxs)("div",{children:["Saved snippet! View it"," ",(0,n.jsx)(tP.U,{href:"/project/".concat(f,"/sql/").concat(t.id),children:"here"})]}))}catch(e){v.Am.error("Failed to create new query: ".concat(e.message))}finally{_(!1)}}}),(0,n.jsx)(o.z,{size:"tiny",type:"default",className:"w-7 h-7",onClick:()=>j({open:!1}),icon:(0,n.jsx)(ej.Z,{size:16})})]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col h-full",children:[(0,n.jsx)("div",{className:"flex-1 min-h-0 relative",children:(0,n.jsx)(tR.Z,{language:"pgsql",value:P,onChange:X,aiEndpoint:"".concat(W.GW,"/api/ai/sql/complete"),aiMetadata:{projectRef:null==x?void 0:x.ref,connectionString:null==x?void 0:x.connectionString,includeSchemaMetadata:k},initialPrompt:g.initialPrompt,options:{tabSize:2,fontSize:13,minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",folding:!1,padding:{top:4},lineNumbersMinChars:3},executeQuery:J})}),void 0!==z&&(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(eB.J,{type:"warning",className:"m-0 rounded-none border-x-0 border-b-0 [&>div>div>pre]:text-sm [&>div]:flex [&>div]:flex-col [&>div]:gap-y-2",title:Y||"Error running SQL query",description:(0,n.jsx)("div",{children:K.length>0?K.map((e,t)=>(0,n.jsx)("pre",{className:"font-mono text-xs whitespace-pre-wrap",children:e},"err-".concat(t))):(0,n.jsx)("p",{className:"font-mono text-xs",children:z.error})})})}),R&&(0,n.jsx)(tZ.Z,{className:"border-t",warningType:R,onCancel:()=>U(void 0),onConfirm:()=>{U(void 0),J(!0)}}),void 0!==L&&L.length>0&&(0,n.jsxs)("div",{className:"max-h-72 shrink-0 flex flex-col",children:[D&&(0,n.jsx)("div",{className:"border-t flex-1 overflow-auto",children:(0,n.jsx)(tC.Z,{rows:L})}),(0,n.jsxs)("p",{className:"text-xs text-foreground-light border-t py-2 px-5 flex items-center justify-between",children:[(0,n.jsxs)("span",{className:"font-mono",children:[L.length," rows",L.length>=100&&" (Limited to only 100 rows)"]}),(0,n.jsx)(o.z,{size:"tiny",type:"default",className:"ml-2",onClick:()=>q(e=>!e),children:D?"Hide Results":"Show Results"})]})]}),void 0!==L&&0===L.length&&(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)("p",{className:"text-xs text-foreground-light font-mono py-2 px-5",children:"Success. No rows returned."})}),(0,n.jsx)("div",{className:"bg-surface-100 flex items-center gap-2 justify-end px-5 py-4 w-full border-t shrink-0",children:(0,n.jsx)(t_.F,{isDisabled:Q,isExecuting:Q,onClick:J})})]})]})};var tT=s(19521),tF=s(37914),tO=s(26833),tD=s(9738),tq=s(1447),tW=s(12361);let tV=e=>{let{className:t,disabled:s=!1,size:a="tiny",showError:i=!0,selectedSchemas:l=[],excludedSchemas:c=[],label:d,onSelectSchemas:u}=e,[p,m]=(0,r.useState)(!1),h=(0,eD.Vm)(),{data:f,isLoading:x,isSuccess:g,isError:v,error:j,refetch:b}=(0,tq.Q1)({projectRef:null==h?void 0:h.ref,connectionString:null==h?void 0:h.connectionString}),y=(f||[]).filter(e=>!c.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name)),w=e=>{l.includes(e)?u(l.filter(t=>t!==e)):u([...l,e].sort((e,t)=>e.localeCompare(t)))};return(0,n.jsxs)("div",{className:t,children:[x&&(0,n.jsx)(o.z,{type:"default",className:"justify-start",block:!0,size:a,loading:!0,children:"Loading schemas..."}),i&&v&&(0,n.jsxs)(er.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,n.jsx)(er.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,n.jsxs)(er.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==j?void 0:j.message]}),(0,n.jsx)(o.z,{type:"default",size:"tiny",onClick:()=>b(),children:"Reload schemas"})]}),g&&(0,n.jsxs)(M.J2,{open:p,onOpenChange:m,modal:!1,children:[(0,n.jsx)(M.xo,{asChild:!0,children:(0,n.jsx)(o.z,{size:a,disabled:s,type:"default",className:"w-full [&>span]:w-full",iconRight:(0,n.jsx)(tO.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:(0,n.jsx)("div",{className:"w-full flex",children:(0,n.jsx)("p",{className:"text-foreground",children:d})})})}),(0,n.jsx)(M.yk,{className:"p-0 w-56",side:"bottom",align:"start",children:(0,n.jsxs)(B.mY,{children:[(0,n.jsx)(B.sZ,{placeholder:"Find schema..."}),(0,n.jsxs)(B.e8,{children:[(0,n.jsx)(B.rb,{children:"No schemas found"}),(0,n.jsx)(B.fu,{children:(0,n.jsx)(tW.xr,{className:(y||[]).length>7?"h-[210px]":"",children:null==y?void 0:y.map(e=>(0,n.jsxs)(B.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>w(e.name),onClick:()=>w(e.name),children:[(0,n.jsx)("span",{children:e.name}),l.includes(e.name)&&(0,n.jsx)(tD.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))})})]})]})})]})]})};var tH=()=>{let e=(0,d.WZ)(),t=(0,eO.l)(),s=(0,eF.C)(),a=(0,eD.Vm)(),[r,i]=(0,tT.l)(null==a?void 0:a.ref),l=s||!W.Qy;return(0,n.jsx)(tF.Z,{hideFooter:!0,header:"Supabase AI Settings",visible:e.showAiSettingsModal,onCancel:()=>e.setShowAiSettingsModal(!1),children:(0,n.jsxs)(tF.Z.Content,{className:"flex flex-col items-start justify-between gap-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col justify-between gap-y-2 text-sm",children:[(0,n.jsx)("p",{className:"text-foreground-light",children:"Schemas metadata to be shared with OpenAI"}),(0,n.jsx)(tV,{size:"small",label:l&&r.length>0?"".concat(r.length," schema").concat(r.length>1?"s":""," selected"):"No schemas selected",disabled:W.Qy&&!s,selectedSchemas:r,onSelectSchemas:i}),(0,n.jsx)("p",{className:"text-foreground-lighter",children:"Metadata includes table names, column names and their corresponding data types in the request. This will generate queries that are more relevant to your project."})]}),W.Qy&&!s&&t&&(0,n.jsxs)(er.bZ,{variant:"warning",children:[(0,n.jsx)(tt.aN,{}),(0,n.jsx)(er.Cd,{children:"Your organization does not allow sending anonymous data to OpenAI"}),(0,n.jsx)(er.X,{children:"This option is only available if your organization has opted-in to sending anonymous data to OpenAI. You may configure your opt-in preferences through your organization's settings."}),(0,n.jsx)(er.X,{className:"mt-3",children:(0,n.jsx)(o.z,{asChild:!0,type:"default",children:(0,n.jsx)(X(),{target:"_blank",rel:"noreferrer",href:"/org/".concat(t.slug,"/general"),className:"flex flex-row gap-1 items-center",children:"Head to organization settings"})})})]})]})})},tM=s(94583),tB=s(28570),tY=s(99033),tK=s(69280),tG=s(73936),tQ=s(11749);let tJ=()=>{var e,t,s,r,i,l;let{ref:c}=(0,a.UO)(),d=(0,ew.useRouter)(),{data:u}=(0,tK.q)(),p=null===(e=null!=u?u:[])||void 0===e?void 0:e.find(e=>e.project===c),m=void 0!==p?p.is_readonly_mode_enabled?["is_readonly_mode_enabled"]:Object.keys(p).filter(e=>"project"!==e&&"is_readonly_mode_enabled"!==e&&null!==p[e]):[],h=void 0!==p&&m.some(e=>"critical"===p[e]),f=m.includes("is_readonly_mode_enabled")||h,x=void 0!==p?(0,tQ.L)(p,m[0],"bannerContent"):void 0,g=m.length>1?tG.x.multiple_resource_warnings.bannerContent[h?"critical":"warning"].title:null==x?void 0:x.title,v=m.length>1?tG.x.multiple_resource_warnings.bannerContent[h?"critical":"warning"].description:null==x?void 0:x.description,j=m.length>1?tG.x.multiple_resource_warnings.docsUrl:null===(t=tG.x[m[0]])||void 0===t?void 0:t.docsUrl,b=m.length>1?tG.x.multiple_resource_warnings.metric:null===(s=tG.x[m[0]])||void 0===s?void 0:s.metric,y={undefined:void 0,null:"/project/[ref]/settings/[infra-path]",disk_space:"/project/[ref]/settings/compute-and-disk",read_only:"/project/[ref]/settings/compute-and-disk",auth_email_rate_limit:"/project/[ref]/settings/auth",auth_restricted_email_sending:"/project/[ref]/settings/auth",default:e=>"/project/[ref]/settings/[infra-path]#".concat(e)},w=null===(i=(e=>{let t=y[void 0===e?"undefined":null===e?"null":e]||y.default(e);return"function"==typeof t?t(e):t})(b))||void 0===i?void 0:null===(r=i.replace("[ref]",null!=c?c:"default"))||void 0===r?void 0:r.replace("[infra-path]","infrastructure"),N=m.length>1?tG.x.multiple_resource_warnings.buttonText:null===(l=tG.x[m[0]])||void 0===l?void 0:l.buttonText,k=0===m.length,S=(d.pathname.endsWith("/usage")||d.pathname.endsWith("/infrastructure"))&&!m.includes("is_readonly_mode_enabled"),C=d.pathname.endsWith("settings/compute-and-disk")&&m.includes("is_readonly_mode_enabled"),_=tG.x[m[0]],z=null==_?void 0:_.restrictToRoutes,A=void 0===z||z.some(e=>"/project/[ref]"===e?"/project/[ref]"===d.pathname:d.pathname.startsWith(e));return k||void 0===x||S||C||!A?null:(0,n.jsxs)(er.bZ,{variant:f?"destructive":"warning",className:(0,eu.cn)("flex items-center justify-between","border-0 border-r-0 rounded-none [&>svg]:left-6 px-6 [&>svg]:w-[26px] [&>svg]:h-[26px]"),children:[(0,n.jsx)(tB.Z,{}),(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)(er.Cd,{children:g}),(0,n.jsx)(er.X,{children:v})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[void 0!==j&&(0,n.jsx)(o.z,{asChild:!0,type:"default",icon:(0,n.jsx)(tY.Z,{}),children:(0,n.jsx)("a",{href:j,target:"_blank",rel:"noreferrer",children:"Learn more"})}),void 0!==w&&(0,n.jsx)(o.z,{asChild:!0,type:"default",children:(0,n.jsx)(X(),{href:w,children:null!=N?N:"Check"})})]})]})};var tX=s(76026),t$=s(50878),t0=s.n(t$),t1=s(80342),t4=s(38336),t3=s(95909),t2=s(90330),t5=s(86848),t6=s(5394),t8=s(30723),t9=s(84261),t7=s(61115),se=s(69938),st=s(97037),ss=s(54561),sn=s(80008),sa=s(17164),sr=s(70111),si=s(8068),so=s(76707),sl=()=>{let{ref:e}=(0,a.UO)(),t=(0,d.WZ)(),s=(0,eT.Xo)(ep.KA.BILLING_WRITE,"stripe.subscriptions");return(0,n.jsxs)(er.bZ,{className:"rounded-none px-7 py-6 [&>svg]:top-6 [&>svg]:left-6 !border-t-0 !border-l-0 !border-r-0",children:[(0,n.jsx)(er.Cd,{className:"text-base",children:"We strongly encourage enabling Point in Time Recovery (PITR)"}),(0,n.jsx)(er.X,{children:'This is to ensure that you can always recover data if you make a "bad migration". For example, if you accidentally delete a column or some of your production data.'}),s?(0,n.jsx)(o.z,{size:"tiny",type:"default",className:"mt-4",children:(0,n.jsx)(X(),{href:"/project/".concat(e,"/settings/addons?panel=pitr"),onClick:()=>t.setShowEnableBranchingModal(!1),children:"Enable PITR add-on"})}):(0,n.jsx)(tU.u,{disabled:!0,size:"tiny",type:"default",className:"mt-4",tooltip:{content:{side:"bottom",text:"You need additional permissions to amend subscriptions"}},children:"Enable PITR add-on"})]})},sc=s(19369),sd=()=>{let e=(0,d.WZ)(),t=(0,eO.l)();return(0,n.jsxs)(er.bZ,{className:"rounded-none px-7 py-6 [&>svg]:top-6 [&>svg]:left-6 border-0 border-y",children:[(0,n.jsx)(sc.Z,{}),(0,n.jsx)(er.Cd,{children:"Database branching is only available on the Pro Plan and above"}),(0,n.jsx)(er.X,{children:"Go to your organization's billing settings and upgrade your plan to enable branching for this project"}),(0,n.jsx)(er.X,{children:(0,n.jsx)(o.z,{size:"tiny",type:"default",className:"mt-4",children:(0,n.jsx)(X(),{href:"/org/".concat(null==t?void 0:t.slug,"/billing?panel=subscriptionPlan&source=enableBranchingButton"),onClick:()=>e.setShowEnableBranchingModal(!1),children:"Upgrade to Pro"})})})]})},su=()=>{let{ref:e}=(0,a.UO)(),t=(0,d.WZ)();return(0,n.jsxs)(er.bZ,{className:"rounded-none px-7 py-6 [&>svg]:top-6 [&>svg]:left-6 !border-t-0 !border-l-0 !border-r-0",children:[(0,n.jsx)(sc.Z,{}),(0,n.jsx)(er.Cd,{className:"text-base",children:"Your project needs to be on Postgres 15 to enable branching"}),(0,n.jsx)(er.X,{children:"Head over to your project's infrastructure settings to upgrade to the latest version of Postgres before enabling branching."}),(0,n.jsx)(er.X,{children:(0,n.jsx)(o.z,{size:"tiny",type:"default",className:"mt-4",children:(0,n.jsx)(X(),{href:"/project/".concat(e,"/settings/infrastructure"),onClick:()=>t.setShowEnableBranchingModal(!1),children:"Head to project settings"})})})]})},sp=s(46736),sm=s(49e3),sh=s(93840),sf=e=>{var t,s,r,i,l;let{form:c,isChecking:d,isValid:u,githubConnection:p}=e,{ref:m}=(0,a.UO)(),h=(0,eO.l)(),f=(0,sm.x5)();function x(){f.setGithubConnectionsOpen(!0)}return(0,n.jsx)("div",{className:"border-t border-b",children:(0,n.jsx)(tF.Z.Content,{className:"px-7",children:(0,n.jsxs)("div",{className:"py-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{children:"Git Connection"}),(0,n.jsx)(R.C,{variant:"warning",children:"Required"})]}),(0,n.jsx)("p",{className:"text-sm text-foreground-light !mb-4",children:void 0!==p?"Your database preview branches will be based on the branches in the following repository that your project is connected with:":"Your database preview branches will be based on the branches in the Git repository that your project is connected with."}),p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ul",{className:"mb-3",children:(0,n.jsx)(sp.jA,{type:"GitHub",connection:{id:String(p.id),added_by:{id:String(null===(t=p.user)||void 0===t?void 0:t.id),primary_email:null!==(i=null===(s=p.user)||void 0===s?void 0:s.primary_email)&&void 0!==i?i:"",username:null!==(l=null===(r=p.user)||void 0===r?void 0:r.username)&&void 0!==l?l:""},foreign_project_id:String(p.repository.id),supabase_project_ref:p.project.ref,organization_integration_id:"unused",inserted_at:p.inserted_at,updated_at:p.updated_at,metadata:{name:p.repository.name}},showNode:!1,actions:(0,n.jsx)(o.z,{type:"default",onClick:()=>x(),children:"Configure connection"}),orientation:"horizontal"})}),(0,n.jsx)(so.Wi,{control:c.control,name:"branchName",render:e=>{let{field:t}=e;return(0,n.jsxs)(so.xJ,{className:"flex flex-col gap-y-1 relative",children:[(0,n.jsx)("label",{className:"text-sm text-foreground-light",children:"Choose your production branch"}),(0,n.jsx)(so.NI,{children:(0,n.jsx)(sh.I,{...t,placeholder:"e.g main"})}),(0,n.jsx)("div",{className:"absolute top-9 right-3",children:d?(0,n.jsx)(eK.Z,{size:14,className:"animate-spin"}):u?(0,n.jsx)(tD.Z,{size:14,className:"text-brand",strokeWidth:2}):null}),(0,n.jsx)(so.zG,{})]})}})]}):(0,n.jsx)(sp.FP,{showNode:!1,onClick:()=>x(),orgSlug:null==h?void 0:h.slug})]})})})},sx=()=>{var e,t,s,i,l;let{ref:c}=(0,a.UO)(),u=(0,d.WZ)(),p=(0,eO.l)(),[m,h]=(0,r.useState)(!1);(0,eT.Xo)(ep.KA.CREATE,"preview_branches");let{data:f,error:x,isLoading:g,isSuccess:b,isError:y}=(0,sn.q)({organizationId:null==p?void 0:p.id}),{data:w,error:N,isLoading:k,isError:S,isSuccess:C}=(0,st.D)({projectRef:c}),_=Number(null!==(s=null===(e=eg()(null!==(t=null==w?void 0:w.current_app_version.split("-"))&&void 0!==t?t:[]))||void 0===e?void 0:e.split(".")[0])&&void 0!==s?s:0)>=15,{data:z}=(0,eP.Gl)({orgSlug:null==p?void 0:p.slug}),A=(null==z?void 0:z.plan.id)==="free",{data:L}=(0,sa.F)({projectRef:c}),E=void 0!==(null!==(i=null==L?void 0:L.selected_addons)&&void 0!==i?i:[]).find(e=>"pitr"===e.type),R=null==f?void 0:f.find(e=>e.project.ref===c),[U,P]=null!==(l=null==R?void 0:R.repository.name.split("/"))&&void 0!==l?l:[],{mutateAsync:Z,isLoading:I}=(0,ss.s)({onError:()=>{}}),{mutate:T,isLoading:F}=(0,se.J)({onSuccess:()=>{v.Am.success("Successfully created new branch"),u.setShowEnableBranchingModal(!1)}}),O="enable-branching-form",D=t6.Ry({branchName:t6.Z_().refine(e=>e.length>1,"Please enter a branch name from ".concat(U,"/").concat(P)).refine(async e=>{try{if(e.length>0){if(!(null==R?void 0:R.id))throw Error("No GitHub connection found");await Z({connectionId:R.id,branchName:e}),h(!0)}return!0}catch(e){return h(!1),!1}},"Unable to find branch from ".concat(U,"/").concat(P))}),q=(0,t5.cI)({mode:"onBlur",reValidateMode:"onChange",resolver:(0,t2.F)(D),defaultValues:{branchName:""}}),W=b&&C,V=q.getValues("branchName").length>0&&!I&&m;return(0,r.useEffect)(()=>{q&&u.showEnableBranchingModal&&(h(!1),q.reset())},[q,u.showEnableBranchingModal]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tF.Z,{hideFooter:!0,visible:u.showEnableBranchingModal,onCancel:()=>u.setShowEnableBranchingModal(!1),className:"block",size:"medium",hideClose:!0,children:(0,n.jsx)(so.l0,{...q,children:(0,n.jsxs)("form",{id:O,onSubmit:q.handleSubmit(e=>{if(!c)return console.error("Project ref is required");T({projectRef:c,branchName:e.branchName,gitBranch:e.branchName})}),onChange:()=>h(!1),children:[(0,n.jsxs)(tF.Z.Content,{className:"flex items-center justify-between space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,n.jsx)(sr.Z,{strokeWidth:2,size:20}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-foreground",children:"Enable database branching"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Manage environments in Supabase"})]})]}),(0,n.jsx)(j.G,{href:"https://supabase.com/docs/guides/platform/branching"})]}),(g||k)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tF.Z.Separator,{}),(0,n.jsx)(tF.Z.Content,{className:"px-7 py-6",children:(0,n.jsx)(t7.A,{})}),(0,n.jsx)(tF.Z.Separator,{})]}),(y||S)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tF.Z.Separator,{}),(0,n.jsx)(tF.Z.Content,{className:"px-7 py-6",children:y?(0,n.jsx)(t9.Z,{error:x,subject:"Failed to retrieve connections"}):S?(0,n.jsx)(t9.Z,{error:N,subject:"Failed to retrieve Postgres version"}):null}),(0,n.jsx)(tF.Z.Separator,{})]}),W&&(0,n.jsxs)(n.Fragment,{children:[A?(0,n.jsx)(sd,{}):_?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(sf,{form:q,isChecking:I,isValid:V,githubConnection:R}),!E&&(0,n.jsx)(sl,{})]}):(0,n.jsx)(su,{}),(0,n.jsxs)(tF.Z.Content,{className:"py-6 flex flex-col gap-3",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Please keep in mind the following:"}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)("figure",{className:"w-10 h-10 rounded-md bg-info-200 border border-info-400 flex items-center justify-center",children:(0,n.jsx)(si.Z,{className:"text-info",size:20,strokeWidth:2})})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)("p",{className:"text-sm text-foreground",children:"Preview branches are billed $0.32 per day"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"This cost will continue for as long as the branch has not been removed."})]})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4 mt-2",children:[(0,n.jsx)("div",{children:(0,n.jsx)("figure",{className:"w-10 h-10 rounded-md bg-info-200 border border-info-400 flex items-center justify-center",children:(0,n.jsx)(eb.Z,{className:"text-info",size:20,strokeWidth:2})})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)("p",{className:"text-sm text-foreground",children:"Migrations are applied from your GitHub repository"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Migration files in your ",(0,n.jsx)("code",{className:"text-xs",children:"./supabase"})," ","directory will run on both Preview Branches and Production when pushing and merging branches."]})]})]})]}),(0,n.jsx)(tF.Z.Separator,{})]}),(0,n.jsxs)(tF.Z.Content,{className:"flex items-center gap-3",children:[(0,n.jsx)(o.z,{size:"medium",block:!0,disabled:F,type:"default",onClick:()=>u.setShowEnableBranchingModal(!1),children:"Cancel"}),(0,n.jsx)(o.z,{block:!0,size:"medium",form:O,disabled:!W||F||!V,loading:F,type:"primary",htmlType:"submit",children:"I understand, enable branching"})]})]})})}),(0,n.jsx)(t8.Z,{projectRef:c})]})},sg=s(36457),sv=s(43282),sj=s(73225),sb=s(6723),sy=s(98767),sw=s(57123),sN=s(19890),sk=s(82866),sS=s(22002),sC=()=>{let{ref:e}=(0,a.UO)(),t=(0,eD.Vm)(),s=(0,sg.NL)(),i=(0,r.useRef)();async function l(){if(!t)return;let n=await (0,sk.GC)("".concat(W.T5,"/projects/").concat(t.ref,"/status"),{timeout:2e3});if(n&&!n.error){let{status:t}=n;t===W.S.ACTIVE_HEALTHY&&(clearInterval(i.current),e&&await (0,sw.H0)(s,e),await (0,sN.fr)(s))}}return((0,r.useEffect)(()=>(i.current=window.setInterval(l,4e3),()=>{clearInterval(i.current)}),[]),void 0===t)?null:(0,n.jsxs)("div",{className:"mx-auto my-8 md:my-16 w-full md:max-w-7xl items-center justify-center",children:[(0,n.jsxs)("div",{className:"px-4 md:px-6 flex flex-col space-y-16",children:[(0,n.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"w-full flex flex-col md:flex-row items-start md:items-center gap-3",children:[(0,n.jsx)("h1",{className:"text-3xl text-foreground",children:null==t?void 0:t.name}),(0,n.jsx)(R.C,{variant:"default",className:"bg-surface-100 bg-opacity-100",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eK.Z,{className:"animate-spin",size:12}),(0,n.jsx)("span",{children:t.status===W.S.UNKNOWN?"Initiating project set up":"Setting up project"})]})})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:[" ","We are provisioning your database and API endpoints"]}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:" This may take a few minutes"})]})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"w-full grid grid-cols-12 gap-12",children:[(0,n.jsxs)("div",{className:"w-full col-span-12 space-y-12 lg:col-span-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-base text-foreground",children:"While you wait"}),(0,n.jsx)(s_,{description:(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Browse the Supabase"," ",(0,n.jsx)(X(),{href:"https://supabase.com/docs",className:"mb-0 text-brand transition-colors hover:text-brand-600",target:"_blank",rel:"noreferrer",children:"documentation"}),"."]})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-base text-foreground",children:"Not working?"}),(0,n.jsx)(s_,{description:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Try refreshing after a couple of minutes."})}),(0,n.jsx)("ul",{children:(0,n.jsx)(s_,{description:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"mb-4 text-sm text-foreground-light",children:"If your dashboard hasn't connected within 2 minutes, you can open a support ticket."}),(0,n.jsx)(o.z,{asChild:!0,type:"default",children:(0,n.jsx)(X(),{href:"/support/new",children:"Contact support team"})})]})})})]})]}),(0,n.jsxs)("div",{className:"col-span-12  lg:col-span-8",children:[(0,n.jsx)(sy.D,{}),(0,n.jsx)(sy.m,{})]})]})})]}),t.status===W.S.COMING_UP&&(0,n.jsxs)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:[(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)("div",{className:"mx-6",children:(0,n.jsx)("h4",{className:"text-lg",children:"Client libraries"})}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-8 md:gap-12 mx-6 mb-12 md:grid-cols-3",children:sb.l.map(e=>(0,n.jsx)(sv.Z,{...e},e.language))})]}),(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)("div",{className:"mx-6",children:(0,n.jsx)("h5",{children:"Example projects"})}),(0,n.jsx)("div",{className:"mx-6 grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:sb.B.map(e=>(0,n.jsx)(sj.Z,{...e},e.url))})]})]})]})};let s_=e=>{let{description:t}=e;return(0,n.jsxs)("li",{className:"my-3 flex flex-wrap space-x-3",children:[(0,n.jsx)("div",{className:"mt-0.5",children:(0,n.jsx)(sS.Z,{className:"text-foreground-lighter",size:14})}),(0,n.jsx)("div",{className:"flex-1",children:t})]})};var sz=s(59749);async function sA(e,t){if(void 0===e)return!1;let{timeout:s}=null!=t?t:{};return sL(e,s)}async function sL(e,t){let{error:s}=await (0,sk.pu)("".concat(W.T5,"/projects/").concat(e,"/api/rest"),[],{timeout:null!=t?t:2e3});return void 0===s}var sE=s(76687),sR=s(9905),sU=s(68679),sP=e=>{let{project:t}=e,{ref:s}=(0,a.UO)(),i=(0,sg.NL)(),l=(0,r.useRef)();(0,r.useEffect)(()=>{if(t.restUrl)return l.current=window.setInterval(c,4e3),()=>{clearInterval(l.current)}},[t]);let c=async()=>{await sA(t.ref)&&(clearInterval(l.current),(0,sN.Ob)(i,t.ref,"ONLINE"),await (0,sw.H0)(i,t.ref))};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:(0,n.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:[(0,n.jsx)("h1",{className:"text-3xl",children:t.name}),(0,n.jsx)("div",{children:(0,n.jsx)(R.C,{variant:"brand",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(sE.Z,{className:"animate-spin",size:12}),(0,n.jsx)("span",{children:"Connecting to project"})]})})})]}),(0,n.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-overlay bg-surface-100 p-8",children:(0,n.jsxs)("div",{className:"w-[440px] space-y-4",children:[(0,n.jsxs)("div",{className:"mx-auto flex max-w-[300px] items-center justify-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-md border",children:(0,n.jsx)(sR.Z,{className:"text-foreground-light",size:30,strokeWidth:1.5})})}),(0,n.jsx)(sz.Z,{active:!0}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-md border",children:(0,n.jsx)(sU.Z,{className:"text-foreground-light",size:30,strokeWidth:1.5})})})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-center",children:["Connecting to ",t.name]}),(0,n.jsx)("p",{className:"text-center text-sm text-foreground-light",children:"If you are unable to connect after a few minutes, check your project's health to verify if it's running into any resource constraints."})]}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)(o.z,{asChild:!0,type:"default",children:(0,n.jsx)(X(),{href:"/project/".concat(s,"/settings/infrastructure"),children:"Check database health"})}),(0,n.jsx)(o.z,{asChild:!0,type:"default",icon:(0,n.jsx)(tY.Z,{strokeWidth:1.5}),children:(0,n.jsx)(X(),{href:"https://supabase.com/docs/guides/platform/troubleshooting#unable-to-connect-to-your-supabase-project",className:"translate-y-[1px]",children:"Troubleshooting"})})]})]})})]})})})},sZ=s(90133),sI=s(28408),sT=s(84053),sF=s(26597),sO=s(56318),sD=s(20156),sq=s(63609);async function sW(e,t){let{projectRef:s}=e;if(!s)throw Error("Project ref is required");let{data:n,error:a}=await (0,ez.U2)("/platform/database/{ref}/backups/downloadable-backups",{params:{path:{ref:s}},signal:t});return a&&(0,ez.S3)(a),n}let sV=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e_.a)(sq.A.backups(t),e=>{let{signal:s}=e;return sW({projectRef:t},s)},{enabled:s&&void 0!==t,...n})};var sH=s(15011),sM=s(32672),sB=()=>{var e;let{ref:t}=(0,a.UO)(),{project:s}=(0,sM.d2)(),[i,l]=(0,r.useState)(!1),{data:c}=sV({projectRef:t}),d=null!==(e=null==c?void 0:c.backups)&&void 0!==e?e:[],{mutate:u,isLoading:p}=(0,sD.s)({onSuccess:e=>{let{fileUrl:t}=e,s=document.createElement("a");s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:(0,n.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,n.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(tt.ku,{className:"w-5 h-5"})}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{children:"Something went wrong while pausing your project"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project's data is intact, but your project is inaccessible due to the failure while pausing. Please contact support for assistance."})]})]}),(0,n.jsxs)("div",{className:"border-t border-overlay flex items-center justify-end gap-x-2 py-4 px-8",children:[(0,n.jsx)(o.z,{asChild:!0,type:"default",children:(0,n.jsx)(X(),{href:"/support/new?category=Database_unresponsive&ref=".concat(null==s?void 0:s.ref,"&subject=Restoration%20failed%20for%20project"),children:"Contact support"})}),(0,n.jsx)(tU.u,{type:"default",icon:(0,n.jsx)(w.Z,{}),loading:p,disabled:0===d.length,tooltip:{content:{side:"bottom",text:0===d.length?"No available backups to download":void 0}},onClick:()=>t?0===d.length?console.error("No available backups to download"):void u({ref:t,backup:d[0]}):console.error("Project ref is required"),children:"Download backup"}),(0,n.jsxs)(sH.h_,{children:[(0,n.jsx)(sH.$F,{children:(0,n.jsx)(o.z,{type:"default",className:"px-1.5",icon:(0,n.jsx)(sT.Z,{})})}),(0,n.jsx)(sH.AW,{className:"w-72",align:"end",children:(0,n.jsxs)(sH.Xi,{onClick:()=>l(!0),className:"items-start gap-x-2",children:[(0,n.jsx)("div",{className:"translate-y-0.5",children:(0,n.jsx)(sF.Z,{size:14})}),(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("p",{children:"Delete project"}),(0,n.jsx)("p",{className:"text-foreground-lighter",children:"Project cannot be restored once it is deleted"})]})]})})]})]})]})})}),(0,n.jsx)(sO.Z,{visible:i,onClose:()=>l(!1)})]})},sY=s(24448);async function sK(e,t){let{projectRef:s}=e;if(!s)throw Error("Project ref is required");let{data:n,error:a}=await (0,ez.U2)("/platform/projects/{ref}/status",{params:{path:{ref:s}},signal:t});return a&&(0,ez.S3)(a),n}let sG=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e_.a)(sY.i.status(t),e=>{let{signal:s}=e;return sK({projectRef:t},s)},{enabled:s&&void 0!==t,...n})};var sQ=s(78938),sJ=e=>{let{project:t}=e,{ref:s}=(0,a.UO)(),i=(0,sg.NL)(),[o,l]=(0,r.useState)(!1);return sG({projectRef:s},{enabled:o,refetchInterval:e=>(null==e?void 0:e.status)!==W.S.INACTIVE&&2e3,onSuccess:async e=>{e.status===W.S.INACTIVE&&(s&&await (0,sw.H0)(i,s),await (0,sN.fr)(i))}}),(0,r.useEffect)(()=>{setTimeout(()=>l(!0),4e3)},[]),(0,n.jsx)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:(0,n.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:[(0,n.jsx)("h1",{className:"text-3xl",children:t.name}),(0,n.jsx)("div",{children:(0,n.jsx)(R.C,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(sE.Z,{className:"animate-spin",size:12}),(0,n.jsx)("span",{children:"Pausing project"})]})})})]}),(0,n.jsx)("div",{className:"mx-auto mt-8 mb-16 w-full max-w-7xl",children:(0,n.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-overlay bg-surface-100 p-8",children:(0,n.jsxs)("div",{className:"grid w-[380px] gap-4",children:[(0,n.jsxs)("div",{className:"relative mx-auto max-w-[300px]",children:[(0,n.jsx)("div",{className:"absolute flex h-full w-full items-center justify-center",children:(0,n.jsx)(sE.Z,{className:"animate-spin",size:20,strokeWidth:2})}),(0,n.jsx)(sQ.Z,{className:"text-foreground-lighter",size:50,strokeWidth:1.5})]}),(0,n.jsxs)("p",{className:"text-center",children:["Pausing ",t.name]}),(0,n.jsx)("p",{className:"text-center text-sm text-foreground-light",children:"You may restore your project anytime thereafter, and your data will be restored to when it was initially paused."})]})})})]})})},sX=e=>{let{title:t,children:s}=e;return(0,n.jsxs)("div",{id:"spec-click-target",className:"hide-scrollbar flex flex-col w-full h-full bg-dash-sidebar border-default ",children:[(0,n.jsx)("div",{className:"border-default flex max-h-12 items-center border-b px-6",style:{minHeight:"3rem"},children:(0,n.jsx)("h4",{className:"text-lg",children:t})}),(0,n.jsx)("div",{className:"flex-grow overflow-y-auto",children:s})]})};let s$=()=>{let{ref:e}=(0,a.UO)();return(0,sw.ix)({ref:e},{refetchInterval:e=>(null==e?void 0:e.status)!==W.S.ACTIVE_HEALTHY&&4e3}),(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:(0,n.jsx)("div",{className:"space-y-6 py-6",children:(0,n.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(eK.Z,{className:"animate-spin text-foreground-light",size:18})}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("p",{children:"Resizing Project Compute size"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project is being restarted to apply compute size changes."}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"This can take a few minutes. Project will be offline while it is being restarted."})]})]})})})})};var s0=()=>{let{ref:e}=(0,a.UO)();return(0,sw.ix)({ref:e},{refetchInterval:e=>(null==e?void 0:e.status)!==W.S.ACTIVE_HEALTHY&&4e3}),(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:(0,n.jsx)("div",{className:"space-y-6 py-6",children:(0,n.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(eK.Z,{className:"animate-spin",size:18})}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{children:"Restarting..."}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Restarting can take a few minutes. Your project will be offline while it restarts."})]})]})})})})},s1=()=>{var e;let{ref:t}=(0,a.UO)(),{project:s}=(0,sM.d2)(),[i,l]=(0,r.useState)(!1),{data:c}=sV({projectRef:t}),d=null!==(e=null==c?void 0:c.backups)&&void 0!==e?e:[],{mutate:u,isLoading:p}=(0,sD.s)({onSuccess:e=>{let{fileUrl:t}=e,s=document.createElement("a");s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:(0,n.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,n.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(tt.ku,{className:"w-5 h-5"})}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{children:"Something went wrong while restoring your project"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project's data is intact, but your project is inaccessible due to the restoration failure. Please contact support for assistance."})]})]}),(0,n.jsxs)("div",{className:"border-t border-overlay flex items-center justify-end py-4 px-8 gap-x-2",children:[(0,n.jsx)(o.z,{asChild:!0,type:"default",children:(0,n.jsx)(X(),{href:"/support/new?category=Database_unresponsive&ref=".concat(null==s?void 0:s.ref,"&subject=Restoration%20failed%20for%20project"),children:"Contact support"})}),(0,n.jsx)(tU.u,{type:"default",icon:(0,n.jsx)(w.Z,{}),loading:p,disabled:0===d.length,tooltip:{content:{side:"bottom",text:0===d.length?"No available backups to download":void 0}},onClick:()=>t?0===d.length?console.error("No available backups to download"):void u({ref:t,backup:d[0]}):console.error("Project ref is required"),children:"Download backup"}),(0,n.jsxs)(sH.h_,{children:[(0,n.jsx)(sH.$F,{children:(0,n.jsx)(o.z,{type:"default",className:"px-1.5",icon:(0,n.jsx)(sT.Z,{})})}),(0,n.jsx)(sH.AW,{className:"w-72",align:"end",children:(0,n.jsxs)(sH.Xi,{onClick:()=>l(!0),className:"items-start gap-x-2",children:[(0,n.jsx)("div",{className:"translate-y-0.5",children:(0,n.jsx)(sF.Z,{size:14})}),(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("p",{children:"Delete project"}),(0,n.jsx)("p",{className:"text-foreground-lighter",children:"Project cannot be restored once it is deleted"})]})]})})]})]})]})})}),(0,n.jsx)(sO.Z,{visible:i,onClose:()=>l(!1)})]})},s4=s(84687),s3=()=>{var e;let{ref:t}=(0,a.UO)(),s=(0,sg.NL)(),{project:i}=(0,sM.d2)(),l=(0,r.useRef)(),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),{data:m}=sV({projectRef:t}),h=(null!==(e=null==m?void 0:m.backups)&&void 0!==e?e:[]).filter(e=>!e.isPhysicalBackup),{mutate:f,isLoading:x}=(0,sD.s)({onSuccess:e=>{let{fileUrl:t}=e,s=document.createElement("a");s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}});async function g(){if(!i)return;let e=await (0,sk.GC)("".concat(W.T5,"/projects/").concat(i.ref,"/status"),{timeout:2e3});if(e&&!e.error){let{status:n}=e;n===W.S.ACTIVE_HEALTHY?(clearInterval(l.current),p(!0)):s.invalidateQueries(sY.i.detail(t))}}let v=async()=>{if(!i)return console.error("Project is required");d(!0),t&&await (0,sw.H0)(s,t)};return(0,r.useEffect)(()=>(l.current=window.setInterval(g,4e3),()=>clearInterval(l.current)),[]),(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:u?(0,n.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,n.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(s4.Z,{className:"text-brand",size:18,strokeWidth:2})}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{children:"Restoration complete!"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project has been successfully restored and is now back online."})]})]}),(0,n.jsx)("div",{className:"border-t border-overlay flex items-center justify-end py-4 px-8",children:(0,n.jsx)(o.z,{disabled:c,loading:c,onClick:v,children:"Return to project"})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"space-y-6 py-6",children:(0,n.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(sE.Z,{className:"animate-spin",size:18})}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{children:"Restoration in progress"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Restoration can take from a few minutes up to several hours depending on the size of your database. Your project will be offline while the restoration is running."})]})]})}),(0,n.jsxs)("div",{className:"border-t border-overlay flex items-center justify-end py-4 px-8 gap-x-2",children:[(0,n.jsx)(o.z,{asChild:!0,type:"default",children:(0,n.jsx)(X(),{href:"/support/new?category=Database_unresponsive&ref=".concat(null==i?void 0:i.ref,"&subject=Restoration%20failed%20for%20project"),children:"Contact support"})}),(0,n.jsx)(tU.u,{type:"default",icon:(0,n.jsx)(w.Z,{}),loading:x,disabled:0===h.length,tooltip:{content:{side:"bottom",text:0===h.length?"No available backups to download":void 0}},onClick:()=>t?0===h.length?console.error("No available backups to download"):void f({ref:t,backup:h[0]}):console.error("Project ref is required"),children:"Download latest backup"})]})]})})})},s2=s(7406),s5=s(28977),s6=s.n(s5),s8=s(43947),s9=s(56757),s7=s(95962),ne=s(52053),nt=s(50847);let ns=[{key:s2.L9.Started,initial:"Prepare new server",progress:"Preparing new server",completed:"Prepared new server"},{key:s2.L9.LaunchedUpgradedInstance,initial:"Prepare new server for migration",progress:"Preparing new server for migration",completed:"New server ready for migration"},{key:s2.L9.DetachedVolumeFromUpgradedInstance,initial:"Execute pre-upgrade checks",progress:"Executing pre-upgrade checks",completed:"Completed pre-upgrade checks"},{key:s2.L9.AttachedVolumeToOriginalInstance,initial:"Shut down API services",progress:"Shutting down API services",completed:"Completed shutting down API services"},{key:s2.L9.InitiatedDataUpgrade,initial:"Migrate to new database",progress:"Migrating to new database",completed:"Completed migration to new database"},{key:s2.L9.CompletedDataUpgrade,initial:"Execute database migration",progress:"Executing database migration",completed:"Completed database migration"},{key:s2.L9.DetachedVolumeFromOriginalInstance,initial:"Update database extensions",progress:"Updating database extensions",completed:"Updated database extensions"},{key:s2.L9.AttachedVolumeToUpgradedInstance,initial:"Optimize database",progress:"Optimizing database",completed:"Completed optimization of database"}];var nn=()=>{var e;let{ref:t}=(0,a.UO)(),s=(0,ne.useSearchParams)(),i=(0,sg.NL)(),{project:l}=(0,sM.d2)(),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),{data:m}=(0,nt.h)({projectRef:t,projectStatus:null==l?void 0:l.status,trackingId:s.get("trackingId")},{enabled:W.Qy}),{initiated_at:h,status:f,progress:x,target_version:g,error:v}=null!==(e=null==m?void 0:m.databaseUpgradeStatus)&&void 0!==e?e:{},j=Number((x||"").split("_")[0]),b=f===s2.h.Failed,y=f===s2.h.Upgraded,w=f===s2.h.Upgrading&&x===s2.L9.CompletedUpgrade,N=s6().utc(null!=h?h:0).format("DD MMM YYYY HH:mm:ss"),k=s6().utc(null!=h?h:0).local().format("DD MMM YYYY HH:mm:ss (ZZ)"),S=async()=>{d(!0),t&&await (0,sw.H0)(i,t)},C="Upgrade information:%0Aâ€¢ Initiated at: ".concat(h,"%0Aâ€¢ Target Version: ").concat(g,"%0Aâ€¢ Error: ").concat(v);return(0,n.jsx)("div",{className:"w-full mx-auto my-16 space-y-16 max-w-7xl",children:(0,n.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,n.jsx)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:(0,n.jsx)("h1",{className:"text-3xl",children:null==l?void 0:l.name})}),(0,n.jsx)("div",{className:"w-full mx-auto mt-8 mb-16 max-w-7xl",children:(0,n.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-muted bg-surface-100 p-8",children:y?(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsx)("div",{className:"relative mx-auto max-w-[300px]",children:(0,n.jsx)(s4.Z,{className:"text-brand",size:40,strokeWidth:1.5})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-center",children:"Upgrade completed!"}),(0,n.jsxs)("p",{className:"mt-4 text-center text-sm text-foreground-light w-[300px] mx-auto",children:["Your project has been successfully upgraded to Postgres ",g," and is now back online."]})]}),(0,n.jsx)("div",{className:"mx-auto",children:(0,n.jsx)(o.z,{loading:c,disabled:c,onClick:S,children:"Return to project"})})]}):b?(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsx)("div",{className:"relative mx-auto max-w-[300px]",children:(0,n.jsx)(sc.Z,{className:"text-amber-900",size:40,strokeWidth:1.5})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-center",children:"We ran into an issue while upgrading your project"}),(0,n.jsx)("p",{className:"mt-4 text-center text-sm text-foreground-light w-full md:w-[450px] mx-auto",children:"Your project is back online and its data is not affected. Please reach out to us via our support form for assistance with the upgrade."})]}),(0,n.jsxs)("div",{className:"flex items-center mx-auto space-x-2",children:[(0,n.jsx)(o.z,{asChild:!0,type:"default",children:(0,n.jsx)(X(),{href:"/support/new?category=Database_unresponsive&ref=".concat(t,"&subject=").concat("Upgrade%20failed%20for%20project","&message=").concat(C),target:"_blank",rel:"noreferrer",children:"Contact support"})}),(0,n.jsx)(o.z,{loading:c,disabled:c,onClick:S,children:"Return to project"})]})]}):(0,n.jsxs)("div",{className:"grid w-[480px] gap-4",children:[(0,n.jsxs)("div",{className:"relative mx-auto max-w-[300px]",children:[(0,n.jsx)("div",{className:"absolute flex items-center justify-center w-full h-full",children:(0,n.jsx)(s8.Z,{className:"animate-spin",size:20,strokeWidth:2})}),(0,n.jsx)(sQ.Z,{className:"text-foreground-lighter",size:50,strokeWidth:1.5})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[w?(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-center",children:"Performing a full backup"}),(0,n.jsx)("p",{className:"text-sm text-center text-foreground-light",children:"Upgrade is now complete, and your project is online. A full backup is now being performed to ensure that there is a proper base backup available post-upgrade. This can take from a few minutes up to several hours depending on the size of your database."})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-center",children:"Upgrading in progress"}),(0,n.jsx)("p",{className:"text-sm text-center text-foreground-light",children:"Upgrades can take from a few minutes up to several hours depending on the size of your database. Your project will be offline while it is being upgraded."})]}),(0,n.jsxs)("div",{className:"!mt-4 !mb-2 py-3 px-4 transition-all overflow-hidden border rounded relative",style:{maxHeight:u?"500px":"110px"},children:[u?(0,n.jsx)(s9.Z,{size:14,strokeWidth:2,className:"absolute z-10 cursor-pointer top-3 right-3",onClick:()=>p(!1)}):(0,n.jsx)(s7.Z,{size:14,strokeWidth:2,className:"absolute z-10 cursor-pointer top-3 right-3",onClick:()=>p(!0)}),(0,n.jsx)("div",{className:"space-y-2 transition-all",style:{translate:u?"0px 0px":"0px ".concat(-((j-2<=0?0:j>6?5:j-2)*28),"px")},children:ns.map((e,t)=>{let s=e.key===x,a=j>t;return(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[s?(0,n.jsx)("div",{className:"flex items-center justify-center w-5 h-5 rounded-full",children:(0,n.jsx)(sE.Z,{size:20,className:"animate-spin text-foreground-light",strokeWidth:2})}):a?(0,n.jsx)("div",{className:"flex items-center justify-center w-5 h-5 border rounded-full bg-brand border-brand",children:(0,n.jsx)(tD.Z,{size:12,className:"text-white",strokeWidth:3})}):(0,n.jsx)("div",{className:"flex items-center justify-center w-5 h-5 border rounded-full bg-overlay-hover"}),(0,n.jsx)("p",{className:"text-sm ".concat(s?"text-foreground":a?"text-foreground-light":"text-foreground-lighter"," hover:text-foreground transition"),children:s?e.progress:a?e.completed:e.initial})]},e.key)})})]}),void 0!==h&&(0,n.jsxs)(eM.u,{children:[(0,n.jsx)(eM.aJ,{children:(0,n.jsxs)("p",{className:"text-sm text-center text-foreground-light",children:["Started on: ",N," (UTC)"]})}),(0,n.jsx)(eM._v,{side:"bottom",children:k})]})]})]})})})]})})};let na=["/project/[ref]/settings/general","/project/[ref]/settings/database","/project/[ref]/settings/storage","/project/[ref]/settings/infrastructure","/project/[ref]/settings/addons"],nr=["/project/[ref]/branches","/project/[ref]/database/backups/scheduled","/project/[ref]/database/backups/pitr","/project/[ref]/settings/addons"],ni=["/project/[ref]/reports","/project/[ref]/settings/general","/project/[ref]/settings/database","/project/[ref]/settings/infrastructure","/project/[ref]/settings/addons"],no=(0,r.forwardRef)((e,t)=>{let{title:s,isLoading:a=!1,isBlocking:i=!0,product:o="",productMenu:l,children:c,selectedTable:u,resizableSidebar:p=!1}=e,m=(0,ew.useRouter)(),[h,f]=(0,r.useState)(!1),x=(0,eO.l)(),g=(0,eD.Vm)(),{editorPanel:v,aiAssistantPanel:j,setAiAssistantPanel:b,mobileMenuOpen:y,setMobileMenuOpen:w}=(0,d.WZ)(),{open:N}=j,k=null==g?void 0:g.name,S=null==x?void 0:x.name,C=(null==g?void 0:g.status)===W.S.INACTIVE,_=!g||g.status===W.S.ACTIVE_HEALTHY||g.status===W.S.COMING_UP&&m.pathname.includes("/project/[ref]/settings"),z="/project/[ref]"===m.pathname||m.pathname.includes("/project/[ref]/settings");return(0,r.useEffect)(()=>{f(!0)},[]),(0,r.useEffect)(()=>{let e=e=>{!e.metaKey||"i"!==e.key||e.altKey||e.shiftKey||(b({open:!N}),e.preventDefault(),e.stopPropagation())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[N]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t0(),{children:[(0,n.jsx)("title",{children:s?"".concat(s," | Supabase"):u?"".concat(u," | ").concat(k," | ").concat(S," | Supabase"):k?"".concat(k," | ").concat(S," | Supabase"):S?"".concat(S," | Supabase"):"Supabase"}),(0,n.jsx)("meta",{name:"description",content:"Supabase Studio"})]}),(0,n.jsx)("div",{className:"flex flex-row h-full w-full",children:(0,n.jsxs)(t4.pO,{className:"",direction:"horizontal",autoSaveId:"project-layout",children:[_&&l&&(0,n.jsx)(t4.ee,{order:1,maxSize:33,defaultSize:1,id:"panel-left",className:(0,eu.cn)("hidden md:block","transition-all duration-[120ms]",p?"min-w-64 max-w-[32rem]":"min-w-64 max-w-64"),children:(0,n.jsx)(ef.M,{initial:!1,children:(0,n.jsx)(eh.E.div,{initial:{width:0,opacity:0,height:"100%"},animate:{width:"auto",opacity:1,height:"100%"},exit:{width:0,opacity:0,height:"100%"},className:"h-full",transition:{duration:.12},children:(0,n.jsx)(nd,{isLoading:a,isBlocking:i,productMenu:l,children:(0,n.jsx)(sX,{title:o,children:l})})})})}),_&&l&&(0,n.jsx)(t4.Dp,{withHandle:!0,disabled:!p,className:"hidden md:flex"}),(0,n.jsx)(t4.ee,{order:2,id:"panel-right",className:"h-full flex flex-col w-full",children:(0,n.jsxs)(t4.pO,{className:"h-full w-full overflow-x-hidden flex-1 flex flex-row gap-0",direction:"horizontal",autoSaveId:"project-layout-content",children:[(0,n.jsx)(t4.ee,{id:"panel-content",className:(0,eu.cn)("w-full xl:min-w-[600px] bg-dash-sidebar"),children:(0,n.jsx)("main",{className:"h-full flex flex-col flex-1 w-full overflow-y-auto overflow-x-hidden",ref:t,children:C&&!z?(0,n.jsx)("div",{className:"mx-auto my-16 w-full h-full max-w-7xl flex items-center",children:(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(sI.$,{product:o})})}):(0,n.jsxs)(nu,{isLoading:a,isBlocking:i,children:[(0,n.jsx)(tJ,{}),c]})})}),h&&(j.open||v.open)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t4.Dp,{withHandle:!0}),(0,n.jsxs)(t4.ee,{id:"panel-assistant",className:(0,eu.cn)("border-l xl:border-l-0 bg fixed z-40 md:absolute md:z-0 right-0 top-0 md:top-[48px] bottom-0 xl:relative xl:top-0","w-screen h-[100dvh] md:h-auto md:w-auto md:min-w-[400px] max-w-[500px]","2xl:min-w-[500px] 2xl:max-w-[600px]"),children:[j.open&&(0,n.jsx)(ty,{}),v.open&&(0,n.jsx)(tI,{})]})]})]})})]})}),(0,n.jsx)(sx,{}),(0,n.jsx)(tH,{}),(0,n.jsx)(ed,{}),(0,n.jsx)(t3.Z,{open:y,onOpenChange:w,children:l})]})});no.displayName="ProjectLayout";let nl=(0,tX.Q)(no);var nc=no;let nd=e=>{let{isLoading:t,isBlocking:s=!0,productMenu:n,children:a}=e,r=(0,ew.useRouter)(),i=(0,eD.Vm)(),o=!na.includes(r.pathname);return s?!t&&n&&(!o||o&&void 0!==i)?a:null:a},nu=e=>{let{isLoading:t,isBlocking:s=!0,children:i}=e,o=(0,ew.useRouter)(),{ref:l}=(0,a.UO)(),c=(0,t1.TF)(),d=(0,eD.Vm)(),u=o.pathname.includes("/project/[ref]/settings"),p="/project/[ref]/settings/vault"===o.pathname,m=o.pathname.includes("/project/[ref]/database/backups"),h=!u&&!nr.includes(o.pathname)||p,f=!ni.includes(o.pathname),x=!na.includes(o.pathname),g=(null==d?void 0:d.status)===W.S.RESTARTING,v=(null==d?void 0:d.status)===W.S.RESIZING,j=(null==d?void 0:d.status)===W.S.UPGRADING,b=(null==d?void 0:d.status)===W.S.RESTORING,y=(null==d?void 0:d.status)===W.S.RESTORE_FAILED,w=(null==d?void 0:d.status)===W.S.COMING_UP||(null==d?void 0:d.status)===W.S.UNKNOWN,N=(null==d?void 0:d.status)===W.S.GOING_DOWN||(null==d?void 0:d.status)===W.S.PAUSING,k=(null==d?void 0:d.status)===W.S.PAUSE_FAILED,S=(null==d?void 0:d.postgrestStatus)==="OFFLINE";return((0,r.useEffect)(()=>{l&&c.setSelectedDatabaseId(l)},[l]),s&&(t||x&&void 0===d))?o.pathname.endsWith("[ref]")?(0,n.jsx)(sZ.C,{}):(0,n.jsx)(tM.Z,{}):g&&!m?(0,n.jsx)(s0,{}):v&&!m?(0,n.jsx)(s$,{}):j&&!m?(0,n.jsx)(nn,{}):N?(0,n.jsx)(sJ,{project:d}):k?(0,n.jsx)(sB,{}):f&&S?(0,n.jsx)(sP,{project:d}):h&&b?(0,n.jsx)(s3,{}):y&&!m?(0,n.jsx)(s1,{}):h&&w?(0,n.jsx)(sC,{}):(0,n.jsx)(r.Fragment,{children:i},null==d?void 0:d.ref)}},90940:function(e,t,s){"use strict";s.d(t,{De:function(){return r},Dk:function(){return a},mU:function(){return i}}),s(44309),s(39310),s(9610),s(86710),s(63609),s(50259),s(14185);let n=["count(","sum(","avg(","min(","max(","coalesce(","nullif(","current_timestamp","current_date","length(","lower(","upper(","trim(","substring(","to_char(","to_date(","extract(","date(","date_trunc(","string_agg(","in ("],a=e=>{let t=e.toLowerCase().replaceAll("\n"," ");return t.includes("create function")||t.includes("create or replace function")?"functions":t.includes("create policy")||t.includes("alter policy")?"rls-policies":void 0},r=e=>(e.trim().toLowerCase().match(/\w+\s*\(/g)||[]).some(e=>!n.some(t=>e.trim().toLowerCase()===t)),i=e=>{let t=e.trim().toLowerCase();if(!t.startsWith("select"))return!1;let s=["created","inserted","updated","deleted","truncate"];return!(["insert","update","delete","alter","drop","create","replace"].some(e=>!s.some(s=>t.includes(s)&&s.includes(e))&&t.includes(e))||r(t))}},96019:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(97458),a=s(52983),r=s(63730),i=e=>{let{children:t,editor:s,id:n,beforeLineNumber:i,afterLineNumber:o=0,heightInLines:l=1}=e,c=null!=i?i:o,d="".concat(n,"-").concat(c.toString()),u=(0,a.useMemo)(()=>document.createElement("div"),[]),p=(0,a.useRef)(),m=(0,a.useRef)({top:0,height:0,heightInLines:l}),h="getModifiedEditor"in s?s.getModifiedEditor():s,f=()=>{let e=h.getLayoutInfo();e&&(u.style.left="".concat(e.contentLeft,"px"),u.style.top="".concat(m.current.top,"px"),u.style.width="".concat(e.width-e.contentLeft-20,"px"),u.style.height="".concat(m.current.height,"px"))},x=()=>{h.changeViewZones(e=>{p.current&&e.removeZone(p.current),p.current=e.addZone({afterLineNumber:null!=i?i:o,heightInLines:m.current.heightInLines,domNode:document.createElement("div"),onDomNodeTop:e=>{m.current.top=e,f()},onComputedHeight:e=>{m.current.height=e,f()}})})};return(0,a.useEffect)(()=>{let e={getId:()=>n,getDomNode:()=>u,getPosition:()=>null};return x(),h.addOverlayWidget(e),()=>{h.changeViewZones(t=>{p.current&&t.removeZone(p.current),h.removeOverlayWidget(e)})}},[h,n,i,o]),(0,a.useEffect)(()=>{l!==m.current.heightInLines&&(m.current.heightInLines=l,x())},[l]),(0,r.createPortal)(t,u,d)},o=s(92271),l=s(53486);let c=e=>{let{value:t,onChange:s,onSubmit:r,onAccept:i,onReject:c,onCancel:d,isDiffVisible:u,isLoading:p=!1}=e,m=(0,a.useRef)(null);(0,a.useEffect)(()=>{setTimeout(()=>{var e,s;null===(e=m.current)||void 0===e||e.focus(),null===(s=m.current)||void 0===s||s.setSelectionRange(t.length,t.length)},100)},[]);let h=(0,a.useCallback)(()=>{t.trim()&&!p&&r(t)},[t,p,r]),f=(0,a.useCallback)(e=>{s(e.target.value)},[s]),x=(0,a.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||e.metaKey||e.ctrlKey||(e.preventDefault(),h())},[h]);return(0,n.jsxs)("div",{className:"overflow-hidden rounded-md p-0 bg-popover border border-foreground/20 focus-within:border-foreground/30 shadow-xl text-sm max-w-xl",children:[(0,n.jsx)(o.D,{ref:m,className:"bg-transparent border-0 outline-0 ring-0 ring-offset-0 focus:outline-0 focus:ring-0 focus:ring-offset-0 focus-visible:outline-0 focus-visible:ring-0 focus-visible:ring-offset-0 focus-within:outline-0 focus-within:ring-0 focus-within:ring-offset-0 shadow-none rounded-none gap-4 text-xs md:text-xs py-2 pl-3 !leading-[20px]",placeholder:u?"Make an edit...":"Edit via the Assistant...",value:t,onChange:f,onKeyDown:x,disabled:p}),u?(0,n.jsxs)("div",{className:"flex justify-start p-0 border-t",children:[(0,n.jsxs)(l.z,{type:"text",onClick:i,className:"text-xs h-auto py-1 rounded-none px-3 border-r-border",disabled:p,children:["Accept ",(0,n.jsx)("span",{className:"text-xs text-foreground-light",children:"âŒ˜ + Enter"})]}),(0,n.jsxs)(l.z,{onClick:c,type:"text",className:"text-xs h-auto py-1 rounded-none px-3 border-r-border",disabled:p,children:["Reject ",(0,n.jsx)("span",{className:"text-xs text-foreground-light",children:"Esc"})]})]}):(0,n.jsxs)("div",{className:"flex justify-start p-0 border-t",children:[(0,n.jsxs)(l.z,{type:"text",onClick:h,loading:p,className:"text-xs h-auto py-1 rounded-none px-3 border-r-border",disabled:p,children:[p?"Generating...":"Generate"," ",!p&&(0,n.jsx)("span",{className:"text-xs text-foreground-light",children:"Enter"})]}),(0,n.jsxs)(l.z,{onClick:d,type:"text",className:"text-xs h-auto py-1 rounded-none px-3 border-r-border",disabled:p,children:["Cancel ",(0,n.jsx)("span",{className:"text-xs text-foreground-light",children:"Esc"})]})]})]})};var d=e=>{let{editor:t,id:s,value:r,onChange:o,onSubmit:l,onAccept:d,onReject:u,onCancel:p,isDiffVisible:m,isLoading:h=!1,startLineNumber:f,endLineNumber:x}=e,g=(0,a.useRef)(null),[v,j]=(0,a.useState)(3),b=(0,a.useCallback)(()=>{g.current&&j(Math.max(3,Math.ceil(g.current.offsetHeight/20)))},[]);return(0,a.useEffect)(()=>{b();let e=new ResizeObserver(b);return g.current&&e.observe(g.current),()=>{e.disconnect()}},[b]),(0,n.jsx)(i,{editor:t,id:s,heightInLines:v,afterLineNumber:x,beforeLineNumber:Math.max(0,f-1),children:(0,n.jsx)("div",{ref:g,children:(0,n.jsx)(c,{value:r,onChange:o,onSubmit:l,onAccept:d,onReject:u,onCancel:p,isDiffVisible:m,isLoading:h})})})}},32946:function(e,t,s){"use strict";var n=s(97458),a=s(85229),r=s(42019),i=s(59171),o=s(16402),l=s(39390),c=s(52983),d=s(34549),u=s(129),p=s(6433),m=s(96019);t.Z=e=>{let{language:t="javascript",value:s,defaultValue:h="",aiEndpoint:f,aiMetadata:x,initialPrompt:g,readOnly:v=!1,className:j="",options:b={},onChange:y,executeQuery:w}=e,N=(0,p.fV)(),k=(0,c.useRef)(null),S=(0,c.useRef)(null),C=(0,c.useRef)(w);C.current=w;let[_,z]=(0,c.useState)(s||h),[A,L]=(0,c.useState)(!1),[E,R]=(0,c.useState)(!1),[U,P]=(0,c.useState)({original:"",modified:""}),[Z,I]=(0,c.useState)({isOpen:!!g,selection:"",beforeSelection:"",afterSelection:"",startLineNumber:0,endLineNumber:0}),[T,F]=(0,c.useState)(g||""),{complete:O,completion:D,isLoading:q,setCompletion:W}=(0,r.GO)({api:f||"",body:x,onResponse:e=>{if(!e.ok)throw Error("Failed to generate completion")},onError:e=>{d.Am.error("Failed to generate: ".concat(e.message))}}),V=(0,c.useCallback)(()=>{var e;W(""),L(!1),I(e=>({...e,isOpen:!1})),F(""),null===(e=k.current)||void 0===e||e.focus()},[W]),H=(0,c.useCallback)(()=>{if(U.modified){let e=U.modified;z(e),null==y||y(e),V()}},[U.modified,y,V]),M=async(e,s)=>{try{var n;I(e=>({...e,selection:s.selection,beforeSelection:s.beforeSelection,afterSelection:s.afterSelection}));let a=await (0,u.oT)();await O(e,{headers:{Authorization:null!==(n=a.get("Authorization"))&&void 0!==n?n:""},body:{...x,completionMetadata:{textBeforeCursor:s.beforeSelection,textAfterCursor:s.afterSelection,language:t,prompt:e,selection:s.selection}}})}catch(e){I(e=>({...e,isOpen:!1}))}},B={tabSize:2,fontSize:13,readOnly:v,minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",folding:!1,padding:{top:4},lineNumbersMinChars:3,...b};return(0,c.useEffect)(()=>{z(s||h)},[s,h]),(0,c.useEffect)(()=>{g&&(F(g),I({isOpen:!!g,selection:"",beforeSelection:"",afterSelection:"",startLineNumber:0,endLineNumber:0}))},[g]),(0,c.useEffect)(()=>{A||R(!1)},[A]),(0,c.useEffect)(()=>{if(!D){L(!1);return}P({original:Z.beforeSelection+Z.selection+Z.afterSelection,modified:Z.beforeSelection+D+Z.afterSelection}),L(!0)},[D,Z.beforeSelection,Z.selection,Z.afterSelection]),(0,c.useEffect)(()=>{let e=e=>{"Escape"===e.key?V():"Enter"===e.key&&("macos"===N?e.metaKey:e.ctrlKey)&&A&&(e.preventDefault(),H())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[N,A,H,V]),(0,n.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col h-full relative",children:A?(0,n.jsxs)("div",{className:"w-full h-full",children:[(0,n.jsx)(a.DiffEditor,{theme:"vs-dark",language:t,original:U.original,modified:U.modified,onMount:e=>{S.current=e,R(!0)},options:{...B,renderSideBySide:!1}}),E&&(0,n.jsx)(m.Z,{editor:S.current,id:"ask-ai-diff",value:T,onChange:F,onSubmit:e=>{M(e,{beforeSelection:Z.beforeSelection,selection:Z.selection||U.modified,afterSelection:Z.afterSelection})},onAccept:H,onReject:()=>{V()},onCancel:V,isDiffVisible:!0,isLoading:q,startLineNumber:Math.max(0,Z.startLineNumber),endLineNumber:Z.endLineNumber})]}):(0,n.jsxs)("div",{className:"w-full h-full relative",children:[(0,n.jsx)(a.default,{theme:"supabase",language:t,value:_,options:B,onChange:e=>{let t=e||"";z(t),null==y||y(t)},onMount:(e,t)=>{if(k.current=e,T){let t=e.getModel();if(t){let e=t.getLineCount();I({isOpen:!0,selection:t.getValue(),beforeSelection:"",afterSelection:"",startLineNumber:1,endLineNumber:e})}}C.current&&e.addAction({id:"run-query",label:"Run Query",keybindings:[t.KeyMod.CtrlCmd+t.KeyCode.Enter],contextMenuGroupId:"operation",contextMenuOrder:0,run:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.call(C)}}),e.addAction({id:"generate-ai",label:"Generate with AI",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KeyK],run:()=>{var t,s;let n=e.getSelection(),a=e.getModel();if(!a||!n)return;let r=a.getLinesContent(),i=n.startLineNumber-1,o=n.endLineNumber,l=r.slice(0,i).join("\n")+"\n";I({isOpen:!0,selection:r.slice(i,o).join("\n"),beforeSelection:l,afterSelection:"\n"+r.slice(o).join("\n"),startLineNumber:null!==(t=null==n?void 0:n.startLineNumber)&&void 0!==t?t:0,endLineNumber:null!==(s=null==n?void 0:n.endLineNumber)&&void 0!==s?s:0})}})},className:j}),Z.isOpen&&k.current&&(0,n.jsx)(m.Z,{editor:k.current,id:"ask-ai",value:T,onChange:F,onSubmit:e=>{M(e,{beforeSelection:Z.beforeSelection,selection:Z.selection,afterSelection:Z.afterSelection})},onCancel:V,isDiffVisible:!1,isLoading:q,startLineNumber:Math.max(0,Z.startLineNumber),endLineNumber:Z.endLineNumber}),(0,n.jsx)(i.M,{children:!Z.isOpen&&!_&&f&&(0,n.jsxs)(o.E.p,{initial:{y:5,opacity:0},animate:{y:0,opacity:1},exit:{y:5,opacity:0},className:"text-foreground-lighter absolute bottom-4 left-4 z-10 font-mono text-xs flex items-center gap-1",children:["Hit ","macos"===N?(0,n.jsx)(l.Z,{size:12}):"CTRL+","K to edit with the Assistant"]})})]})})}},81932:function(e,t,s){"use strict";s.d(t,{Z:function(){return v}});var n=s(97458),a=s(85229),r=s(88469),i=s.n(r),o=s(71607),l=s.n(o),c=s(52983),d=s(79663),u=s(289),p=s(34069),m=s(6433),h=s(43633),f=s(94583);let x=e=>{e.changeViewZones(e=>{e.addZone({afterLineNumber:0,heightInPx:4,domNode:document.createElement("div")})})},g={runQuery:{enabled:!1,callback:l()},explainCode:{enabled:!1,callback:l()},formatDocument:{enabled:!0,callback:l()},placeholderFill:{enabled:!0},closeAssistant:{enabled:!1,callback:l()}};var v=e=>{let{id:t,language:s,defaultValue:r,autofocus:o=!0,isReadOnly:v=!1,hideLineNumbers:j=!1,className:b,loading:y,options:w,value:N,placeholder:k,actions:S=g,editorRef:C,onInputChange:_=l()}=e,z=(0,a.useMonaco)(),A=(0,u.Vm)(),L=(0,c.useRef)(),E=(0,c.useRef)(),R=C||E,U=(0,c.useRef)(),{runQuery:P,placeholderFill:Z,formatDocument:I,explainCode:T,closeAssistant:F}={...g,...S},O=void 0!==k&&0===(null!=N?N:"").trim().length,[D,q]=(0,c.useState)(O),W=i()({tabSize:2,fontSize:13,readOnly:v,minimap:{enabled:!1},wordWrap:"on",fixedOverflowWidgets:!0,contextmenu:!0,lineNumbers:j?"off":void 0,glyphMargin:!j&&void 0,lineNumbersMinChars:j?0:4,folding:!j&&void 0,scrollBeyondLastLine:!1},w),V=async(e,t)=>{R.current=e,U.current=t,x(e),L.current=e.createContextKey("hasValue",!1),L.current.set(void 0!==N&&N.trim().length>0),q(O),Z.enabled&&e.addCommand(t.KeyCode.Tab,()=>{e.executeEdits("source",[{identifier:"add-placeholder",range:new t.Range(1,1,1,1),text:(null!=k?k:"").split("\n\n").join("\n").replaceAll("*","").replaceAll("&nbsp;"," ")}])},"!hasValue"),P.enabled&&e.addAction({id:"run-query",label:"Run Query",keybindings:[t.KeyMod.CtrlCmd+t.KeyCode.Enter],contextMenuGroupId:"operation",contextMenuOrder:0,run:()=>{var e,t;let s=(null==R?void 0:R.current).getModel().getValueInRange(null==R?void 0:null===(e=R.current)||void 0===e?void 0:e.getSelection());P.callback(s||(null==R?void 0:null===(t=R.current)||void 0===t?void 0:t.getValue()))}}),T.enabled&&e.addAction({id:"explain-code",label:"Explain Code",contextMenuGroupId:"operation",contextMenuOrder:1,run:()=>{var e;let t=(null==R?void 0:R.current).getModel().getValueInRange(null==R?void 0:null===(e=R.current)||void 0===e?void 0:e.getSelection());T.callback(t)}}),F.enabled&&e.addAction({id:"close-assistant",label:"Close Assistant",keybindings:[t.KeyMod.CtrlCmd+t.KeyCode.KeyI],run:()=>F.callback()});let s=e.getModel();if(s){let t=s.getPositionAt((null!=N?N:"").length);e.setPosition(t)}await (0,m.Vs)(500),o&&(null==e||e.focus())};return(0,c.useEffect)(()=>{q(O)},[O]),(0,c.useEffect)(()=>{if(Z.enabled&&void 0!==R.current&&void 0!==U.current){let e=R.current,t=U.current;e.addCommand(t.KeyCode.Tab,()=>{e.executeEdits("source",[{identifier:"add-placeholder",range:new t.Range(1,1,1,1),text:(null!=k?k:"  ").split("\n\n").join("\n").replaceAll("*","").replaceAll("&nbsp;","")}])},"!hasValue")}},[k,Z.enabled]),(0,c.useEffect)(()=>{if(z&&A&&I.enabled){let e=z.languages.registerDocumentFormattingEditProvider("pgsql",{async provideDocumentFormattingEdits(e){let t=e.getValue(),s=(0,p._)(t);return I.callback(s),[{range:e.getFullModelRange(),text:s}]}});return()=>e.dispose()}},[z,A,I.enabled]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{path:t,theme:"supabase",className:(0,h.cn)(b,"monaco-editor"),value:null!=N?N:void 0,language:s,defaultValue:null!=r?r:void 0,loading:y||(0,n.jsx)(f.Z,{}),options:W,onMount:V,onChange:e=>{L.current.set((null!=e?e:"").length>0),q(!e),_(e)}}),void 0!==k&&(0,n.jsx)("div",{className:(0,h.cn)("monaco-placeholder absolute top-[3px] left-[57px] text-sm pointer-events-none font-mono","[&>div>p]:text-foreground-lighter [&>div>p]:!m-0 tracking-tighter",D?"block":"hidden"),children:(0,n.jsx)(d.U,{content:k})})]})}},94744:function(e,t,s){"use strict";s.d(t,{U:function(){return o}});var n=s(97458),a=s(83145),r=s.n(a),i=s(43633);let o=e=>{let{href:t,className:s,children:a}=e,o=(0,i.cn)("underline transition underline-offset-2 decoration-foreground-lighter hover:decoration-foreground text-foreground",s);return t.startsWith("http")?(0,n.jsx)("a",{className:o,href:t,target:"_blank",rel:"noreferrer noopener",children:a}):(0,n.jsx)(r(),{className:o,href:t,children:a})}},10139:function(e,t,s){"use strict";var n=s(97458),a=s(40540),r=s(7406),i=s(73512),o=s(49510),l=s(67704),c=s(38391),d=s(94281),u=s(30114),p=s(85847),m=s(19369),h=s(60661);t.Z=e=>{var t;let{legacy:s,showNotice:f=!0}=e,{ref:x}=(0,i.UO)(),g=(0,u.P)("newApiKeys"),{data:v,isError:j,isLoading:b}=(0,c.zR)({projectRef:x}),{data:y,isError:w,isLoading:N}=(0,l.t)({projectRef:x}),k=null==y?void 0:y.jwtSecretUpdateStatus,{isLoading:S,can:C}=(0,d.CD)(a.KA.READ,"service_api_keys"),_=void 0===k||k===r.JwtSecretUpdateStatus.Updated,z=null!==(t=null==v?void 0:v.service_api_keys)&&void 0!==t?t:[],A=0===z.length;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.Z,{title:!s&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h5",{className:"text-base",children:"Project API Keys"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Your API is secured behind an API gateway which requires an API Key for every request.",(0,n.jsx)("br",{}),"You can use the keys below in the Supabase client libraries.",(0,n.jsx)("br",{})]})]}),children:[S?(0,n.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,n.jsx)(p.Z,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Retrieving API keys"})]}):C?j||w?(0,n.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,n.jsx)(m.Z,{size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:j?"Failed to retrieve API keys":"Failed to update JWT secret"})]}):A||b||N?(0,n.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,n.jsx)(p.Z,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:b||A?"Retrieving API keys":"JWT secret is being updated"})]}):z.map((e,t)=>{var a,i;return(0,n.jsx)(o.Z.Content,{className:t>=1&&"border-t border-panel-border-interior-light [[data-theme*=dark]_&]:border-panel-border-interior-dark",children:(0,n.jsx)(h.Z,{readOnly:!0,disabled:!0,layout:"horizontal",className:"input-mono",label:(0,n.jsxs)(n.Fragment,{children:[null===(a=e.tags)||void 0===a?void 0:a.split(",").map((e,t)=>(0,n.jsx)("code",{className:"text-xs text-code",children:e},"".concat(e).concat(t))),"service_role"===e.tags&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("code",{className:"text-xs text-code !bg-destructive !text-white !border-destructive",children:"secret"})}),"anon"===e.tags&&(0,n.jsx)("code",{className:"text-xs text-code",children:"public"})]}),copy:C&&_,reveal:"anon"!==e.tags&&C&&_,value:C?k===r.JwtSecretUpdateStatus.Failed?"JWT secret update failed, new API key may have issues":k===r.JwtSecretUpdateStatus.Updating?"Updating JWT secret...":null!==(i=null==e?void 0:e.api_key)&&void 0!==i?i:"You need additional permissions to view API keys":"You need additional permissions to view API keys",onChange:()=>{},descriptionText:"service_role"===e.tags?"This key has the ability to bypass Row Level Security. Never share it publicly. If leaked, generate a new JWT secret immediately. "+(s?"Prefer using Publishable API keys instead.":""):"This key is safe to use in a browser if you have enabled Row Level Security for your tables and configured policies. "+(s?"Prefer using Secret API keys instead.":"")})},e.api_key)}):(0,n.jsxs)("div",{className:"flex items-center py-8 px-8 space-x-2",children:[(0,n.jsx)(m.Z,{size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"You don't have permission to view API keys. These keys restricted to users with higher access levels."})]}),f?g?(0,n.jsx)(o.Z.Notice,{className:"border-t",title:"API keys have moved",badgeLabel:"Changelog",description:"\n  `anon` and `service_role` API keys can now be replaced with `publishable` and `secret` API keys.\n  ",href:"https://github.com/orgs/supabase/discussions/29260",buttonText:"Read the announcement"}):(0,n.jsx)(o.Z.Notice,{className:"border-t",title:"New API keys coming Q4 2024",description:"\n`anon` and `service_role` API keys will be changing to `publishable` and `secret` API keys.\n",href:"https://github.com/orgs/supabase/discussions/29260",buttonText:"Read the announcement"}):null]})})}},98767:function(e,t,s){"use strict";s.d(t,{D:function(){return n.Z},m:function(){return h}});var n=s(10139),a=s(97458),r=s(7406),i=s(19369),o=s(76687),l=s(73512),c=s(49510),d=s(67704),u=s(93578),p=s(38391),m=s(60661),h=()=>{var e,t,s,n;let{ref:h}=(0,l.UO)(),{data:x,isLoading:g,isError:v}=(0,p.zR)({projectRef:h}),{data:j,isError:b}=(0,u.s)({projectRef:h}),{data:y,isError:w,isLoading:N}=(0,d.t)({projectRef:h}),k=null==y?void 0:y.jwtSecretUpdateStatus,S=void 0===k||k===r.JwtSecretUpdateStatus.Updated,C=null!==(s=null==j?void 0:j.jwt_secret)&&void 0!==s?s:"",_=null!==(n=null==x?void 0:null===(e=x.app_config)||void 0===e?void 0:e.protocol)&&void 0!==n?n:"https",z=null==x?void 0:null===(t=x.app_config)||void 0===t?void 0:t.endpoint,A=z?"".concat(_,"://").concat(z):"-";return(0,a.jsx)(f,{children:v||b||w?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,a.jsx)(i.Z,{size:16,strokeWidth:1.5}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:v||b?"Failed to retrieve configuration":"Failed to update JWT secret"})]}):g||b||N?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,a.jsx)(o.Z,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:g?"Retrieving API keys":"JWT secret is being updated"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z.Content,{children:(0,a.jsx)(m.Z,{label:"URL",readOnly:!0,copy:!0,disabled:!0,className:"input-mono",value:A,descriptionText:"A RESTful endpoint for querying and managing your database.",layout:"horizontal"})}),(0,a.jsx)(c.Z.Content,{className:"border-t border-panel-border-interior-light [[data-theme*=dark]_&]:border-panel-border-interior-dark",children:(0,a.jsx)(m.Z,{label:"JWT Secret",readOnly:!0,copy:S,reveal:S,disabled:!0,value:k===r.JwtSecretUpdateStatus.Failed?"JWT secret update failed":k===r.JwtSecretUpdateStatus.Updating?"Updating JWT secret...":C,className:"input-mono",descriptionText:"Used to decode your JWTs. You can also use this to mint your own JWTs.",layout:"horizontal"})})]})})};let f=e=>{let{children:t}=e;return(0,a.jsx)(c.Z,{title:(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsx)("h5",{className:"text-base",children:"Project Configuration"})}),children:t})}},19013:function(e,t,s){"use strict";s.d(t,{_:function(){return ei},L:function(){return eo}});var n=s(97458),a=s(64714),r=s(87434),i=s(52983),o=s(42599),l=s(40195),c=s(38733),d=s(73954),u=s(34549),p=s(73512),m=s(12425),h=s(54669),f=s(32672),x=s(49736);let g=e=>{let t;if(!e)return[];let s=/@set\s+(\w+)(?::([^=]+))?\s*=\s*([^;\n]+)/g,n={};for(;null!==(t=s.exec(e));){let e,s;let[a,r,i,o]=t;if(!r||!(null==o?void 0:o.trim()))continue;let l=null==i?void 0:i.trim();l&&(l.includes("|")?(s=l.split("|").map(e=>e.trim()),e="enum"):e=l.trim()),n[r]={value:o.trim(),type:e,possibleValues:s}}let a=/:(\w+)/g,r={},i=new Set;for(;null!==(t=a.exec(e));){let[e,s]=t;r[s]=(r[s]||0)+1,i.add(s)}return Array.from(i).map(e=>{var t,s,a,i;return{name:e,value:(null===(t=n[e])||void 0===t?void 0:t.value)||"",defaultValue:null===(s=n[e])||void 0===s?void 0:s.value,type:null===(a=n[e])||void 0===a?void 0:a.type,possibleValues:null===(i=n[e])||void 0===i?void 0:i.possibleValues,occurrences:r[e]}})};var v=s(86665),j=s(43633),b=s(7879),y=s(72920),w=s(28179),N=s(90940),k=s(2861),S=s(99721),C=s(32605),_=s(26419),z=s(12753),A=s(22912),L=s(87404);let E=(0,s(31706).j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors data-[state=on]:bg-accent data-[state=on]:bg-surface-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background bg-surface-200 hover:bg-surface-300 px-3 py-1 h-auto text-foreground transition-all",{variants:{variant:{default:"bg-transparent",outline:"bg-transparent border border-control hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}});i.forwardRef((e,t)=>{let{className:s,variant:a,size:r,...i}=e;return(0,n.jsx)(L.f,{ref:t,className:(0,j.cn)(E({variant:a,size:r,className:s})),...i})}).displayName=L.f.displayName;let R=i.createContext({size:"default",variant:"default"}),U=i.forwardRef((e,t)=>{let{className:s,variant:a,size:r,children:i,...o}=e;return(0,n.jsx)(A.fC,{ref:t,className:(0,j.cn)("flex items-center justify-center gap-1",s),...o,children:(0,n.jsx)(R.Provider,{value:{variant:a,size:r},children:i})})});U.displayName=A.fC.displayName;let P=i.forwardRef((e,t)=>{let{className:s,children:a,variant:r,size:o,...l}=e,c=i.useContext(R);return(0,n.jsx)(A.ck,{ref:t,className:(0,j.cn)(E({variant:c.variant||r,size:c.size||o}),s),...l,children:a})});P.displayName=A.ck.displayName;var Z=s(68981),I=s(7257),T=s(5562);let F=e=>{let{columns:t,view:s,isChart:a,lockColumns:r=!1,chartConfig:i,changeView:o,updateChartConfig:l}=e;return(0,n.jsxs)(z.J2,{modal:!1,children:[(0,n.jsx)(z.xo,{asChild:!0,children:(0,n.jsx)(k.u,{id:"help-popover-button",type:"text",className:"px-1",icon:(0,n.jsx)(S.Z,{size:14}),tooltip:{content:{side:"bottom",text:"View data"}}})}),(0,n.jsx)(z.yk,{side:"bottom",align:"center",className:"w-[240px] p-3",children:(0,n.jsxs)("form",{className:"grid gap-2",children:[(0,n.jsxs)(U,{type:"single",value:s,className:"w-full",onValueChange:e=>{e&&o(e)},children:[(0,n.jsxs)(P,{className:"w-full",value:"table","aria-label":"Show as table",children:[(0,n.jsx)(C.Z,{className:"h-4 w-4"}),(0,n.jsx)("p",{className:"text-xs ml-2",children:"As table"})]}),(0,n.jsxs)(P,{className:"w-full",value:"chart","aria-label":"Show as chart",children:[(0,n.jsx)(_.Z,{className:"h-4 w-4"}),(0,n.jsx)("p",{className:"text-xs ml-2",children:"As chart"})]})]}),a&&i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.Ph,{disabled:r,value:null==i?void 0:i.xKey,onValueChange:e=>l({...i,xKey:e}),children:[(0,n.jsxs)(Z.i4,{className:"text-left",children:["X Axis ",(null==i?void 0:i.xKey)&&"- ".concat(i.xKey)]}),(0,n.jsx)(Z.Bw,{children:(0,n.jsx)(Z.DI,{children:t.map(e=>(0,n.jsx)(Z.Ql,{value:e,children:e},e))})})]}),(0,n.jsxs)(Z.Ph,{disabled:r,value:null==i?void 0:i.yKey,onValueChange:e=>l({...i,yKey:e}),children:[(0,n.jsxs)(Z.i4,{className:"text-left",children:["Y Axis ",(null==i?void 0:i.yKey)&&"- ".concat(i.yKey)]}),(0,n.jsx)(Z.Bw,{children:(0,n.jsx)(Z.DI,{children:t.map(e=>(0,n.jsx)(Z.Ql,{value:e,children:e},e))})})]}),(0,n.jsx)("div",{className:"*:flex *:gap-2 *:items-center grid gap-2 *:text-foreground-light *:p-1.5 *:pl-0",children:(0,n.jsxs)(I._,{htmlFor:"cumulative",children:[(0,n.jsx)(T.X,{id:"cumulative",checked:null==i?void 0:i.cumulative,onClick:()=>l({...i,cumulative:!(null==i?void 0:i.cumulative)})}),"Cumulative"]})})]})]})})]})};var O=s(48631),D=s(32691),q=s(90777),W=s(75307),V=s(59884),H=s(83145),M=s.n(H),B=s(22332),Y=s(15011),K=s(9881),G=s(41212),Q=s(63640);let J=e=>{let{id:t,sql:s,title:a,className:r,type:i="text"}=e,o=(0,D.useRouter)(),{ref:l}=(0,p.UO)(),{newQuery:c}=(0,W.ZP)(),d=(0,B.B0)(),{setEditorPanel:u}=(0,G.WZ)(),m=o.pathname.includes("/sql"),h=o.pathname.endsWith("/sql"),f=(0,Q.uL)(),x={content:{side:"bottom",text:"Edit in SQL Editor"}},g=(0,K.l)(),{mutate:v}=(0,V.a)(),b=()=>{s&&(m?d.setDiffContent(s,q.U.Addition):c(s,a))};return void 0!==t?(0,n.jsx)(k.u,{asChild:!0,type:i,size:"tiny",className:(0,j.cn)("w-7 h-7",r),icon:(0,n.jsx)(O.Z,{size:14}),tooltip:x,children:(0,n.jsx)(M(),{href:"/project/".concat(l,"/sql/").concat(t)})}):!m||h?(0,n.jsx)(k.u,{type:i,size:"tiny",className:(0,j.cn)("w-7 h-7",r),icon:(0,n.jsx)(O.Z,{size:14}),onClick:()=>{var e;f?u({open:!0,initialValue:s}):b(),v({action:"assistant_edit_in_sql_editor_clicked",properties:{isInSQLEditor:m,isInNewSnippet:h},groups:{project:null!=l?l:"Unknown",organization:null!==(e=null==g?void 0:g.slug)&&void 0!==e?e:"Unknown"}})},tooltip:x}):(0,n.jsxs)(Y.h_,{children:[(0,n.jsx)(Y.$F,{asChild:!0,children:(0,n.jsx)(k.u,{type:i,size:"tiny",disabled:!s,className:(0,j.cn)("w-7 h-7",r),icon:(0,n.jsx)(O.Z,{size:14}),tooltip:s?x:{content:{side:"bottom",text:void 0}}})}),!!s&&(0,n.jsxs)(Y.AW,{className:"w-36",children:[(0,n.jsx)(Y.Xi,{onClick:()=>d.setDiffContent(s,q.U.Addition),children:"Insert code"}),(0,n.jsx)(Y.Xi,{onClick:()=>d.setDiffContent(s,q.U.Modification),children:"Replace code"}),(0,n.jsx)(Y.Xi,{onClick:()=>d.setDiffContent(s,q.U.NewSnippet),children:"Create new snippet"})]})]})};var X=s(15338),$=s(42723),ee=s(98926),et=s(93840),es=s(53486);let en=e=>{let{parameters:t,parameterValues:s={},onSubmit:a,onChange:r}=e,[o,l]=(0,i.useState)(t.reduce((e,t)=>{var n,a;return{...e,[t.name]:null!==(a=null!==(n=s[t.name])&&void 0!==n?n:t.defaultValue)&&void 0!==a?a:""}},{}));(0,i.useEffect)(()=>{l(t.reduce((e,t)=>{var n,a;return{...e,[t.name]:null!==(a=null!==(n=s[t.name])&&void 0!==n?n:t.defaultValue)&&void 0!==a?a:""}},{}))},[t,s]);let c=(e,t)=>{let s={...o,[e]:t};l(s),null==r||r(s)},d=e=>{var t,a;let r=null!==(a=null!==(t=o[e.name])&&void 0!==t?t:s[e.name])&&void 0!==a?a:"";return"date"===e.type?r&&!isNaN(new Date(r).getTime())?(0,n.jsx)(ee.M,{selectsRange:!1,from:r,to:r,onChange:t=>{t&&t.to?c(e.name,t.to):c(e.name,"")},children:(0,n.jsx)("span",{children:r?(0,X.default)(new Date(r),"dd MMM"):"Pick a date"})}):(0,n.jsx)(et.I,{size:"tiny",value:r,onChange:t=>c(e.name,t.target.value)}):"enum"===e.type&&e.possibleValues?(0,n.jsxs)(Z.Ph,{value:r,onValueChange:t=>c(e.name,t),children:[(0,n.jsx)(Z.i4,{className:"h-8",children:(0,n.jsx)(Z.ki,{placeholder:"Select value"})}),(0,n.jsx)(Z.Bw,{children:e.possibleValues.map(e=>(0,n.jsx)(Z.Ql,{value:e,children:e},e))})]}):(0,n.jsx)(et.I,{size:"tiny",value:r,onChange:t=>c(e.name,t.target.value)})};return(0,n.jsxs)(z.J2,{modal:!1,children:[(0,n.jsx)(z.xo,{asChild:!0,children:(0,n.jsx)(es.z,{icon:(0,n.jsx)($.Z,{size:14}),type:"text",size:"tiny",className:"w-7 h-7"})}),(0,n.jsx)(z.yk,{side:"bottom",align:"end",className:"w-[300px] p-4",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsxs)(I._,{className:"flex items-center gap-2",children:[e.name,e.occurrences>1&&(0,n.jsxs)("span",{className:"text-xs text-foreground-light",children:["(used ",e.occurrences," times)"]})]}),d(e)]},e.name))}),a&&(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(es.z,{type:"primary",size:"tiny",onClick:()=>a(o),children:"Apply changes"})})]})})]})},ea=(e,t)=>{var s;return(null==e?void 0:null===(s=e.rows)||void 0===s?void 0:s.length)?e.rows.reduce((e,s)=>{let n=e[e.length-1]||{};return[...e,{...s,[t.yKey]:(n[t.yKey]||0)+s[t.yKey]}]},[]):[]};var er=s(23746);let ei={type:"bar",cumulative:!1,xKey:"",yKey:"",showLabels:!1,showGrid:!1,view:"table"},eo=e=>{let{id:t,label:s,sql:S,chartConfig:C=ei,maxHeight:_=250,queryHeight:z,parameterValues:A,actions:L,showSql:E=!1,isChart:R=!1,isLoading:U=!1,runQuery:P=!1,lockColumns:Z=!1,draggable:I=!1,isRefreshing:T=!1,disableRunIfMutation:O=!1,noResultPlaceholder:D=null,tooltip:q,onRunQuery:W,onSetParameter:V,onUpdateChartConfig:H,onDragStart:M}=e,{ref:B}=(0,p.UO)(),{project:Y}=(0,f.d2)(),[K,G]=(0,i.useState)(C),{xKey:Q,yKey:X,view:$="table"}=K,[ee,et]=(0,i.useState)(E),[es,eo]=(0,i.useState)(),[el,ec]=(0,i.useState)({}),[ed,eu]=(0,i.useState)(),ep=(0,i.useMemo)(()=>S?g(S):[],[S]),em=(0,N.mU)(null!=S?S:""),{mutate:eh,isLoading:ef}=(0,x.r)({onSuccess:e=>eo(e.result)}),ex=()=>{if(S&&!U){if(!em)return eu((0,N.De)(S)?"hasUnknownFunctions":"hasWriteOperation");try{eh({projectRef:B,connectionString:null==Y?void 0:Y.connectionString,sql:S})}catch(e){u.Am.error("Failed to execute query: ".concat(e.message))}}};return(0,i.useEffect)(()=>{G(C)},[C]),(0,i.useEffect)(()=>{S&&V&&V(g(S))},[S]),(0,i.useEffect)(()=>{S&&!U&&P&&(0,N.mU)(S)&&Y&&ex()},[S,U,P,Y]),(0,i.useEffect)(()=>{T&&ex()},[T]),(0,n.jsxs)(m.b,{draggable:I,showDragHandle:I,tooltip:q,loading:ef,onDragStart:e=>null==M?void 0:M(e),icon:(0,n.jsx)(v.KK,{size:18,strokeWidth:1.5,className:(0,j.cn)("transition-colors fill-foreground-muted group-aria-selected:fill-foreground","w-5 h-5 shrink-0 grow-0 -ml-0.5")}),label:s,actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.u,{type:"text",size:"tiny",className:"w-7 h-7",icon:(0,n.jsx)(a.Z,{size:14}),onClick:()=>et(!ee),tooltip:{content:{side:"bottom",text:ee?"Hide query":"Show query"}}}),es&&(0,n.jsxs)(n.Fragment,{children:[ep.length>0&&(0,n.jsx)(en,{parameters:ep,parameterValues:el,onSubmit:ec}),R&&(0,n.jsx)(F,{view:$,isChart:R,lockColumns:Z,chartConfig:K,columns:Object.keys(es[0]||{}),changeView:e=>{H&&H({chartConfig:{view:e}}),G({...K,view:e})},updateChartConfig:e=>{H&&H({chartConfig:e}),G(e)}})]}),(0,n.jsx)(J,{id:t,title:s,sql:S}),(em||!em&&!O)&&(0,n.jsx)(k.u,{type:"text",size:"tiny",className:"w-7 h-7",icon:(0,n.jsx)(r.Z,{size:14}),loading:ef||U,disabled:U,onClick:()=>{ex(),S&&(0,N.mU)(S)&&(null==W||W("select"))},tooltip:{content:{side:"bottom",className:"max-w-56 text-center",text:ef?(0,n.jsx)("p",{children:"Query is running. You may cancel ongoing queries via the [SQL Editor](/project/".concat(B,"/sql?viewOngoingQueries=true).")}):"Run query"}}}),L]}),children:[!!ed&&(0,n.jsx)(er.Z,{warningType:ed,className:"border-b",onCancel:()=>eu(void 0),onConfirm:()=>{S&&(eu(void 0),eh({projectRef:B,connectionString:null==Y?void 0:Y.connectionString,sql:S}),null==W||W("mutation"))},disabled:!S}),ef&&void 0===es&&(0,n.jsx)("div",{className:"p-3 w-full",children:(0,n.jsx)(w.Z,{})}),ee&&(0,n.jsx)("div",{className:(0,j.cn)("shrink-0 w-full max-h-96 overflow-y-auto",{"border-b":void 0!==es}),style:{height:z?"".concat(z,"px"):void 0},children:(0,n.jsx)(b.d,{hideLineNumbers:!0,wrapLines:!1,value:S,language:"sql",className:(0,j.cn)("max-w-none block !bg-transparent !py-3 !px-3.5 prose dark:prose-dark border-0 text-foreground !rounded-none w-full","[&>code]:m-0 [&>code>span]:text-foreground")})}),"chart"===$&&void 0!==es?(0,n.jsx)(n.Fragment,{children:0===(null!=es?es:[]).length?(0,n.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,n.jsx)("p",{className:"text-foreground-light text-xs",children:"No results returned from query"})}):Q&&X?(0,n.jsx)("div",{className:(0,j.cn)("flex-1 w-full"),children:(0,n.jsx)(y.BO,{className:"aspect-auto px-3 py-2",config:{},style:{height:_?"".concat(_,"px"):void 0,minHeight:_?"".concat(_,"px"):void 0},children:(0,n.jsxs)(o.v,{accessibilityLayer:!0,margin:{left:0,right:0},data:K.cumulative?ea({rows:null!=es?es:[]},K):es,children:[(0,n.jsx)(l.q,{vertical:!1}),(0,n.jsx)(c.K,{dataKey:Q,tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32}),(0,n.jsx)(y.h7,{content:(0,n.jsx)(y.dg,{className:"w-[150px]"})}),(0,n.jsx)(d.$,{dataKey:X,fill:"var(--chart-1)",radius:4})]})})}):(0,n.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,n.jsx)("p",{className:"text-foreground-light text-xs",children:"Select columns for the X and Y axes"})})}):(0,n.jsx)(n.Fragment,{children:es?(0,n.jsx)("div",{className:(0,j.cn)("flex-1 w-full overflow-auto relative"),style:{maxHeight:_?"".concat(_,"px"):void 0},children:(0,n.jsx)(h.Z,{rows:es})}):ef?null:D})]})}},73936:function(e,t,s){"use strict";s.d(t,{x:function(){return n}});let n={is_readonly_mode_enabled:{bannerContent:{warning:{title:"Your project is currently in read-only mode and is no longer accepting write requests",description:"You will need to manually override read-only mode and reduce the disk size to below 95%"},critical:{title:"Your project is currently in read-only mode and is no longer accepting write requests",description:"You will need to manually override read-only mode and reduce the disk size to below 95%"}},cardContent:{warning:{title:"Project is in read-only mode",description:"Database is no longer accepting write requests."},critical:{title:"Project is in read-only mode",description:"Database is no longer accepting write requests."}},docsUrl:"https://supabase.com/docs/guides/platform/database-size#disabling-read-only-mode",buttonText:"Learn more",metric:"read_only"},disk_io_exhaustion:{bannerContent:{warning:{title:"Your project is about to deplete its Disk IO Budget, and may become unresponsive once fully exhausted",description:"You will need to optimize your performance or upgrade your compute. Check the usage page for more recent and detailed statistics."},critical:{title:"Your project has depleted its Disk IO Budget, and may become unresponsive",description:"You will need to optimize your performance or upgrade your compute. Check the usage page for more recent and detailed statistics."}},cardContent:{warning:{title:"Project is depleting its Disk IO Budget",description:"It may become unresponsive if fully exhausted"},critical:{title:"Project has depleted its Disk IO Budget",description:"It may become unresponsive"}},docsUrl:"https://supabase.com/docs/guides/troubleshooting/exhaust-disk-io",buttonText:"Learn more",metric:"disk_io"},disk_space_exhaustion:{bannerContent:{warning:{title:"Your project is about to exhaust its available disk space, and may become unresponsive once fully exhausted",description:"You can opt to increase your disk size up to 200GB on the database settings page."},critical:{title:"Your project has exhausted its available disk space, and may become unresponsive",description:"You can opt to increase your disk size up to 200GB on the database settings page."}},cardContent:{warning:{title:"Project is exhausting its available disk space",description:"It may become unresponsive if fully exhausted"},critical:{title:"Project has exhausted its available disk space",description:"It may become unresponsive"}},docsUrl:"https://supabase.com/docs/guides/platform/database-size#disk-management",buttonText:void 0,metric:"disk_space"},cpu_exhaustion:{bannerContent:{warning:{title:"Your project is currently facing high CPU usage, and its performance is affected",description:"You will need to optimize your performance or upgrade your compute. Check the usage page for more recent and detailed statistics."},critical:{title:"Your project's CPU usage is at 100% and its performance is affected",description:"You will need to optimize your performance or upgrade your compute. Check the usage page for more recent and detailed statistics."}},cardContent:{warning:{title:"Project has high CPU usage",description:"Performance is affected"},critical:{title:"Project CPU usage is at 100%",description:"Performance is affected"}},docsUrl:"https://supabase.com/docs/guides/troubleshooting/high-cpu-usage",buttonText:"Learn more",metric:"cpu"},memory_and_swap_exhaustion:{bannerContent:{warning:{title:"Your project is currently facing high memory usage, and its performance is affected",description:"You will need to optimize your performance or upgrade your compute. Check the usage page for more recent and detailed statistics."},critical:{title:"Your project's memory usage is at 100%, and its performance is affected",description:"You will need to optimize your performance or upgrade your compute. Check the usage page for more recent and detailed statistics."}},cardContent:{warning:{title:"Project has high memory usage",description:"Performance is affected"},critical:{title:"Project memory usage is at 100%",description:"Performance is affected"}},docsUrl:"https://supabase.com/docs/guides/troubleshooting/exhaust-ram",buttonText:"Learn more",metric:"ram"},auth_rate_limit_exhaustion:{bannerContent:{warning:{title:"Your project has exceeded email rate limits in the past 24 hours and may not reliably send auth related emails to users",description:"Set up a custom SMTP and adjust rate limits where necessary to ensure that emails are sent out reliably."},critical:{title:void 0,description:void 0}},cardContent:{warning:{title:"Your project has exceeded email rate limits",description:"You will need to set up a custom SMTP provider and adjust rate limits where necessary"},critical:{title:void 0,description:void 0}},docsUrl:"https://supabase.com/docs/guides/platform/going-into-prod#auth-rate-limits",buttonText:"Enable Custom SMTP",metric:"auth_email_rate_limit"},multiple_resource_warnings:{bannerContent:{warning:{title:"Your project is currently exhausting multiple resources, and its performance is affected",description:"Check which resources are reaching their threshold on your project's usage page."},critical:{title:"Your project has exhausted multiple resources, and its performance is affected",description:"Check which resources have reached their threshold on your project's usage page."}},cardContent:{warning:{title:"Project is exhausting multiple resources",description:"Performance is affected."},critical:{title:"Project has exhausted multiple resources",description:"Performance is affected."}},docsUrl:void 0,buttonText:"Check usage",metric:null}}},11749:function(e,t,s){"use strict";s.d(t,{L:function(){return a}});var n=s(73936);let a=(e,t,s)=>{var a,r;if("is_readonly_mode_enabled"===t)return n.x.is_readonly_mode_enabled.cardContent.warning;let i=e[t];if("string"==typeof i)return null===(r=n.x[t])||void 0===r?void 0:null===(a=r[s])||void 0===a?void 0:a[i]}},23746:function(e,t,s){"use strict";var n=s(97458),a=s(53486),r=s(27429);t.Z=e=>{let{warningType:t,onCancel:s,onConfirm:i,disabled:o=!1,className:l}=e;return(0,n.jsxs)(r.J,{type:"warning",className:"mb-0 rounded-none border-0 shrink-0 bg-background-100 ".concat(l),children:[(0,n.jsxs)("p",{children:["hasWriteOperation"===t?"This query contains write operations.":"This query involves running a function."," ","Are you sure you want to execute it?"]}),(0,n.jsx)("p",{className:"text-foreground-light",children:"Make sure you are not accidentally removing something important."}),(0,n.jsxs)("div",{className:"flex justify-stretch mt-2 gap-2",children:[(0,n.jsx)(a.z,{type:"outline",size:"tiny",className:"w-full flex-1",onClick:s,children:"Cancel"}),(0,n.jsx)(a.z,{type:"danger",size:"tiny",disabled:o,className:"w-full flex-1",onClick:i,children:"Run"})]})]})}},26369:function(e,t,s){"use strict";var n=s(97458),a=s(43633);t.Z=e=>{let{options:t,width:s=50,activeOption:r,onClickOption:i,borderOverride:o="border-stronger"}=e,l=e=>"absolute top-0 z-1 text-xs inline-flex h-full items-center justify-center font-medium\n    ".concat(e?"hover:text-foreground-light hover:text-foreground":"hover:text-foreground"," hover:text-foreground focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue\n    transition ease-in-out duration-150");return(0,n.jsxs)("div",{className:"relative border ".concat(o," rounded-md h-7"),style:{padding:1,width:(s+1)*2},children:[(0,n.jsx)("span",{style:{width:s,translate:r===t[1]?"0px":"".concat(s-2,"px")},"aria-hidden":"true",className:(0,a.cn)("z-0 inline-block rounded h-full bg-overlay-hover shadow transform","transition-all ease-in-out border border-strong")}),t.map((e,t)=>(0,n.jsx)("span",{style:{width:s+1},className:"\n              ".concat(r===e?"text-foreground":"text-foreground-light","\n              ").concat(0===t?"right-0":"left-0","\n              ").concat(l(r===e),"\n              cursor-pointer\n            "),onClick:()=>i(e),children:(0,n.jsx)("span",{className:(0,a.cn)("capitalize hover:text-foreground",r===e?"text-foreground":"text-foreground-light"),children:e})},"toggle_".concat(t)))]})}},14723:function(e,t,s){"use strict";s.d(t,{g:function(){return c}});var n=s(64618),a=s(34549),r=s(129),i=s(56535),o=s(92753);async function l(e){let t,{sql:s}=e,n=await (0,r.oT)({"Content-Type":"application/json"}),a=await fetch("".concat(i.GW,"/api/ai/sql/title"),{headers:n,method:"POST",body:JSON.stringify({sql:s})});try{t=await a.json()}catch(e){}if(!a.ok)throw new o.V(null==t?void 0:t.message,a.status);return t}let c=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.D)(e=>l(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?a.Am.error("Failed to generate title: ".concat(e.message)):t(e,s,n)},...s})}},44309:function(e,t,s){"use strict";s.d(t,{o:function(){return n}});let n={users:(e,t)=>["projects",e,"users",...t?[t]:[]],usersInfinite:(e,t)=>["projects",e,"users-infinite",...t?[t].filter(Boolean):[]],usersCount:(e,t)=>["projects",e,"users-count",...t?[t].filter(Boolean):[]],authConfig:e=>["projects",e,"auth-config"],accessToken:()=>["access-token"]}},69938:function(e,t,s){"use strict";s.d(t,{J:function(){return d}});var n=s(36457),a=s(64618),r=s(34549),i=s(129),o=s(24448),l=s(21462);async function c(e){let{projectRef:t,branchName:s,gitBranch:n,region:a}=e,{data:r,error:o}=await (0,i.v_)("/v1/projects/{ref}/branches",{params:{path:{ref:t}},body:{branch_name:s,git_branch:n,region:a}});return o&&(0,i.S3)(o),r}let d=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.NL)();return(0,a.D)(e=>c(e),{async onSuccess(t,s,n){let{projectRef:a}=s;await i.invalidateQueries(l.x.list(a)),await i.invalidateQueries(o.i.detail(a)),await i.invalidateQueries(o.i.list()),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?r.Am.error("Failed to create branch: ".concat(e.message)):t(e,s,n)},...s})}},67704:function(e,t,s){"use strict";s.d(t,{t:function(){return c}});var n=s(7406),a=s(36457),r=s(28894),i=s(129),o=s(61569);async function l(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:a}=await (0,i.U2)("/platform/props/project/{ref}/jwt-secret-update-status",{params:{path:{ref:s}},signal:t});a&&(0,i.S3)(a);let r=n.jwtSecretUpdateStatus;return r?{changeTrackingId:r.change_tracking_id,jwtSecretUpdateError:r.error,jwtSecretUpdateProgress:r.progress,jwtSecretUpdateStatus:r.status}:null}let c=function(e){let{projectRef:t}=e,{enabled:s=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,a.NL)();return(0,r.a)(o.U.jwtSecretUpdatingStatus(t),e=>{let{signal:s}=e;return l({projectRef:t},s)},{enabled:s&&void 0!==t,refetchInterval(e){if(!e)return!1;let{jwtSecretUpdateStatus:t}=e;return t===n.JwtSecretUpdateStatus.Updating&&1e3},onSuccess(){c.invalidateQueries(o.U.postgrest(t))},...i})}},93578:function(e,t,s){"use strict";s.d(t,{s:function(){return o}});var n=s(28894),a=s(129),r=s(61569);async function i(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:r}=await (0,a.U2)("/platform/projects/{ref}/config/postgrest",{params:{path:{ref:s}},signal:t});return r&&(0,a.S3)(r),n}let o=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.U.postgrest(t),e=>{let{signal:s}=e;return i({projectRef:t},s)},{enabled:s&&void 0!==t,...a})}},97037:function(e,t,s){"use strict";s.d(t,{D:function(){return d}});var n=s(28894),a=s(73512),r=s(129),i=s(289),o=s(72400),l=s(61569);async function c(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:a}=await (0,r.U2)("/v1/projects/{ref}/upgrade/eligibility",{params:{path:{ref:s}},signal:t});return a&&(0,r.S3)(a),n}let d=function(e){let{projectRef:t}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,i.N$)(t);return(0,n.a)(l.U.upgradeEligibility(t),e=>{let{signal:s}=e;return c({projectRef:t},s)},{enabled:s&&void 0!==d&&d.status===o.S.ACTIVE_HEALTHY&&void 0!==t&&a.Qy,...r})}},50847:function(e,t,s){"use strict";s.d(t,{h:function(){return d}});var n=s(7406),a=s(36457),r=s(28894),i=s(129),o=s(56535),l=s(61569);async function c(e,t){let{projectRef:s,trackingId:n}=e;if(!s)throw Error("projectRef is required");let a={};n&&(a.tracking_id=n);let{data:r,error:o}=await (0,i.U2)("/v1/projects/{ref}/upgrade/status",{params:{path:{ref:s},query:a},signal:t});return o&&(0,i.S3)(o),r}let d=function(e){let{projectRef:t,projectStatus:s,trackingId:i}=e,{enabled:d=!0,...u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=(0,a.NL)();return(0,r.a)(l.U.upgradeStatus(t),e=>{let{signal:s}=e;return c({projectRef:t,trackingId:i},s)},{enabled:d&&void 0!==t,refetchInterval(e){var t,a;return!!e&&(s===o.S.UPGRADING&&(null===(t=e.databaseUpgradeStatus)||void 0===t?void 0:t.status)!==n.h.Upgrading||(null===(a=e.databaseUpgradeStatus)||void 0===a?void 0:a.status)===n.h.Upgrading)&&5e3},onSuccess(e){var s;(null===(s=e.databaseUpgradeStatus)||void 0===s?void 0:s.status)===n.h.Upgraded&&p.invalidateQueries(l.U.upgradeEligibility(t))},...u})}},42667:function(e,t,s){"use strict";s.d(t,{R:function(){return c},T:function(){return l}});var n=s(36457),a=s(64618),r=s(34549),i=s(129),o=s(97526);async function l(e,t){let{projectRef:s,payload:n}=e,{data:a,error:r}=await (0,i.gz)("/platform/projects/{ref}/content",{params:{path:{ref:s}},body:n,headers:{Version:"2"},signal:t});return r&&(0,i.S3)(r),a}let c=function(){let{onError:e,onSuccess:t,invalidateQueriesOnSuccess:s=!0,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,n.NL)();return(0,a.D)(e=>l(e),{async onSuccess(e,n,a){let{projectRef:r}=n;s&&await c.invalidateQueries(o.$.allContentLists(r)),await (null==t?void 0:t(e,n,a))},async onError(t,s,n){void 0===e?r.Am.error("Failed to insert content: ".concat(t.message)):e(t,s,n)},...i})}},97526:function(e,t,s){"use strict";s.d(t,{$:function(){return n}});let n={allContentLists:e=>["projects",e,"content"],infiniteList:(e,t)=>["projects",e,"content-infinite",t],list:(e,t)=>["projects",e,"content",t],sqlSnippets:(e,t)=>["projects",e,"content","sql",t].filter(Boolean),folders:(e,t)=>["projects",e,"content","folders",t].filter(Boolean),folderContents:(e,t,s)=>["projects",e,"content","folders",t,s].filter(Boolean),resource:(e,t)=>["projects",e,"content",t],count:(e,t,s)=>["projects",e,"content","count",t,s].filter(Boolean)}},39871:function(e,t,s){"use strict";s.d(t,{P:function(){return c},b:function(){return l}});var n=s(36457),a=s(64618),r=s(34549),i=s(129),o=s(97526);async function l(e,t){let{projectRef:s,name:n,parentId:a}=e,r={name:n};a&&(r.parentId=a);let{data:o,error:l}=await (0,i.v_)("/platform/projects/{ref}/content/folders",{params:{path:{ref:s}},body:r,signal:t});if(l)throw(0,i.S3)(l);return o}let c=function(){let{onError:e,onSuccess:t,invalidateQueriesOnSuccess:s=!0,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,n.NL)();return(0,a.D)(e=>l(e),{async onSuccess(e,n,a){let{projectRef:r}=n;s&&await c.invalidateQueries(o.$.folders(r)),await (null==t?void 0:t(e,n,a))},async onError(t,s,n){void 0===e?r.Am.error("Failed to create folder: ".concat(t.message)):e(t,s,n)},...i})}},86891:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var n=s(28894),a=s(129),r=s(17164),i=s(56535),o=s(88387);async function l(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:r}=await (0,a.U2)("/v1/projects/{ref}/custom-hostname",{params:{path:{ref:s}},signal:t});if(r){var i,o;if(null===(i=r.message)||void 0===i?void 0:i.includes("not allowed to set up custom domain"))return{customDomain:null,status:"0_not_allowed"};if(null===(o=r.message)||void 0===o?void 0:o.includes("custom hostname configuration"))return{customDomain:null,status:"0_no_hostname_configured"};(0,a.S3)(r)}return{customDomain:n.data.result,status:n.status}}let c=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:c}=(0,r.F)({projectRef:t}),d=!!(null==c?void 0:c.selected_addons.find(e=>"custom_domain"===e.type));return(0,n.a)(o.A.list(t),e=>{let{signal:s}=e;return l({projectRef:t},s)},{enabled:s&&i.Qy&&void 0!==t&&d,...a})}},88387:function(e,t,s){"use strict";s.d(t,{A:function(){return n}});let n={list:e=>["projects",e,"custom-domains"]}},39310:function(e,t,s){"use strict";s.d(t,{o:function(){return n}});let n={list:e=>["projects",e,"database-extensions"]}},9610:function(e,t,s){"use strict";s.d(t,{R:function(){return n}});let n={list:(e,t)=>["projects",e,"database-policies",t].filter(Boolean)}},99345:function(e,t,s){"use strict";s.d(t,{E:function(){return n}});let n={databaseRoles:e=>["projects",e,"database-roles"]}},86710:function(e,t,s){"use strict";s.d(t,{D:function(){return n}});let n={list:e=>["projects",e,"database-triggers"],resource:(e,t)=>["projects",e,"resources",t]}},20156:function(e,t,s){"use strict";s.d(t,{s:function(){return o}});var n=s(64618),a=s(34549),r=s(129);async function i(e){let{ref:t,backup:s}=e,{data:n,error:a}=await (0,r.v_)("/platform/database/{ref}/backups/download",{params:{path:{ref:t}},body:{id:s.id,inserted_at:s.inserted_at,project_id:s.project_id,data:{},s3_bucket:"deprecated",s3_path:"deprecated",status:"deprecated"}});return a&&(0,r.S3)(a),n}let o=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.D)(e=>i(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?a.Am.error("Failed to download backup: ".concat(e.message)):t(e,s,n)},...s})}},71211:function(e,t,s){"use strict";s.d(t,{a:function(){return o}});var n=s(28894),a=s(129);let r=e=>["projects",e,"docs"];async function i(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:r}=await (0,a.U2)("/platform/projects/{ref}/api/rest",{params:{path:{ref:s}},signal:t});return r&&(0,a.S3)(r),n}let o=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r(t),e=>{let{signal:s}=e;return i({projectRef:t},s)},{enabled:s&&void 0!==t,...a})}},31527:function(e,t,s){"use strict";s.d(t,{J:function(){return l}});var n=s(28894),a=s(129),r=s(56535),i=s(64414);async function o(e,t){let{projectRef:s,slug:n}=e;if(!s)throw Error("projectRef is required");if(!n)throw Error("slug is required");let{data:r,error:i}=await (0,a.U2)("/v1/projects/{ref}/functions/{function_slug}",{params:{path:{ref:s,function_slug:n}},signal:t});return i&&(0,a.S3)(i),r}let l=function(e){let{projectRef:t,slug:s}=e,{enabled:a=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(i.f.detail(t,s),e=>{let{signal:n}=e;return o({projectRef:t,slug:s},n)},{enabled:r.Qy&&a&&void 0!==t&&void 0!==s,...l})}},56447:function(e,t,s){"use strict";s.d(t,{t:function(){return c}});var n=s(36457),a=s(64618),r=s(34549),i=s(129),o=s(64414);async function l(e){let{projectRef:t,metadata:s,files:n}=e;if(!t)throw Error("projectRef is required");let{data:a,error:r}=await (0,i.v_)("/v1/projects/{ref}/functions/deploy",{params:{path:{ref:t},query:{slug:s.name}},body:{file:n,metadata:s},bodySerializer(e){let t=new FormData;return t.append("metadata",JSON.stringify(e.metadata)),e.file.forEach(e=>{let s=new Blob([e.content],{type:"text/plain"});t.append("file",s,e.name)}),t}});return r&&(0,i.S3)(r),a}let c=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.NL)();return(0,a.D)(e=>l(e),{async onSuccess(t,s,n){let{projectRef:a}=s;await i.invalidateQueries(o.f.list(a)),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?r.Am.error("Failed to deploy edge function: ".concat(e.message)):t(e,s,n)},...s})}},51326:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var n=s(28894),a=s(129),r=s(56535),i=s(64414);async function o(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:r}=await (0,a.U2)("/v1/projects/{ref}/functions",{params:{path:{ref:s}},signal:t});return r&&(0,a.S3)(r),n}let l=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(i.f.list(t),e=>{let{signal:s}=e;return o({projectRef:t},s)},{enabled:r.Qy&&s&&void 0!==t,...a})}},64414:function(e,t,s){"use strict";s.d(t,{f:function(){return n}});let n={list:e=>["projects",e,"edge-functions"],detail:(e,t)=>["projects",e,"edge-function",t]}},50259:function(e,t,s){"use strict";s.d(t,{P:function(){return n}});let n={list:e=>["projects",e,"enumerated-types"]}},54561:function(e,t,s){"use strict";s.d(t,{s:function(){return o}});var n=s(64618),a=s(34549),r=s(129);async function i(e,t){let{connectionId:s,branchName:n}=e,{data:a,error:i}=await (0,r.U2)("/platform/integrations/github/branches/{connectionId}/{branchName}",{params:{path:{connectionId:s,branchName:n}},signal:t});return i&&(0,r.S3)(i),a}let o=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.D)(e=>i(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?a.Am.error("Failed to check Github branch: ".concat(e.message)):t(e,s,n)},...s})}},36861:function(e,t,s){"use strict";s.d(t,{H:function(){return o}});var n=s(28894),a=s(129);let r=e=>["projects",e,"open-api-spec"];async function i(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:r}=await (0,a.U2)("/platform/projects/{ref}/api/rest",{params:{path:{ref:s}},signal:t});r&&(0,a.S3)(r);let i=n.definitions?Object.entries(n.definitions).map(e=>{let[t,s]=e;return{...s,name:t,fields:Object.entries(s.properties||{}).map(e=>{let[t,s]=e;return{...s,name:t}})}}):[],o=n.paths?Object.entries(n.paths).map(e=>{let[t,s]=e;return{...s,path:t,name:t.replace("/rpc/","")}}).filter(e=>e.path.includes("/rpc")).sort((e,t)=>e.name.localeCompare(t.name)):[];return{data:n,tables:i,functions:o}}let o=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r(t),e=>{let{signal:s}=e;return i({projectRef:t},s)},{enabled:s&&void 0!==t,...a})}},74808:function(e,t,s){"use strict";s.d(t,{J:function(){return a}});var n=s(129);async function a(e,t){let{ref:s,included_schemas:a}=e;if(!s)throw Error("Project ref is required");let{data:r,error:i}=await (0,n.U2)("/v1/projects/{ref}/types/typescript",{params:{path:{ref:s},query:{included_schemas:a}},signal:t});return i&&(0,n.S3)(i),r}s(24448)},49736:function(e,t,s){"use strict";s.d(t,{r:function(){return f}});var n=s(36457),a=s(64618),r=s(34549),i=s(39310),o=s(9610),l=s(99345),c=s(86710),d=s(63609),u=s(59571),p=s(50259),m=s(14185),h=s(70864);let f=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.NL)();return(0,a.D)(e=>(0,h.R)(e),{async onSuccess(t,s,n){let{contextualInvalidation:a,sql:r,projectRef:o}=s;if(a&&o){let e=x(o,r);await Promise.all(e.map(e=>i.invalidateQueries(e)))}await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?r.Am.error("Failed to execute SQL: ".concat(e.message)):t(e,s,n)},...s})},x=(e,t)=>{let s=[],n=t.toLowerCase();return(n.includes("create table")||n.includes("alter table")||n.includes("drop table"))&&(s.push(u.C.list(e)),s.push(m.W.list(e))),(n.includes("create schema")||n.includes("alter schema")||n.includes("drop schema"))&&s.push(d.A.schemas(e)),(n.includes("create function")||n.includes("alter function")||n.includes("drop function"))&&s.push(d.A.databaseFunctions(e)),(n.includes("create trigger")||n.includes("alter trigger")||n.includes("drop trigger"))&&s.push(c.D.list(e)),(n.includes("create policy")||n.includes("alter policy")||n.includes("drop policy"))&&s.push(o.R.list(e)),(n.includes("create type")||n.includes("alter type")||n.includes("drop type"))&&s.push(p.P.list(e)),(n.includes("create role")||n.includes("alter role")||n.includes("drop role"))&&s.push(l.E.databaseRoles(e)),(n.includes("create index")||n.includes("drop index"))&&s.push(d.A.indexes(e)),(n.includes("create extension")||n.includes("drop extension"))&&s.push(i.o.list(e)),s}},64245:function(e,t,s){"use strict";s.d(t,{K:function(){return c}});var n=s(28894),a=s(129),r=s(289),i=s(56535),o=s(2626);async function l(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:r}=await (0,a.U2)("/platform/storage/{ref}/buckets",{params:{path:{ref:s}},signal:t});return r&&(0,a.S3)(r),n}let c=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,r.Vm)(),d=(null==c?void 0:c.status)===i.S.ACTIVE_HEALTHY;return(0,n.a)(o.m.buckets(t),e=>{let{signal:s}=e;return l({projectRef:t},s)},{enabled:s&&void 0!==t&&d,...a,retry:(e,t)=>!("object"==typeof t&&null!==t&&t.message.startsWith("Tenant config")&&t.message.endsWith("not found"))&&e<3})}},2626:function(e,t,s){"use strict";s.d(t,{m:function(){return n}});let n={buckets:e=>["projects",e,"buckets"],archive:e=>["projects",e,"archive"]}},14185:function(e,t,s){"use strict";s.d(t,{W:function(){return n}});let n={list:(e,t,s)=>["projects",e,"tables",t,s].filter(Boolean)}},21925:function(e,t,s){"use strict";s.d(t,{AF:function(){return p},Bj:function(){return u},Lk:function(){return d},o_:function(){return m}});var n=s(28894),a=s(36457),r=s(71635),i=s.n(r),o=s(52983),l=s(129),c=s(14185);async function d(e,t){let{projectRef:s,connectionString:n,schema:a,includeColumns:r=!1,sortByProperty:o="name"}=e;if(!s)throw Error("projectRef is required");let c=new Headers;n&&c.set("x-connection-encrypted",n);let d={include_columns:"".concat(r)};a&&(d.included_schemas=a);let{data:u,error:p}=await (0,l.U2)("/platform/pg-meta/{ref}/tables",{params:{header:{"x-connection-encrypted":n},path:{ref:s},query:d},headers:c,signal:t});return(!Array.isArray(u)&&p&&(0,l.S3)(p),Array.isArray(u)&&o)?i()(u,e=>e[o]):u}let u=function(e){let{projectRef:t,connectionString:s,schema:a,includeColumns:r}=e,{enabled:i=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(c.W.list(t,a,r),e=>{let{signal:n}=e;return d({projectRef:t,connectionString:s,schema:a,includeColumns:r},n)},{enabled:i&&void 0!==t,...o})};function p(e){let{projectRef:t,connectionString:s}=e,n=(0,a.NL)();return(0,o.useCallback)((e,a)=>n.fetchQuery({queryKey:c.W.list(t,e,a),queryFn:n=>{let{signal:r}=n;return d({projectRef:t,connectionString:s,schema:e,includeColumns:a},r)}}),[s,t,n])}function m(e){let{projectRef:t,connectionString:s}=e,n=(0,a.NL)();return(0,o.useCallback)((e,a)=>n.prefetchQuery({queryKey:c.W.list(t,e,a),queryFn:n=>{let{signal:r}=n;return d({projectRef:t,connectionString:s,schema:e,includeColumns:a},r)}}),[s,t,n])}},69280:function(e,t,s){"use strict";s.d(t,{q:function(){return l}});var n=s(28894),a=s(73512),r=s(129),i=s(90584);async function o(e){let{data:t,error:s}=await (0,r.U2)("/platform/projects-resource-warnings",{signal:e});return s&&(0,r.S3)(s),t}let l=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.a)(i.Z.resourceWarnings(),e=>{let{signal:t}=e;return o(t)},{enabled:a.Qy&&e,staleTime:18e5,...t})}},19521:function(e,t,s){"use strict";s.d(t,{l:function(){return r}});var n=s(35721),a=s(56535);function r(e){let[t,s]=(0,n.l)(a.dA.SQL_EDITOR_AI_SCHEMA(e),["public"]);return e?[t,s]:[[],()=>{}]}},34069:function(e,t,s){"use strict";s.d(t,{_:function(){return a}});var n=s(28053);let a=e=>{try{return(0,n.WU)(e,{language:"postgresql",keywordCase:"lower"})}catch(t){return e}}},22332:function(e,t,s){"use strict";s.d(t,{pB:function(){return y},Gd:function(){return N},Fy:function(){return k},B0:function(){return w}});var n=s(77837),a=s.n(n),r=s(67997),i=s.n(r),o=s(34549),l=s(28622),c=s(34653),d=s(17338),u=s(42667),p=s(97526),m=s(39871),h=s(129);async function f(e,t){let{projectRef:s,id:n,name:a,parentId:r}=e,i={name:a};r&&(i.parentId=r);let{data:o,error:l}=await (0,h.r$)("/platform/projects/{ref}/content/folders/{id}",{params:{path:{ref:s,id:n}},body:i,signal:t});if(l)throw(0,h.S3)(l);return o}var x=s(49853),g=s(52983),v=s(73656);let j="new-folder",b=(0,l.sj)({folders:{},snippets:{},results:{},needsSaving:(0,d.Yr)([]),savingStates:{},limit:100,lastUpdatedFolderName:"",diffContent:void 0,get allFolderNames(){return Object.values(b.folders).map(e=>e.folder.name)},setDiffContent:(e,t)=>b.diffContent={sql:e,diffType:t},addSnippet:e=>{let{projectRef:t,snippet:s}=e;b.snippets[s.id]||(b.snippets[s.id]={projectRef:t,splitSizes:[50,50],snippet:s},b.results[s.id]=[],b.savingStates[s.id]="IDLE")},updateSnippet:e=>{let{id:t,snippet:s,skipSave:n=!1}=e;b.snippets[t]&&(b.snippets[t].snippet={...b.snippets[t].snippet,...s},n||b.needsSaving.set(t,!0))},setSnippet:(e,t)=>{let s=b.snippets[t.id];s?s.snippet.content||(s.snippet.content=t.content,b.needsSaving.set(s.snippet.id,!0)):b.addSnippet({projectRef:e,snippet:t})},setSql:(e,t)=>{var s;let n=null===(s=b.snippets[e])||void 0===s?void 0:s.snippet;(null==n?void 0:n.content)&&(n.content.sql=t,b.needsSaving.set(e,!1))},renameSnippet:e=>{var t;let{id:s,name:n,description:a}=e,r=null===(t=b.snippets[s])||void 0===t?void 0:t.snippet;r&&(r.name=n,r.description=a,b.needsSaving.set(s,!0))},removeSnippet:e=>{let{[e]:t,...s}=b.snippets;b.snippets=s;let{[e]:n,...a}=b.results;b.results=a,b.needsSaving.delete(e)},addFolder:e=>{let{projectRef:t,folder:s}=e;b.folders[s.id]||(b.folders[s.id]={projectRef:t,folder:s})},addNewFolder:e=>{let{projectRef:t}=e;b.folders[j]={projectRef:t,status:"editing",folder:{id:j,name:"",owner_id:-1,project_id:-1,parent_id:null}}},editFolder:e=>{b.folders[e].status="editing"},saveFolder:e=>{let{id:t,name:s}=e,n=b.folders[t],a=n.folder.name!==s;if("new-folder"===t&&b.allFolderNames.includes(s))return b.removeFolder(t),o.Am.error("This folder name already exists");if(a&&b.allFolderNames.includes(s))return n.status="idle",o.Am.error("This folder name already exists");let r=n.folder.name.slice();n.status=a?"saving":"idle",n.folder.id=t,n.folder.name=s,a&&(b.lastUpdatedFolderName=r,b.needsSaving.set(t,!0))},removeFolder:e=>{let{[e]:t,...s}=b.folders;b.folders=s},setLimit:e=>b.limit=e,addNeedsSaving:e=>b.needsSaving.set(e,!0),addFavorite:e=>{let t=b.snippets[e];t&&(t.snippet.favorite=!0,b.needsSaving.set(e,!0))},removeFavorite:e=>{let t=b.snippets[e];t.snippet&&(t.snippet.favorite=!1,b.needsSaving.set(e,!0))},addResult:(e,t,s)=>{b.results[e]&&b.results[e].unshift({rows:t,autoLimit:s})},addResultError:(e,t,s)=>{b.results[e]&&b.results[e].unshift({rows:[],error:t,autoLimit:s})},resetResult:e=>{b.results[e]&&(b.results[e]=[])}}),y=()=>(0,l.CO)(b),w=e=>(0,c.R)(b,e),N=e=>{let t=w();return(0,g.useMemo)(()=>Object.values(t.folders).filter(t=>t.projectRef===e).map(e=>e.folder),[e,t.folders])},k=e=>{let t=w();return(0,g.useMemo)(()=>Object.values(t.snippets).filter(t=>t.projectRef===e).map(e=>e.snippet),[e,t.snippets])};async function S(e,t,s){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];try{if(b.savingStates[e]="UPDATING",await (0,u.T)({projectRef:t,payload:s}),n){let e=(0,x.g)();await Promise.all([e.invalidateQueries(p.$.count(t,"sql")),e.invalidateQueries(p.$.sqlSnippets(t)),e.invalidateQueries(p.$.folders(t))])}b.savingStates[e]="IDLE"}catch(t){b.savingStates[e]="UPDATING_FAILED"}}let C=i()(e=>a()(S,1e3)),_=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return C(e)(e,t,s,n)};async function z(e,t,s){try{if(e===j){let e=await (0,m.b)({projectRef:t,name:s});o.Am.success("Successfully created folder"),b.removeFolder(j),b.folders[e.id]={projectRef:t,status:"idle",folder:e}}else await f({projectRef:t,id:e,name:s}),o.Am.success("Successfully updated folder"),b.folders[e].status="idle"}catch(t){if(o.Am.error("Failed to save folder: ".concat(t.message)),t.message.includes("create"))b.removeFolder(e);else if(t.message.includes("update")&&b.lastUpdatedFolderName.length>0){let t=b.folders[e];t.status="idle",t.folder.name=b.lastUpdatedFolderName}}finally{b.lastUpdatedFolderName=""}}(0,d.mW)(b,{name:"sqlEditorStateV2",enabled:void 0!==v.env.NEXT_PUBLIC_ENVIRONMENT}),(0,l.Ld)(b.needsSaving,()=>{let e=y();e.needsSaving.forEach((t,s)=>{let n=e.snippets[s],a=e.folders[s];if(n){let{name:e,description:a,visibility:r,project_id:i,owner_id:l,folder_id:c,content:d,favorite:u}=n.snippet;"project"===r&&c?o.Am.error("Shared snippet cannot be within a folder"):(_(s,n.projectRef,{id:s,type:"sql",name:null!=e?e:"Untitled",description:null!=a?a:"",visibility:null!=r?r:"user",project_id:null!=i?i:0,owner_id:l,folder_id:null!=c?c:void 0,content:{...d,content_id:s,favorite:null!=u&&u}},t),b.needsSaving.delete(s))}else a&&(z(s,a.projectRef,a.folder.name),b.needsSaving.delete(s))})})},2183:function(e,t,s){"use strict";var n=s(97458),a=s(90330),r=s(52983),i=s(86848),o=s(79180),l=s(43633),c=s(76707),d=s(93840),u=s(53486),p=s(5394),m=s(27429);let h=(0,r.forwardRef)((e,t)=>{let{title:s,size:h="small",onConfirm:f,visible:x,onCancel:g,loading:v,cancelLabel:j="Cancel",confirmLabel:b="Submit",confirmPlaceholder:y,confirmString:w,alert:N,input:k,label:S,description:C,formMessage:_,text:z,children:A,blockDeleteButton:L=!0,variant:E="default",...R}=e,U=p.z.object({confirmValue:p.z.literal(w,{required_error:"Value entered does not match."})}),P=(0,i.cI)({resolver:(0,a.F)(U),defaultValues:{confirmValue:""}});return(0,r.useEffect)(()=>{w&&P.reset()},[w]),(0,n.jsx)(o.Vq,{open:x,...R,onOpenChange:()=>{x&&g()},children:(0,n.jsxs)(o.cZ,{ref:t,className:"p-0 gap-0 pb-5 !block",size:h,children:[(0,n.jsx)(o.fK,{className:(0,l.cn)("border-b"),padding:"small",children:(0,n.jsx)(o.$N,{className:"",children:s})}),N&&(0,n.jsx)(m.J,{type:E,label:N.title,description:N.description,className:"border-r-0 border-l-0 rounded-none -mt-px [&_svg]:ml-0.5 mb-0",...null==N?void 0:N.base}),A&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.VO,{padding:"small",children:A}),(0,n.jsx)(o.P3,{})]}),void 0!==z&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.VO,{className:"p-5",padding:"small",children:(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:z})}),(0,n.jsx)(o.P3,{})]}),(0,n.jsx)(c.l0,{...P,children:(0,n.jsxs)("form",{autoComplete:"off",onSubmit:P.handleSubmit(function(e){f()}),className:"px-5 flex flex-col gap-2 pt-3",children:[(0,n.jsx)(c.Wi,{control:P.control,name:"confirmValue",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.xJ,{className:"flex flex-col gap-y-1",children:[(0,n.jsxs)(c.lX,{...S,children:["Type"," ",(0,n.jsx)("span",{className:"text-foreground break-all whitespace-pre",children:w})," ","to confirm."]}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(d.I,{autoComplete:"off",placeholder:y,...k,...t})}),(0,n.jsx)(c.pf,{...C}),(0,n.jsx)(c.zG,{..._})]})}}),(0,n.jsxs)("div",{className:"flex gap-2",children:[!L&&(0,n.jsx)(u.z,{size:"medium",block:!0,type:"default",disabled:v,onClick:g,children:j}),(0,n.jsx)(u.z,{block:!0,size:"medium",type:"destructive"===E?"danger":"warning"===E?"warning":"primary",htmlType:"submit",loading:v,disabled:v,className:"truncate",children:b})]})]})})]})})});h.displayName="TextConfirmModal",t.Z=h},5817:function(e,t,s){"use strict";s.d(t,{Cf:function(){return _},DS:function(){return y},G:function(){return w},GZ:function(){return g},IR:function(){return C},Qn:function(){return v},ZY:function(){return S},nM:function(){return N},nn:function(){return k},qs:function(){return b},rt:function(){return j}});var n=s(97458),a=s(86817),r=s(85847),i=s(16696),o=s(84918),l=s(83145),c=s.n(l),d=s(52983),u=s(67976),p=s(43633),m=s(86665),h=s(93840),f=s(15011),x=s(50322);let g=(0,d.forwardRef)((e,t)=>{let{...s}=e;return(0,n.jsx)(u.zF,{ref:t,...s,className:(0,p.cn)("w-full px-2 group",s.className)})}),v=(0,d.forwardRef)((e,t)=>{let{...s}=e;return(0,n.jsxs)(u.wy,{ref:t,...s,className:(0,p.cn)("w-full flex gap-1 items-center group px-3 text-sm font-normal font-mono uppercase text-lighter tracking-wide",s.className),children:[(0,n.jsx)(a.Z,{className:"transition-all text-foreground-muted group-data-[state=open]:rotate-90",size:16,strokeWidth:1.5}),(0,n.jsx)("span",{className:"group-hover:not-disabled:text-foreground",children:s.title})]})}),j=(0,d.forwardRef)((e,t)=>{let{...s}=e;return(0,n.jsx)(u.Fw,{ref:t,...s,className:(0,p.cn)("w-full flex flex-col gap-0",s.className)})}),b=(0,d.forwardRef)((e,t)=>(0,n.jsx)("div",{ref:t,...e,className:(0,p.cn)("h-px bg-border-muted",e.className)})),y=(0,d.forwardRef)((e,t)=>{let{className:s,isActive:a,forceHoverState:r,...i}=e;return(0,n.jsx)(c(),{ref:t,...i,"aria-current":a,className:(0,p.cn)("text-sm","h-7 pl-3 pr-2","flex items-center justify-between rounded-md group relative",a?"bg-selection":"hover:bg-surface-200",r&&"bg-surface-200",a?"text-foreground":"text-foreground-light hover:text-foreground",s)})}),w=(0,d.forwardRef)((e,t)=>{let{isActive:s=!0,forceHoverState:a,isPreview:r,isOpened:i=!0,...o}=e;return(0,n.jsxs)(c(),{ref:t,...o,"aria-current":s,className:(0,p.cn)((0,m.RK)({isSelected:s&&!r,isOpened:i&&!r,isPreview:r}),"px-4",o.className),children:[!r&&s&&(0,n.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),o.children]})}),N=(0,d.forwardRef)((e,t)=>(0,n.jsx)("div",{ref:t,...e,className:(0,p.cn)("flex px-2 gap-2 items-center",e.className)})),k=(0,d.forwardRef)((e,t)=>{let{children:s,isLoading:a=!1,...o}=e;return(0,n.jsxs)("label",{htmlFor:o.name,className:"relative w-full",children:[(0,n.jsx)("span",{className:"sr-only",children:o["aria-labelledby"]}),(0,n.jsx)(h.I,{ref:t,type:"text",className:(0,p.cn)("h-[32px] md:h-[28px] w-full","text-base md:text-xs","pl-7","pr-7","w-full","rounded",o.className),...o}),s,a?(0,n.jsx)(r.Z,{className:"animate-spin absolute left-2 text-foreground-muted",style:{top:7},size:14,strokeWidth:1.5}):(0,n.jsx)(i.Z,{className:"absolute left-2 top-2 text-foreground-muted",size:14,strokeWidth:1.5})]})}),S=(0,d.forwardRef)((e,t)=>{let{value:s,onValueChange:a,contentClassName:r,triggerClassName:i,...l}=e;return(0,n.jsxs)(f.h_,{modal:!1,children:[(0,n.jsxs)(x.u,{delayDuration:0,children:[(0,n.jsx)(f.$F,{asChild:!0,className:(0,p.cn)("absolute right-1 top-[.4rem] md:top-[.3rem]","text-foreground transition-colors hover:text-foreground data-[state=open]:text-foreground",i),children:(0,n.jsx)(x.aJ,{children:(0,n.jsx)(o.Z,{size:18,strokeWidth:1})})}),(0,n.jsx)(x._v,{side:"bottom",children:"Sort By"})]}),(0,n.jsx)(f.AW,{side:"bottom",align:"end",className:(0,p.cn)("w-48",r),children:(0,n.jsx)(f._x,{value:s,onValueChange:a,children:l.children})})]})}),C=(0,d.forwardRef)((e,t)=>(0,n.jsx)(f.qB,{ref:t,...e})),_=(0,d.forwardRef)((e,t)=>{let{illustration:s,title:a,description:r,actions:i,...o}=e;return(0,n.jsx)("div",{ref:t,...o,className:(0,p.cn)("border border-muted bg-surface-100 dark:bg-surface-75 flex flex-col gap-y-3 items-center justify-center rounded-md px-5 py-4",o.className),children:(0,n.jsxs)("div",{className:"w-full flex flex-col gap-y-1 items-center",children:[s,a&&(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:a}),r&&(0,n.jsx)("p",{className:"text-xs text-foreground-lighter text-center",children:r}),i&&(0,n.jsx)("div",{className:"mt-2",children:i}),o.children]})})})},92271:function(e,t,s){"use strict";s.d(t,{D:function(){return o}});var n=s(97458),a=s(52983),r=s(43633),i=s(71046);let o=(0,a.forwardRef)((e,t)=>{let{className:s,value:o,...l}=e,c=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,()=>c.current,[]);let d=e=>{e&&(o?(e.style.height="auto",e.style.height=e.scrollHeight+"px"):(e.style.height="auto",e.style.minHeight="36px"))};return(0,n.jsx)(i.K,{ref:e=>{e&&(c.current=e,d(e))},rows:1,"aria-expanded":!1,className:(0,r.cn)("h-auto resize-none box-border",s),value:o,...l})});o.displayName="ExpandingTextArea"},94583:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(97458),a=s(31209),r=s.n(a),i=()=>(0,n.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:(0,n.jsx)("div",{children:(0,n.jsx)("svg",{width:"60",height:"62",viewBox:"0 0 60 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r().loading,children:(0,n.jsx)("path",{d:"M30.2571 4.12811L30.257 4.12389C30.2133 1.21067 26.5349 -0.034778 24.7224 2.24311L1.76109 31.0996C-1.21104 34.8348 1.45637 40.34 6.23131 40.34H29.4845L29.7563 58.4432C29.8 61.3564 33.4783 62.6016 35.2908 60.324L34.8996 60.0127L35.2908 60.324L58.2521 31.4674C61.2241 27.7322 58.5568 22.227 53.782 22.227H30.3762L30.2571 4.12811Z",stroke:"hsl(var(--brand-default))",strokeWidth:2,strokeLinecap:"round"})})})})},44151:function(e,t,s){"use strict";s.d(t,{c:function(){return u}});var n=s(97458),a=s(98809),r=s(38703),i=s(52983),o=s(53486),l=s(43633),c=s(92473);!function(e){let t=[/\b(?:async|sync|yield)\*/,/\b(?:abstract|assert|async|await|break|case|catch|class|const|continue|covariant|default|deferred|do|dynamic|else|enum|export|extends|extension|external|factory|final|finally|for|get|hide|if|implements|import|in|interface|library|mixin|new|null|on|operator|part|rethrow|return|set|show|static|super|switch|sync|this|throw|try|typedef|var|void|while|with|yield)\b/],s=/(^|[^\w.])(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(s+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}}}};e.languages.dart=e.languages.extend("clike",{"class-name":[n,{pattern:RegExp(s+/[A-Z]\w*(?=\s+\w+\s*[;,=()])/.source),lookbehind:!0,inside:n.inside}],keyword:t,operator:/\bis!|\b(?:as|is)\b|\+\+|--|&&|\|\||<<=?|>>=?|~(?:\/=?)?|[+\-*\/%&^|=!<>]=?|\?/}),e.languages.insertBefore("dart","string",{"string-literal":{pattern:/r?(?:("""|''')[\s\S]*?\1|(["'])(?:\\.|(?!\2)[^\\\r\n])*\2(?!\2))/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\w+|\{(?:[^{}]|\{[^{}]*\})*\})/,lookbehind:!0,inside:{punctuation:/^\$\{?|\}$/,expression:{pattern:/[\s\S]+/,inside:e.languages.dart}}},string:/[\s\S]+/}},string:void 0}),e.languages.insertBefore("dart","class-name",{metadata:{pattern:/@\w+/,alias:"function"}}),e.languages.insertBefore("dart","class-name",{generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}}})}(r.p1);let d={defaultLanguage:"js"},u=e=>{var t;let{children:s,parentClassName:u,className:p,showCopy:m=!0}=e,{resolvedTheme:h}=(0,a.F)(),[f,x]=(0,i.useState)(!1),g=(0,i.useRef)(null),v=[];(0,i.useEffect)(()=>{if(!f)return;let e=setTimeout(()=>x(!1),2e3);return()=>clearTimeout(e)},[f]);let j=p&&p.replace(/language-/,"");!j&&d.defaultLanguage&&(j=d.defaultLanguage);let b=e=>{(0,c.v)(e,()=>x(!0))};return(0,n.jsx)(r.y$,{theme:"dark"===h?r.np.nightOwl:r.np.nightOwlLight,code:null!==(t=null==s?void 0:s.trim())&&void 0!==t?t:"",language:j,children:e=>{let{className:t,tokens:a,getLineProps:r,getTokenProps:i}=e;return(0,n.jsxs)("div",{className:"Code codeBlockWrapper group",children:[(0,n.jsx)("pre",{ref:g,className:(0,l.cn)("codeBlock",t,u),children:a.map((e,t)=>{let s=r({line:e,key:t});return v.includes(t+1)&&(s.className="".concat(s.className," docusaurus-highlight-code-line")),(0,n.jsx)("div",{...s,children:e.map((e,t)=>(0,n.jsx)("span",{...i({token:e,key:t})},t))},t)})}),m&&(0,n.jsx)("div",{className:"invisible absolute right-0 top-0 opacity-0 transition-opacity group-hover:visible group-hover:opacity-100",children:(0,n.jsx)(o.z,{size:"tiny",type:"default",onClick:()=>b(s),children:f?"Copied":"Copy"})})]})}})}},86665:function(e,t,s){"use strict";s.d(t,{A7:function(){return f},KK:function(){return x},LQ:function(){return m},RK:function(){return h}});var n=s(97458),a=s(85847),r=s(86817),i=s(7006),o=s(77848),l=s(52983),c=s(33597),d=s(43633),u=s(93840),p=s(31706);let m=c.ZP,h=(0,p.j)("group relative transition-colors h-[28px] flex items-center gap-3 text-sm cursor-pointer select-none text-foreground-light hover:bg-control aria-expanded:bg-control data-[state=open]:bg-control",{variants:{isSelected:{true:"text-foreground !bg-selection",false:""},isOpened:{true:"bg-control",false:""},isPreview:{true:"bg-control text-foreground",false:""}}}),f=(0,l.forwardRef)((e,t)=>{let{level:s=1,levelPadding:i=56,isExpanded:o=!1,isOpened:c=!1,isBranch:p=!1,isSelected:m=!1,isPreview:f=!1,isLoading:v=!1,xPadding:j=16,name:b="",icon:y,isEditing:w=!1,onEditSubmit:N,...k}=e,[S,C]=(0,l.useState)(b),_=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=e=>{_.current&&!_.current.contains(e.target)&&(null==N||N(S))};return w&&document.addEventListener("mousedown",e),()=>{w&&document.removeEventListener("mousedown",e)}},[w]),(0,l.useEffect)(()=>{if(w){var e;null===(e=_.current)||void 0===e||e.focus()}else C(b)},[w]),(0,l.useEffect)(()=>{v||C(b)},[v]),(0,n.jsxs)("div",{ref:t,"aria-selected":m,"aria-expanded":!w&&o,...k,className:(0,d.cn)(h({isSelected:m,isOpened:c,isPreview:f})),style:{paddingLeft:1!==s||p?s?i*(s-1)+j+0:i:j,...k.style},"data-treeview-is-branch":p,"data-treeview-level":s,children:[s&&s>1&&(0,n.jsx)("div",{style:{left:(i/2+4)*(s-1)+j},className:"absolute h-full w-px group-data-[treeview-is-branch=false]:bg-border-strong"}),m&&(0,n.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),p?(0,n.jsxs)(n.Fragment,{children:[v?(0,n.jsx)(a.Z,{className:(0,d.cn)("text-foreground-muted animate-spin"),size:14}):(0,n.jsx)(r.Z,{className:(0,d.cn)("text-foreground-muted","group-aria-selected:text-foreground-light","group-aria-expanded:text-foreground-light","transition-transform duration-200","group-aria-expanded:rotate-90"),size:14}),(0,n.jsx)(g,{className:(0,d.cn)("transition-colors"," text-foreground-muted","group-aria-selected:text-foreground-light","group-aria-expanded:text-foreground-light"),isOpen:o,size:16,strokeWidth:1.5})]}):y||(0,n.jsx)(x,{className:(0,d.cn)("transition-colors","fill-foreground-muted","group-aria-selected:fill-foreground","w-5 h-5 shrink-0","-ml-0.5"),size:16,strokeWidth:1.5}),(0,n.jsx)("span",{className:(0,d.cn)(w&&"hidden","truncate text-sm"),title:b,children:b}),(0,n.jsx)("form",{autoFocus:!0,onSubmit:e=>{e.preventDefault(),null==N||N(S)},className:(0,d.cn)(!w&&"hidden"),children:(0,n.jsx)(u.I,{ref:_,onChange:e=>{C(e.target.value)},onKeyDownCapture:e=>{"Enter"===e.key?null==N||N(S):"Escape"===e.key?(C(b),null==N||N(b)):e.stopPropagation()},className:"block w-full text-sm px-2 py-1 h-7 w",value:S})})]})}),x=(0,l.forwardRef)((e,t)=>(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_1018_49117)",children:[(0,n.jsx)("path",{d:"M20.8457 14.4531V15.6348H17.8916V14.4531H20.8457ZM18.3311 8.52539V15.6348H16.9004V8.52539H18.3311Z"}),(0,n.jsx)("path",{d:"M13.6865 14.5508L15.3857 16.084L14.4873 16.9092L12.8271 15.376L13.6865 14.5508ZM15.3564 11.5283V12.6318C15.3564 13.1429 15.2962 13.5938 15.1758 13.9844C15.0553 14.3717 14.8812 14.6956 14.6533 14.9561C14.4255 15.2132 14.1553 15.4069 13.8428 15.5371C13.5303 15.6673 13.1836 15.7324 12.8027 15.7324C12.4219 15.7324 12.0736 15.6673 11.7578 15.5371C11.4453 15.4069 11.1751 15.2132 10.9473 14.9561C10.7227 14.6956 10.5469 14.3717 10.4199 13.9844C10.2962 13.5938 10.2344 13.1429 10.2344 12.6318V11.5283C10.2344 11.0173 10.2962 10.568 10.4199 10.1807C10.5436 9.79329 10.7178 9.47103 10.9424 9.21387C11.1702 8.95345 11.4404 8.75814 11.7529 8.62793C12.0654 8.49447 12.4121 8.42773 12.793 8.42773C13.1771 8.42773 13.5254 8.49447 13.8379 8.62793C14.1504 8.75814 14.4206 8.95345 14.6484 9.21387C14.8796 9.47103 15.0553 9.79329 15.1758 10.1807C15.2962 10.568 15.3564 11.0173 15.3564 11.5283ZM13.9307 12.6318V11.5186C13.9307 11.1833 13.9062 10.8952 13.8574 10.6543C13.8086 10.4134 13.7354 10.2165 13.6377 10.0635C13.5433 9.91048 13.4245 9.79818 13.2812 9.72656C13.1413 9.65495 12.9785 9.61914 12.793 9.61914C12.6107 9.61914 12.4479 9.65495 12.3047 9.72656C12.1647 9.79818 12.0475 9.91048 11.9531 10.0635C11.8587 10.2165 11.7855 10.4134 11.7334 10.6543C11.6846 10.8952 11.6602 11.1833 11.6602 11.5186V12.6318C11.6602 12.9704 11.6846 13.2601 11.7334 13.501C11.7822 13.7419 11.8538 13.9404 11.9482 14.0967C12.0459 14.2497 12.1647 14.3636 12.3047 14.4385C12.4479 14.5101 12.6139 14.5459 12.8027 14.5459C12.985 14.5459 13.1462 14.5101 13.2861 14.4385C13.4294 14.3636 13.5482 14.2497 13.6426 14.0967C13.7402 13.9437 13.8118 13.7467 13.8574 13.5059C13.9062 13.2617 13.9307 12.9704 13.9307 12.6318Z"}),(0,n.jsx)("path",{d:"M7.47266 13.7646C7.47266 13.6377 7.46126 13.5221 7.43848 13.418C7.41569 13.3138 7.36686 13.2178 7.29199 13.1299C7.22038 13.042 7.11458 12.9541 6.97461 12.8662C6.83789 12.7783 6.65885 12.6872 6.4375 12.5928C6.17383 12.4821 5.91829 12.3649 5.6709 12.2412C5.4235 12.1143 5.20052 11.9678 5.00195 11.8018C4.80339 11.6357 4.64551 11.4404 4.52832 11.2158C4.41439 10.988 4.35742 10.721 4.35742 10.415C4.35742 10.1156 4.41113 9.84375 4.51855 9.59961C4.62923 9.35547 4.78548 9.14714 4.9873 8.97461C5.18913 8.79883 5.42513 8.66374 5.69531 8.56934C5.96875 8.47493 6.27311 8.42773 6.6084 8.42773C7.06413 8.42773 7.45801 8.52214 7.79004 8.71094C8.12533 8.89974 8.38411 9.15853 8.56641 9.4873C8.75195 9.81608 8.84473 10.1937 8.84473 10.6201H7.41895C7.41895 10.4183 7.38965 10.2409 7.33105 10.0879C7.27572 9.93164 7.1862 9.80957 7.0625 9.72168C6.9388 9.63379 6.7793 9.58984 6.58398 9.58984C6.40169 9.58984 6.25033 9.62728 6.12988 9.70215C6.0127 9.77376 5.9248 9.87305 5.86621 10C5.81087 10.1237 5.7832 10.2637 5.7832 10.4199C5.7832 10.5371 5.81087 10.6429 5.86621 10.7373C5.9248 10.8285 6.00456 10.9115 6.10547 10.9863C6.20638 11.0579 6.3252 11.1279 6.46191 11.1963C6.60189 11.2646 6.75488 11.3314 6.9209 11.3965C7.24316 11.5234 7.52799 11.6634 7.77539 11.8164C8.02279 11.9661 8.22949 12.1354 8.39551 12.3242C8.56152 12.5098 8.68685 12.7197 8.77148 12.9541C8.85612 13.1885 8.89844 13.4554 8.89844 13.7549C8.89844 14.0511 8.84635 14.3213 8.74219 14.5654C8.64128 14.8063 8.49316 15.0146 8.29785 15.1904C8.10254 15.363 7.86654 15.4964 7.58984 15.5908C7.31641 15.6852 7.01042 15.7324 6.67188 15.7324C6.3431 15.7324 6.03223 15.6868 5.73926 15.5957C5.44629 15.5013 5.1875 15.3597 4.96289 15.1709C4.74154 14.9788 4.56738 14.7363 4.44043 14.4434C4.31348 14.1471 4.25 13.7972 4.25 13.3936H5.68066C5.68066 13.6084 5.70182 13.7923 5.74414 13.9453C5.78646 14.0951 5.85156 14.2155 5.93945 14.3066C6.02734 14.3945 6.13477 14.4613 6.26172 14.5068C6.39193 14.5492 6.54004 14.5703 6.70605 14.5703C6.89486 14.5703 7.0446 14.5345 7.15527 14.4629C7.26921 14.3913 7.35059 14.2952 7.39941 14.1748C7.44824 14.0544 7.47266 13.9176 7.47266 13.7646Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 5.73438H4.5C3.11929 5.73438 2 6.85366 2 8.23438V16.5039C2 17.8846 3.11929 19.0039 4.5 19.0039H20.5C21.8807 19.0039 23 17.8846 23 16.5039V8.23438C23 6.85366 21.8807 5.73438 20.5 5.73438ZM4.5 4.23438C2.29086 4.23438 0.5 6.02524 0.5 8.23438V16.5039C0.5 18.713 2.29086 20.5039 4.5 20.5039H20.5C22.7091 20.5039 24.5 18.713 24.5 16.5039V8.23438C24.5 6.02524 22.7091 4.23438 20.5 4.23438H4.5Z"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_1018_49117",children:(0,n.jsx)("rect",{width:"24",height:"24",transform:"translate(0.5 0.269531)"})})})]})),g=(0,l.forwardRef)((e,t)=>{let{isOpen:s,...a}=e,r=s?i.Z:o.Z;return(0,n.jsx)(r,{ref:t,...a})})},72920:function(e,t,s){"use strict";s.d(t,{BO:function(){return p},dg:function(){return f},h7:function(){return h}});var n=s(97458),a=s(52983),r=s(12381),i=s(41258),o=s(62708),l=s(43633);let c={light:"",dark:".dark"},d=a.createContext(null);function u(){let e=a.useContext(d);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let p=a.forwardRef((e,t)=>{let{id:s,className:i,children:o,config:c={},...u}=e,p=a.useId(),h="chart-".concat(s||p.replace(/:/g,""));return(0,n.jsx)(d.Provider,{value:{config:c},children:(0,n.jsxs)("div",{"data-chart":h,ref:t,className:(0,l.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-foreground-muted [&_.recharts-cartesian-grid_line]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line-line]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",i),...u,children:[(0,n.jsx)(m,{id:h,config:c}),(0,n.jsx)(r.h,{children:o})]})})});p.displayName="Chart";let m=e=>{let{id:t,config:s}=e,a=Object.entries(s).filter(e=>{let[t,s]=e;return s.theme||s.color});return a.length?(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(c).map(e=>{let[s,n]=e;return"\n".concat(n," [data-chart=").concat(t,"] {\n").concat(a.map(e=>{var t;let[n,a]=e,r=(null===(t=a.theme)||void 0===t?void 0:t[s])||a.color;return r?"  --color-".concat(n,": ").concat(r,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},h=i.u,f=a.forwardRef((e,t)=>{let{active:s,payload:r,className:i,indicator:o="dot",hideLabel:c=!1,hideIndicator:d=!1,label:p,labelFormatter:m,labelSuffix:h,labelClassName:f,formatter:g,color:v,nameKey:j,labelKey:b}=e,{config:y}=u(),w=a.useMemo(()=>{var e;if(c||!(null==r?void 0:r.length))return null;let[t]=r,s="".concat(b||t.dataKey||t.name||"value"),a=x(y,t,s),i=b||"string"!=typeof p?null==a?void 0:a.label:(null===(e=y[p])||void 0===e?void 0:e.label)||p;return m?(0,n.jsx)("div",{className:(0,l.cn)("font-medium",f),children:m(i,r)}):i?(0,n.jsx)("div",{className:(0,l.cn)("font-medium",f),children:i}):null},[p,m,r,c,f,y,b]);if(!s||!(null==r?void 0:r.length))return null;let N=1===r.length&&"dot"!==o;return(0,n.jsxs)("div",{ref:t,className:(0,l.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg px-2.5 py-1.5 text-xs shadow-xl",i),children:[N?null:w,(0,n.jsx)("div",{className:"grid gap-1.5",children:r.map((e,t)=>{let s="".concat(j||e.name||e.dataKey||"value"),a=x(y,e,s),r=v||e.payload.fill||e.color;return(0,n.jsx)("div",{className:(0,l.cn)("flex w-full items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-foreground-muted","dot"===o&&"items-center"),children:g&&(null==e?void 0:e.value)!==void 0&&e.name?g(e.value,e.name,e,t,e.payload):(0,n.jsxs)(n.Fragment,{children:[(null==a?void 0:a.icon)?(0,n.jsx)(a.icon,{}):!d&&(0,n.jsx)("div",{className:(0,l.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":N&&"dashed"===o}),style:{"--color-bg":r,"--color-border":r}}),(0,n.jsxs)("div",{className:(0,l.cn)("flex flex-1 justify-between leading-none",N?"items-end":"items-center"),children:[(0,n.jsxs)("div",{className:"grid gap-1.5",children:[N?w:null,(0,n.jsx)("span",{className:"text-foreground-light",children:(null==a?void 0:a.label)||e.name})]}),e.value&&(0,n.jsxs)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:[e.value.toLocaleString(),h]})]})]})},e.dataKey)})})]})});function x(e,t,s){if("object"!=typeof t||null===t)return;let n="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,a=s;return s in t&&"string"==typeof t[s]?a=t[s]:n&&s in n&&"string"==typeof n[s]&&(a=n[s]),a in e?e[a]:e[s]}f.displayName="ChartTooltip",o.D,a.forwardRef((e,t)=>{let{className:s,hideIcon:a=!1,payload:r,verticalAlign:i="bottom",nameKey:o}=e,{config:c}=u();return(null==r?void 0:r.length)?(0,n.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center justify-center gap-4","top"===i?"pb-3":"pt-3",s),children:r.map(e=>{let t="".concat(o||e.dataKey||"value"),s=x(c,e,t);return(0,n.jsxs)("div",{className:(0,l.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-foreground-muted"),children:[(null==s?void 0:s.icon)&&!a?(0,n.jsx)(s.icon,{}):(0,n.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==s?void 0:s.label]},e.value)})}):null}).displayName="ChartLegend"},97079:function(e,t,s){"use strict";s.d(t,{W4:function(){return u},Zo:function(){return m},h_:function(){return p},uP:function(){return h},xV:function(){return d}});var n=s(97458),a=s(73188),r=s(86817),i=s(9738),o=s(78938),l=s(52983),c=s(43633);let d=a.fC,u=a.xz;a.ZA,a.Uv,a.Tr,a.Ee,l.forwardRef((e,t)=>{let{className:s,inset:i,children:o,...l}=e;return(0,n.jsxs)(a.fF,{ref:t,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-xs outline-none focus:bg-selection focus:text-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",i&&"pl-8",s),...l,children:[o,(0,n.jsx)(r.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=a.fF.displayName,l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(a.tu,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-overlay p-1 text-foreground-light shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=a.tu.displayName;let p=l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(a.Uv,{children:(0,n.jsx)(a.VY,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-overlay p-1 text-foreground-light shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})})});p.displayName=a.VY.displayName;let m=l.forwardRef((e,t)=>{let{className:s,inset:r,...i}=e;return(0,n.jsx)(a.ck,{ref:t,className:(0,c.cn)("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-xs outline-none focus:bg-selection focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",s),...i})});m.displayName=a.ck.displayName,l.forwardRef((e,t)=>{let{className:s,children:r,checked:o,...l}=e;return(0,n.jsxs)(a.oC,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-xs outline-none focus:bg-selection focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:o,...l,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})}),r]})}).displayName=a.oC.displayName,l.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,n.jsxs)(a.Rk,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-xs outline-none focus:bg-selection focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{children:(0,n.jsx)(o.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=a.Rk.displayName,l.forwardRef((e,t)=>{let{className:s,inset:r,...i}=e;return(0,n.jsx)(a.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-xs text-foreground-light",r&&"pl-8",s),...i})}).displayName=a.__.displayName;let h=l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(a.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-border",s),...r})});h.displayName=a.Z0.displayName},38336:function(e,t,s){"use strict";s.d(t,{Dp:function(){return c},ee:function(){return l},pO:function(){return o}});var n=s(97458),a=s(23845),r=s(18006),i=s(43633);let o=e=>{let{className:t,...s}=e;return(0,n.jsx)(r.eh,{className:(0,i.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...s})},l=r.s_,c=e=>{let{withHandle:t,className:s,...o}=e;return(0,n.jsx)(r.OT,{className:(0,i.cn)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90","data-[resize-handle-state=drag]:bg-border-strong","group","transition-colors",s),...o,children:t&&(0,n.jsx)("div",{className:(0,i.cn)("z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border focus:bg-surface-400","opacity-0 transition-opacity duration-200","group-data-[resize-handle-state=hover]:opacity-100","hover:bg-surface-400","group-data-[resize-handle-state=drag]:opacity-100","group-data-[resize-handle-state=drag]:bg-foreground-muted"),children:(0,n.jsx)(a.Z,{className:"h-2.5 w-2.5"})})})}},71046:function(e,t,s){"use strict";s.d(t,{K:function(){return o}});var n=s(97458),a=s(52983),r=s(43633);let i=["bg-control"],o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("textarea",{className:(0,r.cn)("flex min-h-10 w-full rounded-md border border-control bg-control px-3 py-2 text-base md:text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-foreground-muted","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-background-control focus-visible:ring-offset-2 focus-visible:ring-offset-foreground-muted disabled:cursor-not-allowed disabled:opacity-50",...i,s),ref:t,...a})});o.displayName="TextArea"},92860:function(e,t,s){"use strict";s.d(t,{t:function(){return c}});var n=s(97458),a=s(7879),r=s(51650),i=s.n(r),o=s(43633);let l=e=>(0,n.jsx)("span",{className:(0,o.cn)("next-image--dynamic-fill",e.className),children:(0,n.jsx)(i(),{...e,className:"rounded-md border",layout:"fill"})}),c={mono:e=>(0,n.jsx)("code",{className:"text-sm",children:e.children}),code:e=>(0,n.jsx)(a.d,{...e}),img:e=>l(e),Image:e=>l(e)}},92473:function(e,t,s){"use strict";s.d(t,{v:function(){return i}});var n=s(71607),a=s.n(n),r=s(34549);let i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a();if(window.document.hasFocus()){var s;if(null===(s=navigator.clipboard)||void 0===s?void 0:s.write){let s=new ClipboardItem({"text/plain":Promise.resolve(e).then(e=>new Blob([e],{type:"text/plain"}))});navigator.clipboard.write([s]).then(t)}else Promise.resolve(e).then(e=>{var t;return null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText(e)}).then(t)}else r.Am.error("Unable to copy to clipboard")}},31209:function(e){e.exports={loading:"loading-anim_loading__rDN7u",dash:"loading-anim_dash__HIPR0"}}}]);