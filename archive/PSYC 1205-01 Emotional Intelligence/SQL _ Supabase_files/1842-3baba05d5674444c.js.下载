"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1842],{13456:function(e,t,s){var n=s(97458),l=s(52983),a=s(95293);let i=(0,l.memo)(function(){return(0,n.jsx)("div",{className:"px-4 flex flex-col gap-0",children:[{width:"w-40",opacity:"opacity-100"},{width:"w-32",opacity:"opacity-100"},{width:"w-20",opacity:"opacity-75"},{width:"w-40",opacity:"opacity-50"},{width:"w-20",opacity:"opacity-25"}].map((e,t)=>(0,n.jsxs)("div",{className:"flex flex-row h-6 items-center gap-3 ".concat(e.opacity),children:[(0,n.jsx)(a.O,{className:"h-4 w-5"}),(0,n.jsx)(a.O,{className:"h-4 ".concat(e.width)})]},t))})});t.Z=i},9303:function(e,t,s){s.d(t,{Z:function(){return eb}});var n=s(97458),l=s(40540),a=s(52983),i=s(37315),r=s(94281),o=s(15631),c=s(50663),d=s.n(c),u=s(4534),x=s(41639),h=s(32691),p=s(73512),m=s(76073),f=s(73692),j=s(13456),v=s(84261),b=s(2861),g=s(61711),N=s(58427),w=s(1447),y=s(7272),S=s(92464),C=s(6570),k=s(35721),_=s(50998),z=s(61958),E=s(5688),A=s(19405),Z=s(53486),L=s(12753),R=s(5562),T=s(7257),O=s(5817),I=s(32672),F=s(12887),W=s.n(F),B=s(75365),P=s(32024),D=s(48631),V=s(74459),M=s(74286),X=s(11968),Q=s(26597),H=s(9887),q=s(83145),K=s.n(q),G=s(49571),Y=s.n(G),J=s(34549),U=s(65378),$=s(8427),ee=s(13537),et=s(71534),es=s(70111),en=s(5364),el=s(86665),ea=s(43633);let ei=e=>{var t,s,l;let{type:a,size:i=15,strokeWidth:r=1.5,isActive:o}=e;return"sql"===a?(0,n.jsx)(el.KK,{size:i,className:(0,ea.cn)("transition-colors","fill-foreground-muted","group-aria-selected:fill-foreground","w-4 h-4","-ml-0.5"),strokeWidth:r}):a===y.l.TABLE?(0,n.jsx)(et.Z,{size:i,strokeWidth:r,className:(0,ea.cn)("text-foreground-muted group-hover:text-foreground-lighter group-aria-selected:text-foreground",o&&"text-foreground-light","transition-colors")}):"schema"===a?(0,n.jsx)(es.Z,{size:i,strokeWidth:r}):a===y.l.VIEW?(0,n.jsx)(en.Z,{size:i,strokeWidth:r,className:(0,ea.cn)("text-foreground-muted group-hover:text-foreground-lighter",o&&"text-foreground-lighter","transition-colors")}):(0,n.jsx)("div",{className:(0,ea.cn)("flex items-center justify-center text-xs h-4 w-4 rounded-[2px] font-bold",a===y.l.FOREIGN_TABLE&&"text-yellow-900 bg-yellow-500",a===y.l.MATERIALIZED_VIEW&&"text-purple-1000 bg-purple-500",a===y.l.PARTITIONED_TABLE&&"text-foreground-light bg-border-stronger"),children:null===(l=Object.entries(y.l).find(e=>{let[,t]=e;return t===a}))||void 0===l?void 0:null===(s=l[0])||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.toUpperCase()})};var er=s(53431),eo=s(12724),ec=s(67305),ed=s(15834),eu=s(6433),ex=s(50322),eh=s(15011);let ep=e=>{let{entity:t,isActive:s,tableHasLints:l,viewHasLints:a,materializedViewHasLints:i}=e,r="";switch(t.type){case y.l.TABLE:l&&(r="RLS disabled");break;case y.l.VIEW:a&&(r="Security definer view");break;case y.l.MATERIALIZED_VIEW:i&&(r="Security definer view");break;case y.l.FOREIGN_TABLE:r="RLS is not enforced on foreign tables"}return r?(0,n.jsxs)(ex.u,{disableHoverableContent:!0,children:[(0,n.jsx)(ex.aJ,{className:"min-w-4",children:(0,n.jsx)(H.Z,{size:14,strokeWidth:2,className:(0,ea.cn)("min-w-4",s?"text-warning-600":"text-warning-500")})}),(0,n.jsx)(ex._v,{side:"bottom",children:(0,n.jsx)("span",{children:r})})]}):null};var em=e=>{var t,s,l,a,i;let{id:r,projectRef:o,item:c,isLocked:d,isActive:u}=e,{project:x}=(0,I.d2)(),h=(0,E._2)(),{selectedSchema:m}=(0,_.B)(),f=Number(r)===c.id,j=f&&!d,{data:v=[]}=(0,er.U)({projectRef:null==x?void 0:x.ref}),b=(0,ee.R)(c.name,"rls_disabled_in_public",["ERROR"],v,m).hasLint,g=(0,ee.R)(c.name,"security_definer_view",["ERROR","WARN"],v,m).hasLint,N=(0,ee.R)(c.name,"materialized_view_in_api",["ERROR","WARN"],v,m).hasLint,w=async()=>{if(p.Qy&&!(null==x?void 0:x.connectionString))return console.error("Connection string is required");let e=J.Am.loading("Exporting ".concat(c.name," as CSV..."));try{let t=await (0,C.IV)({id:c.id,projectRef:o,connectionString:null==x?void 0:x.connectionString});if((0,ec.N3)(t)&&t.live_rows_estimate>U.kI)return J.Am.error((0,n.jsx)("div",{className:"text-foreground prose text-sm",children:U.m0}),{id:e});let s=t&&(0,$.NK)(t);if(!s)return J.Am.error("Failed to export table: ".concat(c.name),{id:e});let l=(await (0,ed.wF)({projectRef:o,connectionString:null==x?void 0:x.connectionString,table:s})).map(e=>(Object.keys(e).map(t=>{"object"==typeof e[t]&&null!==e[t]&&(e[t]=JSON.stringify(e[t]))}),e));if(l.length>0){let e=Y().unparse(l,{columns:s.columns.map(e=>e.name)}),t=new Blob([e],{type:"text/csv;charset=utf-8;"});W()(t,"".concat(c.name,"_rows.csv"))}J.Am.success("Successfully exported ".concat(c.name," as CSV"),{id:e})}catch(t){J.Am.error("Failed to export table: ".concat(t.message),{id:e})}},S=async()=>{if(p.Qy&&!(null==x?void 0:x.connectionString))return console.error("Connection string is required");let e=J.Am.loading("Exporting ".concat(c.name," as SQL..."));try{let t=await (0,C.IV)({id:c.id,projectRef:o,connectionString:null==x?void 0:x.connectionString});if((0,ec.N3)(t)&&t.live_rows_estimate>U.kI)return J.Am.error((0,n.jsx)("div",{className:"text-foreground prose text-sm",children:U.m0}),{id:e});let s=t&&(0,$.NK)(t);if(!s)return J.Am.error("Failed to export table: ".concat(c.name),{id:e});let l=(await (0,ed.wF)({projectRef:o,connectionString:null==x?void 0:x.connectionString,table:s})).map(e=>(Object.keys(e).map(t=>{"object"==typeof e[t]&&null!==e[t]&&(e[t]=JSON.stringify(e[t]))}),e));if(l.length>0){let e=(0,ee.k)(s,l),t=new Blob([e],{type:"text/sql;charset=utf-8;"});W()(t,"".concat(c.name,"_rows.sql"))}J.Am.success("Successfully exported ".concat(c.name," as SQL"),{id:e})}catch(t){J.Am.error("Failed to export table: ".concat(t.message),{id:e})}};return(0,n.jsx)(eo.Sf,{title:c.name,id:String(c.id),href:"/project/".concat(o,"/editor/").concat(c.id,"?schema=").concat(m),role:"button","aria-label":"View ".concat(c.name),className:(0,ea.cn)((0,el.RK)({isSelected:f}),"px-4"),children:(0,n.jsxs)(n.Fragment,{children:[f&&(0,n.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),(0,n.jsxs)(ex.u,{disableHoverableContent:!0,children:[(0,n.jsx)(ex.aJ,{className:"min-w-4",children:(0,n.jsx)(ei,{type:c.type,isActive:f})}),(0,n.jsx)(ex._v,{side:"bottom",children:(t=c.type,null===(i=Object.entries(y.l).find(e=>{let[,s]=e;return s===t}))||void 0===i?void 0:null===(a=i[0])||void 0===a?void 0:null===(l=a.toLowerCase())||void 0===l?void 0:null===(s=l.split("_"))||void 0===s?void 0:s.join(" "))})]}),(0,n.jsxs)("div",{className:(0,ea.cn)("truncate","overflow-hidden text-ellipsis whitespace-nowrap flex items-center gap-2 relative w-full",f&&"text-foreground"),children:[(0,n.jsx)("span",{className:(0,ea.cn)(f?"text-foreground":"text-foreground-light group-hover:text-foreground","text-sm","transition","truncate"),children:c.name}),(0,n.jsx)(ep,{entity:c,isActive:f,tableHasLints:b,viewHasLints:g,materializedViewHasLints:N})]}),j&&(0,n.jsxs)(eh.h_,{children:[(0,n.jsx)(eh.$F,{className:"text-foreground-lighter transition-all text-transparent group-hover:text-foreground data-[state=open]:text-foreground",children:(0,n.jsx)(B.Z,{size:14,strokeWidth:2})}),(0,n.jsxs)(eh.AW,{side:"bottom",align:"start",className:"w-44",children:[(0,n.jsxs)(eh.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),(0,eu.vQ)(c.name)},children:[(0,n.jsx)(P.Z,{size:12}),(0,n.jsx)("span",{children:"Copy name"})]},"copy-name"),c.type===y.l.TABLE&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.VD,{}),(0,n.jsxs)(eh.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),h.onEditTable()},children:[(0,n.jsx)(D.Z,{size:12}),(0,n.jsx)("span",{children:"Edit table"})]},"edit-table"),(0,n.jsxs)(eh.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),h.onDuplicateTable()},children:[(0,n.jsx)(V.Z,{size:12}),(0,n.jsx)("span",{children:"Duplicate table"})]},"duplicate-table"),(0,n.jsx)(eh.Xi,{className:"space-x-2",asChild:!0,children:(0,n.jsxs)(K(),{href:"/project/".concat(o,"/auth/policies?schema=").concat(m,"&search=").concat(c.id),children:[(0,n.jsx)(M.Z,{size:12}),(0,n.jsx)("span",{children:"View policies"})]},"view-policies")},"view-policies"),(0,n.jsxs)(eh.Ph,{children:[(0,n.jsxs)(eh.kt,{className:"gap-x-2",children:[(0,n.jsx)(X.Z,{size:12}),"Export data"]}),(0,n.jsxs)(eh.TG,{children:[(0,n.jsx)(eh.Xi,{className:"space-x-2",onClick:e=>{e.stopPropagation(),w()},children:(0,n.jsx)("span",{children:"Export table as CSV"})},"download-table-csv"),(0,n.jsx)(eh.Xi,{className:"gap-x-2",onClick:e=>{e.stopPropagation(),S()},children:(0,n.jsx)("span",{children:"Export table as SQL"})},"download-table-sql")]})]}),(0,n.jsx)(eh.VD,{}),(0,n.jsxs)(eh.Xi,{className:"gap-x-2",onClick:e=>{e.stopPropagation(),h.onDeleteTable()},children:[(0,n.jsx)(Q.Z,{size:12}),(0,n.jsx)("span",{children:"Delete table"})]},"delete-table")]})]})]})]})})},ef=s(24450);let ej=()=>(0,n.jsx)(O.Cf,{title:"No tables or views",description:"Any tables or views you create will be listed here.",className:"mx-4",children:(0,n.jsx)("div",{className:"top-0 left-6 flex flex-col opacity-50 cursor-not-allowed bg-dash-sidebar h-content -mb-7 pointer-events-none scale-75",children:(0,n.jsxs)("div",{className:"relative h-content",children:[(0,n.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-10",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent from-80% to-100% to-background-surface-100 dark:to-background-surface-75"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent from-50% to-100% to-background-surface-100 dark:to-background-surface-75"})]}),(0,n.jsx)("div",{className:"absolute left-[150px] bottom-[21px] text-foreground-muted z-10 pointer-events-none",children:(0,n.jsx)(ef.Z,{size:16,className:"text-foreground-light",strokeWidth:1.5})}),[void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsx)("div",{className:"border-l pointer-events-none",children:(0,n.jsxs)("div",{className:(0,ea.cn)("group",(0,el.RK)({isSelected:2===t,isOpened:2===t,isPreview:!1}),"px-4 min-w-40"),"aria-selected":2===t,children:[2===t&&(0,n.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),(0,n.jsx)(ei,{type:"r"}),"postgres_table_".concat(t)]})},"some-".concat(t)))]})})});var ev=()=>{var e,t,s;let{id:i}=(0,p.UO)(),o=(0,h.useRouter)(),c=i?Number(i):void 0,F=(0,E._2)(),{selectedSchema:W,setSelectedSchema:B}=(0,_.B)(),P=(0,m.G)(),[D,V]=(0,a.useState)(!1),[M,X]=(0,a.useState)(""),[Q,H]=(0,a.useState)(Object.values(y.l)),[q,K]=(0,k._)("table-editor-sort","alphabetical"),{project:G}=(0,I.d2)(),{data:Y,isLoading:J,isSuccess:U,isError:$,error:ee,hasNextPage:et,isFetchingNextPage:es,fetchNextPage:en}=(0,S.Hp)({projectRef:null==G?void 0:G.ref,connectionString:null==G?void 0:G.connectionString,schemas:[W],search:M.trim()||void 0,sort:q,filterTypes:Q},{keepPreviousData:!!M}),el=(0,a.useMemo)(()=>null==Y?void 0:Y.pages.flatMap(e=>e.data.entities),[null==Y?void 0:Y.pages]),{data:ea}=(0,w.Q1)({projectRef:null==G?void 0:G.ref,connectionString:null==G?void 0:G.connectionString}),ei=null==ea?void 0:ea.find(e=>e.name===W),er=(0,r.Xo)(l.KA.TENANT_SQL_ADMIN_WRITE,"tables"),[eo]=d()((null!=ea?ea:[]).sort((e,t)=>e.name.localeCompare(t.name)),e=>{var t;return z.s.includes(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"")}),ec=eo.some(e=>e.id===(null==ei?void 0:ei.id)),{data:ed}=(0,C.iB)({projectRef:null==G?void 0:G.ref,connectionString:null==G?void 0:G.connectionString,id:c});return(0,a.useEffect)(()=>{(null==ed?void 0:ed.schema)&&B(ed.schema)},[null==ed?void 0:ed.schema]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col flex-grow gap-5 pt-5 h-full",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1.5",children:[(0,n.jsx)(N.Z,{className:"mx-4",selectedSchemaName:W,onSelectSchema:e=>{X(""),B(e),o.push("/project/".concat(null==G?void 0:G.ref,"/editor?schema=").concat(e))},onSelectCreateSchema:()=>F.onAddSchema()}),(0,n.jsx)("div",{className:"grid gap-3 mx-4",children:ec?(0,n.jsxs)(A.bZ,{children:[(0,n.jsx)(A.Cd,{className:"text-sm",children:"Viewing protected schema"}),(0,n.jsxs)(A.X,{className:"text-xs",children:[(0,n.jsx)("p",{className:"mb-2",children:"This schema is managed by Supabase and is read-only through the table editor"}),(0,n.jsx)(Z.z,{type:"default",size:"tiny",onClick:()=>V(!0),children:"Learn more"})]})]}):(0,n.jsx)(b.u,{block:!0,title:"Create a new table",name:"New table",disabled:!er,size:"tiny",icon:(0,n.jsx)(u.Z,{size:14,strokeWidth:1.5,className:"text-foreground-muted"}),type:"default",className:"justify-start",onClick:F.onAddTable,tooltip:{content:{side:"bottom",text:er?void 0:"You need additional permissions to create tables"}},children:"New table"})})]}),(0,n.jsxs)("div",{className:"flex flex-auto flex-col gap-2 pb-4",children:[(0,n.jsxs)(O.nM,{className:"mx-2",children:[(0,n.jsx)(O.nn,{autoFocus:!P,name:"search-tables","aria-labelledby":"Search tables",onChange:e=>{X(e.target.value)},value:M,placeholder:"Search tables...",children:(0,n.jsxs)(O.ZY,{value:q,onValueChange:e=>K(e),children:[(0,n.jsx)(O.IR,{value:"alphabetical",className:"flex gap-2",children:"Alphabetical"},"alphabetical"),(0,n.jsx)(O.IR,{value:"grouped-alphabetical",children:"Entity Type"},"grouped-alphabetical")]})}),(0,n.jsxs)(L.J2,{children:[(0,n.jsx)(L.xo,{asChild:!0,children:(0,n.jsx)(Z.z,{type:5!==Q.length?"default":"dashed",className:"h-[32px] md:h-[28px] px-1.5",icon:(0,n.jsx)(x.Z,{})})}),(0,n.jsx)(L.yk,{className:"p-0 w-56",side:"bottom",align:"center",children:(0,n.jsxs)("div",{className:"px-3 pt-3 pb-2 flex flex-col gap-y-2",children:[(0,n.jsx)("p",{className:"text-xs",children:"Show entity types"}),(0,n.jsx)("div",{className:"flex flex-col",children:Object.entries(y.l).map(e=>{let[t,s]=e;return(0,n.jsxs)("div",{className:"group flex items-center justify-between py-0.5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(R.X,{id:t,name:t,checked:Q.includes(s),onCheckedChange:()=>{Q.includes(s)?H(Q.filter(e=>e!==s)):H(Q.concat([s]))}}),(0,n.jsx)(T._,{htmlFor:t,className:"capitalize text-xs",children:t.toLowerCase().replace("_"," ")})]}),(0,n.jsx)(Z.z,{size:"tiny",type:"default",onClick:()=>H([s]),className:"transition opacity-0 group-hover:opacity-100 h-auto px-1 py-0.5",children:"Select only"})]},t)})})]})})]})]}),J&&(0,n.jsx)(j.Z,{}),$&&(0,n.jsx)("div",{className:"mx-4",children:(0,n.jsx)(v.Z,{error:null!=ee?ee:null,subject:"Failed to retrieve tables"})}),U&&(0,n.jsxs)(n.Fragment,{children:[0===M.length&&(null!==(e=null==el?void 0:el.length)&&void 0!==e?e:0)<=0&&(0,n.jsx)(ej,{}),M.length>0&&(null!==(t=null==el?void 0:el.length)&&void 0!==t?t:0)<=0&&(0,n.jsx)(O.Cf,{className:"mx-2",title:"No results found",description:'Your search for "'.concat(M,'" did not return any results')}),(null!==(s=null==el?void 0:el.length)&&void 0!==s?s:0)>0&&(0,n.jsx)("div",{className:"flex flex-1 flex-grow","data-testid":"tables-list",children:(0,n.jsx)(g.Z,{items:el,ItemComponent:em,itemProps:{projectRef:null==G?void 0:G.ref,id:Number(c),isLocked:ec},getItemSize:()=>28,hasNextPage:et,isLoadingNextPage:es,onLoadNextPage:()=>en()})})]})]})]}),(0,n.jsx)(f.b,{visible:D,onClose:()=>V(!1)})]})},eb=e=>{let{children:t}=e,s=(0,r.N4)(),c=(0,r.Xo)(l.KA.TENANT_SQL_ADMIN_READ,"tables"),d=(0,a.useMemo)(()=>(0,n.jsx)(ev,{}),[]);return s&&!c?(0,n.jsx)(o.$,{isBlocking:!1,children:(0,n.jsx)(i.Z,{isFullPage:!0,resourceText:"view tables from this project"})}):(0,n.jsx)(o.$,{product:"Table Editor",productMenu:d,isBlocking:!1,resizableSidebar:!0,children:t})}},37315:function(e,t,s){var n=s(97458),l=s(19369);t.Z=e=>{let{resourceText:t,isFullPage:s=!1}=e,a=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(l.Z,{size:20})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return s?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(a,{})})}):(0,n.jsx)(a,{})}},58427:function(e,t,s){var n=s(97458),l=s(40540),a=s(26833),i=s(9738),r=s(4534),o=s(52983),c=s(32672),d=s(1447),u=s(94281),x=s(53486),h=s(95293),p=s(19405),m=s(12753),f=s(22921),j=s(12361);t.Z=e=>{let{className:t,disabled:s=!1,size:v="tiny",showError:b=!0,selectedSchemaName:g,supportSelectAll:N=!1,excludedSchemas:w=[],onSelectSchema:y,onSelectCreateSchema:S}=e,[C,k]=(0,o.useState)(!1),_=(0,u.Xo)(l.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:z}=(0,c.d2)(),{data:E,isLoading:A,isSuccess:Z,isError:L,error:R,refetch:T}=(0,d.Q1)({projectRef:null==z?void 0:z.ref,connectionString:null==z?void 0:z.connectionString}),O=(E||[]).filter(e=>!w.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,n.jsxs)("div",{className:t,children:[A&&(0,n.jsx)(x.z,{type:"default",className:"w-full [&>span]:w-full",size:v,disabled:!0,children:(0,n.jsx)(h.O,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),b&&L&&(0,n.jsxs)(p.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,n.jsx)(p.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,n.jsxs)(p.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==R?void 0:R.message]}),(0,n.jsx)(x.z,{type:"default",size:"tiny",onClick:()=>T(),children:"Reload schemas"})]}),Z&&(0,n.jsxs)(m.J2,{open:C,onOpenChange:k,modal:!1,children:[(0,n.jsx)(m.xo,{asChild:!0,children:(0,n.jsx)(x.z,{size:v,disabled:s,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,n.jsx)(a.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:g?(0,n.jsxs)("div",{className:"w-full flex gap-1",children:[(0,n.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,n.jsx)("p",{className:"text-foreground",children:"*"===g?"All schemas":g})]}):(0,n.jsx)("div",{className:"w-full flex gap-1",children:(0,n.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schemaâ€¦"})})})}),(0,n.jsx)(m.yk,{className:"p-0 min-w-[200px]",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,n.jsxs)(f.mY,{children:[(0,n.jsx)(f.sZ,{placeholder:"Find schema..."}),(0,n.jsxs)(f.e8,{children:[(0,n.jsx)(f.rb,{children:"No schemas found"}),(0,n.jsx)(f.fu,{children:(0,n.jsxs)(j.xr,{className:(O||[]).length>7?"h-[210px]":"",children:[N&&(0,n.jsxs)(f.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{y("*"),k(!1)},onClick:()=>{y("*"),k(!1)},children:[(0,n.jsx)("span",{children:"All schemas"}),"*"===g&&(0,n.jsx)(i.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==O?void 0:O.map(e=>(0,n.jsxs)(f.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{y(e.name),k(!1)},onClick:()=>{y(e.name),k(!1)},children:[(0,n.jsx)("span",{children:e.name}),g===e.name&&(0,n.jsx)(i.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==S&&_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.zz,{}),(0,n.jsx)(f.fu,{children:(0,n.jsxs)(f.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{S(),k(!1)},onClick:()=>{S(),k(!1)},children:[(0,n.jsx)(r.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},65039:function(e,t,s){var n=s(97458),l=s(43633);t.Z=e=>{let{max:t=100,value:s=0,barClass:a="bg-foreground",bgClass:i="",type:r="vertical",borderClass:o="",labelBottom:c="",labelBottomClass:d="tabular-nums",labelTop:u="",labelTopClass:x=""}=e;if("horizontal"===r){let e=Number(s/t*100),r=c||u;return(0,n.jsxs)("div",{className:"flex flex-col w-full",children:[r&&(0,n.jsxs)("div",{className:"flex align-baseline justify-between pb-1 space-x-8",children:[(0,n.jsx)("p",{className:(0,l.cn)("text-foreground text-sm truncate capitalize-sentence",u.length>0&&"max-w-[75%]",d),children:c}),(0,n.jsx)("p",{className:(0,l.cn)("text-foreground-light text-sm",x),children:u})]}),(0,n.jsx)("div",{className:"relative rounded h-1 overflow-hidden w-full border p-0 ".concat(i||"bg-surface-400"," ").concat(o||"border-none"),children:(0,n.jsx)("div",{className:"absolute rounded inset-x-0 bottom-0 h-1 ".concat(a," transition-all"),style:{width:"".concat(e,"%")}})})]})}{let e=Number(s/t*35);return e<2&&(e=2),(0,n.jsx)("div",{className:"relative rounded w-5 overflow-hidden border p-1 ".concat(i||"bg-gray-400"," ").concat(o||"border-none"),style:{height:35},children:(0,n.jsx)("div",{className:"absolute inset-x-0 bottom-0 w-5 ".concat(a),style:{height:e}})})}}},72356:function(e,t,s){s.d(t,{z:function(){return r}});var n=s(28894),l=s(129),a=s(69080);async function i(e,t){let{projectRef:s,connectionString:n}=e;if(!s)throw Error("projectRef is required");let a=new Headers;n&&a.set("x-connection-encrypted",n);let{data:i,error:r}=await (0,l.U2)("/platform/pg-meta/{ref}/publications",{params:{header:{"x-connection-encrypted":n},path:{ref:s}},headers:a,signal:t});return r&&(0,l.S3)(r),i}let r=function(e){let{projectRef:t,connectionString:s}=e,{enabled:l=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(a.z.list(t),e=>{let{signal:n}=e;return i({projectRef:t,connectionString:s},n)},{enabled:l&&void 0!==t,...r})}},58901:function(e,t,s){s.d(t,{u:function(){return c}});var n=s(36457),l=s(64618),a=s(34549),i=s(129),r=s(69080);async function o(e){let{projectRef:t,connectionString:s,id:n,tables:l,publish_insert:a,publish_update:r,publish_delete:o,publish_truncate:c}=e,d=new Headers;s&&d.set("x-connection-encrypted",s);let u={id:n};void 0!==l&&(u.tables=l),void 0!==a&&(u.publish_insert=a),void 0!==r&&(u.publish_update=r),void 0!==o&&(u.publish_delete=o),void 0!==c&&(u.publish_truncate=c);let{data:x,error:h}=await (0,i.r$)("/platform/pg-meta/{ref}/publications",{params:{header:{"x-connection-encrypted":s},path:{ref:t},query:{id:n}},body:u,headers:d});return h&&(0,i.S3)(h),x}let c=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.NL)();return(0,l.D)(e=>o(e),{async onSuccess(t,s,n){let{projectRef:l}=s;await i.invalidateQueries(r.z.list(l)),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?a.Am.error("Failed to update database publication: ".concat(e.message)):t(e,s,n)},...s})}},69080:function(e,t,s){s.d(t,{z:function(){return n}});let n={list:e=>["projects",e,"database-publications"]}},41111:function(e,t,s){s.d(t,{k:function(){return r}});var n=s(28894),l=s(129),a=s(50259);async function i(e,t){let{projectRef:s,connectionString:n}=e;if(!s)throw Error("projectRef is required");let a=new Headers;n&&a.set("x-connection-encrypted",n);let{data:i,error:r}=await (0,l.U2)("/platform/pg-meta/{ref}/types",{params:{header:{"x-connection-encrypted":n},path:{ref:s}},headers:Object.fromEntries(a),signal:t});return r&&(0,l.S3)(r),i}let r=function(e){let{projectRef:t,connectionString:s}=e,{enabled:l=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(a.P.list(t),e=>{let{signal:n}=e;return i({projectRef:t,connectionString:s},n)},{enabled:l&&void 0!==t,...r})}},40288:function(e,t,s){s.d(t,{N:function(){return n}});let n={list:e=>["projects",e,"views"],listBySchema:(e,t)=>[...n.list(e),t]}},50998:function(e,t,s){s.d(t,{B:function(){return o}});var n=s(62213),l=s(52983),a=s(73512),i=s(56535);let r=e=>(0,n.v1)("schema",n.Oi.withDefault(e)),o=()=>{let{ref:e}=(0,a.UO)(),t=e&&e.length>0&&window.localStorage.getItem(i.dA.LAST_SELECTED_SCHEMA(e))||"public",[s,n]=r((0,l.useMemo)(()=>t,[e]));return(0,l.useEffect)(()=>{e&&e.length>0&&window.localStorage.setItem(i.dA.LAST_SELECTED_SCHEMA(e),s)},[s,e]),{selectedSchema:s,setSelectedSchema:n}}},24958:function(e,t,s){s.d(t,{Z:function(){return d}});var n=s(97458),l=s(52983),a=s(40392),i=s(92334),r=s(75675);let o=(0,l.createContext)({parentCallback:e=>{},parentSize:""});function c(e){let{className:t,id:s="",name:l="",label:a,afterLabel:c,beforeLabel:d,description:u,checked:x,value:h,onChange:p,onBlur:m,size:f="medium",disabled:j=!1,...v}=e,{formContextOnChange:b,values:g,handleBlur:N}=(0,r.G)(),w=(0,i.Z)("checkbox");return(0,n.jsx)(o.Consumer,{children:e=>{let{parentCallback:i,parentSize:r}=e,o=s||l||(a?a.toLowerCase().replace(/^[^A-Z0-9]+/gi,"").replace(/ /g,"-"):void 0);f=r||f;let y=l||o,S=null!=x?x:void 0,C=[w.container];return t&&C.push(t),g&&void 0===x&&(S=g[s||l]),(0,n.jsxs)("div",{className:C.join(" "),children:[(0,n.jsx)("input",{id:o,name:y,type:"checkbox",className:[w.base,w.size[f]].join(" "),onChange:function(e){i&&i(e),p&&p(e),b&&b(e)},onBlur:function(e){N&&setTimeout(()=>{N(e)},100),m&&m(e)},checked:S,value:h||o,disabled:j,...v}),(0,n.jsxs)("label",{className:[w.label.base,w.label[f]].join(" "),htmlFor:o,children:[(0,n.jsxs)("span",{children:[d&&(0,n.jsx)("span",{className:[w.label_before.base,w.label_before[f]].join(" "),children:d}),a,c&&(0,n.jsx)("span",{className:[w.label_after.base,w.label_after[f]].join(" "),children:c})]}),u&&(0,n.jsx)("p",{className:[w.description.base,w.description[f]].join(" "),children:u})]})]})}})}c.Group=function(e){let{id:t,layout:s="vertical",error:l,descriptionText:r,label:d,afterLabel:u,beforeLabel:x,labelOptional:h,children:p,className:m,options:f,onChange:j,size:v="medium"}=e,b=(0,i.Z)("checkbox");return(0,n.jsx)(a.l,{label:d,afterLabel:u,beforeLabel:x,labelOptional:h,layout:s,id:t,error:l,descriptionText:r,className:m,size:v,children:(0,n.jsx)(o.Provider,{value:{parentCallback:e=>{j&&j(e)},parentSize:v},children:(0,n.jsx)("div",{className:b.group,children:f?f.map(e=>(0,n.jsx)(c,{id:e.id,value:e.value,label:e.label,beforeLabel:e.beforeLabel,afterLabel:e.afterLabel,checked:e.checked,name:e.name,description:e.description,defaultChecked:e.defaultChecked},e.id)):p})})})};var d=c},75856:function(e,t,s){var n=s(97458),l=s(99517);s(52983);var a=s(92334);let i=e=>{let{open:t,children:s,className:a,...i}=e;return(0,n.jsx)(l.fC,{asChild:i.asChild,defaultOpen:i.defaultOpen,open:t,onOpenChange:i.onOpenChange,disabled:i.disabled,className:a,children:s})};i.Trigger=function(e){let{children:t,asChild:s}=e;return(0,n.jsx)(l.xz,{asChild:s,children:t})},i.Content=function(e){let{asChild:t,children:s,className:i}=e,r=(0,a.Z)("collapsible");return(0,n.jsx)(l.VY,{asChild:t,className:[r.content,i].join(" "),children:s})},t.ZP=i},59599:function(e,t,s){s.d(t,{Z:function(){return j}});var n=s(97458),l=s(44809),a=s(62923),i=s.n(a),r=s(52983),o=s(40392),c=s(5625),d=s(47196),u=s(92334),x=s(43633),h=s(75675);let p=(0,r.createContext)({onChange:e=>{},selected:void 0});var m=s(9738);function f(e){let{children:t,className:s,buttonClassName:a,descriptionText:m,error:f,icon:j,id:v="",name:b="",label:g,labelOptional:N,layout:w,value:y,onChange:S,onFocus:C,onBlur:k,style:_,size:z="medium",defaultValue:E,validation:A,disabled:Z,optionsWidth:L}=e,[R,T]=(0,r.useState)(void 0),[O,I]=(0,r.useState)({}),F=(0,u.Z)("listbox"),W=(0,r.useRef)(null),{formContextOnChange:B,values:P,errors:D,handleBlur:V,touched:M,fieldLevelValidation:X}=(0,h.G)();P&&!y&&(y=P[v||b],E=P[v||b]),f||(D&&!f&&(f=D[v||b]),f=M&&M[v||b]?f:void 0),(0,r.useEffect)(()=>{void 0!==y&&T(y)},[y]),(0,r.useEffect)(()=>{function e(){var e;document.documentElement.style.setProperty("--width-listbox","".concat(L||(null===(e=W.current)||void 0===e?void 0:e.offsetWidth),"px"))}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{var e;let s=i()(t);function n(e){return s.find(t=>t.props.value===e)}if(y){T(y);let e=n(y);I((null==e?void 0:e.props)?e.props:void 0);return}if(R){let e=n(R);I((null==e?void 0:e.props)?e.props:void 0);return}if(E){T(E);let e=n(R);I((null==e?void 0:e.props)?e.props:void 0);return}I(null===(e=s[0])||void 0===e?void 0:e.props)},[R]);let Q=[F.container,F.base,a],H=[F.addOnBefore];return f&&Q.push(F.variants.error),f||Q.push(F.variants.standard),j&&H.push(F.with_icon),z&&Q.push(F.size[z]),Z&&Q.push(F.disabled),(0,n.jsx)(o.l,{label:g,labelOptional:N,layout:w,id:v,error:f,descriptionText:m,className:s,style:_,size:z,children:(0,n.jsxs)(l.fC,{children:[(0,n.jsx)(l.xz,{asChild:!0,disabled:Z,children:(0,n.jsxs)("button",{"data-size":z,ref:W,className:(0,x.cn)(Q),onBlur:function(e){V&&V(e),k&&k(e)},onFocus:C,name:b,id:v,children:[(0,n.jsxs)("span",{className:(0,x.cn)(H),children:[j&&(0,n.jsx)(d.Z,{size:z,icon:j}),(null==O?void 0:O.addOnBefore)&&(0,n.jsx)(O.addOnBefore,{}),(0,n.jsx)("span",{className:F.label,children:null==O?void 0:O.label})]}),(0,n.jsx)("span",{className:F.chevron_container,children:(0,n.jsx)("svg",{className:F.chevron,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),f&&(0,n.jsx)("div",{className:F.actions_container,children:f&&(0,n.jsx)(c.Z,{size:z})})]})}),(0,n.jsx)(l.VY,{sideOffset:6,loop:!0,side:"bottom",align:"center",className:F.options_container,children:(0,n.jsx)("div",{children:(0,n.jsx)(p.Provider,{value:{onChange:function(e){S&&S(e),T(e);let t={};t.target={type:"select",name:b,id:v,value:e,checked:void 0},B&&B(t),A&&X(v,A(e))},selected:R},children:t})})})]})})}f.Option=function(e){let{id:t,value:s,label:a,disabled:i=!1,children:r,className:o="",addOnBefore:c}=e,d=(0,u.Z)("listbox");return(0,n.jsx)(p.Consumer,{children:e=>{let{onChange:a,selected:u}=e,h=u===s;return(0,n.jsxs)(l.ck,{className:(0,x.cn)(d.option,h?d.option_active:" ",i?d.option_disabled:" ",o),onSelect:()=>i?{}:a(s),children:[(0,n.jsxs)("div",{className:d.option_inner,children:[c&&c({active:h,selected:u}),(0,n.jsx)("span",{children:"function"==typeof r?r({active:h,selected:u}):r})]}),h?(0,n.jsx)("span",{className:(0,x.cn)(d.option_check,h?d.option_check_active:""),children:(0,n.jsx)(m.Z,{className:d.option_check_icon,"aria-hidden":"true"})}):null]},t)}})};var j=f}}]);