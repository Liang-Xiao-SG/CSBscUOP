(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3055],{76996:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/schemas",function(){return n(531)}])},2929:function(e,t,n){"use strict";n.d(t,{AH:function(){return p},Fh:function(){return g},jq:function(){return f}});var s=n(97458),r=n(71534),i=n(99033),l=n(58312),a=n(72519),o=n(8358),c=n(818),d=n(83145),u=n.n(d),m=n(9069),h=n(43633),x=n(53486);let f=320,p=40,g=e=>{let{data:t,targetPosition:n,sourcePosition:d,placeholder:p}=e,g="!h-px !w-px !min-w-0 !min-h-0 !cursor-grab !border-0 !opacity-0",y="h-[22px]";return(0,s.jsx)(s.Fragment,{children:t.isForeign?(0,s.jsxs)("header",{className:"text-[0.55rem] px-2 py-1 border-[0.5px] rounded-[4px] bg-alternative text-default flex gap-1 items-center",children:[t.name,n&&(0,s.jsx)(m.HH,{type:"target",id:t.name,position:n,className:(0,h.cn)(g)})]}):(0,s.jsxs)("div",{className:"border-[0.5px] overflow-hidden rounded-[4px] shadow-sm",style:{width:f/2},children:[(0,s.jsxs)("header",{className:(0,h.cn)("text-[0.55rem] pl-2 pr-1 bg-alternative text-default flex items-center justify-between",y),children:[(0,s.jsxs)("div",{className:"flex gap-x-1 items-center",children:[(0,s.jsx)(r.Z,{strokeWidth:1,size:12,className:"text-light"}),t.name]}),t.id&&!p&&(0,s.jsx)(x.z,{asChild:!0,type:"text",className:"px-0 w-[16px] h-[16px] rounded",children:(0,s.jsx)(u(),{href:"/project/".concat(t.ref,"/editor/").concat(t.id),children:(0,s.jsx)(i.Z,{size:10,className:"text-foreground-light"})})})]}),t.columns.map(e=>(0,s.jsxs)("div",{className:(0,h.cn)("text-[8px] leading-5 relative flex flex-row justify-items-start","bg-surface-100","border-t","border-t-[0.5px]","hover:bg-scale-500 transition cursor-default",y),children:[(0,s.jsxs)("div",{className:(0,h.cn)("gap-[0.24rem] flex mx-2 align-middle items-center justify-start",e.isPrimary&&"basis-1/5"),children:[e.isPrimary&&(0,s.jsx)(l.Z,{size:8,strokeWidth:1,className:(0,h.cn)("flex-shrink-0","text-light")}),e.isNullable&&(0,s.jsx)(a.Z,{size:8,strokeWidth:1,className:"flex-shrink-0 text-light"}),!e.isNullable&&(0,s.jsx)(a.Z,{size:8,strokeWidth:1,fill:"currentColor",className:"flex-shrink-0 text-light"}),e.isUnique&&(0,s.jsx)(o.Z,{size:8,strokeWidth:1,className:"flex-shrink-0 text-light"}),e.isIdentity&&(0,s.jsx)(c.Z,{size:8,strokeWidth:1,className:"flex-shrink-0 text-light"})]}),(0,s.jsxs)("div",{className:"flex w-full justify-between",children:[(0,s.jsx)("span",{className:"text-ellipsis overflow-hidden whitespace-nowrap max-w-[85px]",children:e.name}),(0,s.jsx)("span",{className:"px-2 inline-flex justify-end font-mono text-lighter text-[0.4rem]",children:e.format})]}),n&&(0,s.jsx)(m.HH,{type:"target",id:e.id,position:n,className:(0,h.cn)(g,"!left-0")}),d&&(0,s.jsx)(m.HH,{type:"source",id:e.id,position:d,className:(0,h.cn)(g,"!right-0")})]},e.id))]})})}},75165:function(e,t,n){"use strict";n.d(t,{T:function(){return h},b:function(){return u}});var s=n(38143),r=n.n(s),i=n(3010),l=n.n(i),a=n(9069);n(96689);var o=n(56535),c=n(6433),d=n(2929);async function u(e,t,n){var s;if(!(null==n?void 0:n.length))return{nodes:[],edges:[]};let r=n.map(t=>{let n=(t.columns||[]).map(e=>({id:e.id,isPrimary:t.primary_keys.some(t=>t.name===e.name),name:e.name,format:e.format,isNullable:e.is_nullable,isUnique:e.is_unique,isUpdateable:e.is_updatable,isIdentity:e.is_identity}));return{id:"".concat(t.id),type:"table",data:{ref:e,id:t.id,name:t.name,isForeign:!1,columns:n},position:{x:0,y:0}}}),i=[],a=n[0].schema;for(let t of l()(n.flatMap(e=>e.relationships),"id")){if(t.source_schema!==a)continue;if(t.target_table_schema!==a){r.push({id:t.constraint_name,type:"table",data:{ref:e,name:"".concat(t.target_table_schema,".").concat(t.target_table_name,".").concat(t.target_column_name),isForeign:!0,columns:[]},position:{x:0,y:0}});let[s,l]=m(n,t.source_table_name,t.source_column_name);s&&i.push({id:String(t.id),source:s,sourceHandle:l,target:t.constraint_name,targetHandle:t.constraint_name});continue}let[s,l]=m(n,t.source_table_name,t.source_column_name),[o,c]=m(n,t.target_table_name,t.target_column_name);s&&o&&i.push({id:String(t.id),source:s,sourceHandle:l,target:o,targetHandle:c})}let d=localStorage.getItem(o.dA.SCHEMA_VISUALIZER_POSITIONS(null!=e?e:"project",null!==(s=null==t?void 0:t.id)&&void 0!==s?s:0)),u=(0,c.dW)(d);return u?x(r,i,u):h(r,i)}function m(e,t,n){for(let s of e)if(t===s.name){for(let e of s.columns||[])if(n===e.name)return[String(s.id),e.id]}return[]}let h=(e,t)=>{let n=new(r()).graphlib.Graph;return n.setDefaultEdgeLabel(()=>({})),n.setGraph({rankdir:"LR",align:"UR",nodesep:25,ranksep:50}),e.forEach(e=>{n.setNode(e.id,{width:d.jq/2,height:d.AH/2*(e.data.columns.length+1)})}),t.forEach(e=>{n.setEdge(e.source,e.target)}),r().layout(n),e.forEach(e=>{let t=n.node(e.id);return e.targetPosition=a.Ly.Left,e.sourcePosition=a.Ly.Right,e.position={x:t.x-t.width/2,y:t.y-t.height/2},e}),{nodes:e,edges:t}},x=(e,t,n)=>{let s=e.filter(e=>!(e.id in n)),r=0,i={x:0,y:-(25+d.AH+10*s.length)};return e.forEach(e=>{let t=null==n?void 0:n[e.id];e.targetPosition=a.Ly.Left,e.sourcePosition=a.Ly.Right,t?e.position=t:(e.position={x:i.x+10*r,y:i.y+10*r},r+=1)}),{nodes:e,edges:t}}},405:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var s=n(97458),r=n(32691),i=n(63640),l=n(4879),a=n(31723),o=n(17164),c=n(289),d=n(76026),u=n(15631),m=n(56535),h=n(11794);let x=(e,t)=>{var n;let r=null!==(n=null==e?void 0:e.ref)&&void 0!==n?n:"default",{pgNetExtensionExists:i,pitrEnabled:l,columnLevelPrivileges:a}=t||{};return[{title:"Database Management",items:[{name:"Schema Visualizer",key:"schemas",url:"/project/".concat(r,"/database/schemas"),items:[]},{name:"Tables",key:"tables",url:"/project/".concat(r,"/database/tables"),items:[]},{name:"Functions",key:"functions",url:"/project/".concat(r,"/database/functions"),items:[]},{name:"Triggers",key:"triggers",url:"/project/".concat(r,"/database/triggers"),items:[]},{name:"Enumerated Types",key:"types",url:"/project/".concat(r,"/database/types"),items:[]},{name:"Extensions",key:"extensions",url:"/project/".concat(r,"/database/extensions"),items:[]},{name:"Indexes",key:"indexes",url:"/project/".concat(r,"/database/indexes"),items:[]},{name:"Publications",key:"publications",url:"/project/".concat(r,"/database/publications"),items:[]}]},{title:"Access Control",items:[{name:"Roles",key:"roles",url:"/project/".concat(r,"/database/roles"),items:[]},...a?[{name:"Column Privileges",key:"column-privileges",url:"/project/".concat(r,"/database/column-privileges"),items:[],label:"ALPHA"}]:[],{name:"Policies",key:"policies",url:"/project/".concat(r,"/auth/policies"),rightIcon:(0,s.jsx)(h.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]}]},{title:"Platform",items:[...m.Qy?[{name:"Backups",key:"backups",url:l?"/project/".concat(r,"/database/backups/pitr"):"/project/".concat(r,"/database/backups/scheduled"),items:[]}]:[],{name:"Migrations",key:"migrations",url:"/project/".concat(r,"/database/migrations"),items:[]},{name:"Wrappers",key:"wrappers",url:"/project/".concat(r,"/integrations?category=wrapper"),rightIcon:(0,s.jsx)(h.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]},...i?[{name:"Webhooks",key:"hooks",url:"/project/".concat(r,"/integrations/webhooks/overview"),rightIcon:(0,s.jsx)(h.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]}]:[]]},{title:"Tools",items:[{name:"Security Advisor",key:"security-advisor",url:"/project/".concat(r,"/advisors/security"),rightIcon:(0,s.jsx)(h.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]},{name:"Performance Advisor",key:"performance-advisor",url:"/project/".concat(r,"/advisors/performance"),rightIcon:(0,s.jsx)(h.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]},{name:"Query Performance",key:"query-performance",url:"/project/".concat(r,"/advisors/query-performance"),rightIcon:(0,s.jsx)(h.Z,{strokeWidth:1,className:"h-4 w-4"}),items:[]}]}]},f=()=>{let e=(0,c.Vm)(),t=(0,r.useRouter)().pathname.split("/")[4],{data:n}=(0,a.H)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:d}=(0,o.F)({projectRef:null==e?void 0:e.ref}),u=void 0!==(null!=n?n:[]).find(e=>"pg_net"===e.name),m=(null==d?void 0:d.selected_addons.find(e=>"pitr"===e.type))!==void 0,h=(0,i.ar)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l.Q,{page:t,menu:x(e,{pgNetExtensionExists:u,pitrEnabled:m,columnLevelPrivileges:h})})})};var p=(0,d.Q)(e=>{let{children:t}=e;return(0,s.jsx)(u.Z,{product:"Database",productMenu:(0,s.jsx)(f,{}),isBlocking:!1,children:t})})},38057:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var s=n(97458),r=n(73512),i=n(26328),l=n(78859),a=n(88803),o=n(3666),c=n(7350),d=n(16696),u=n(65206),m=n(83145),h=n.n(m),x=n(32691),f=n(52983),p=n(56535),g=n(43633),y=n(53486),j=n(78978),v=n(95909),b=()=>{let e=(0,x.useRouter)(),[t,n]=(0,f.useState)(!1),{ref:i}=(0,r.UO)();return(0,s.jsxs)("div",{className:"h-14 w-full flex flex-row md:hidden",children:[(0,s.jsxs)("nav",{className:(0,g.cn)("group px-4 z-10 w-full h-14","border-b bg-dash-sidebar border-default shadow-xl","transition-width duration-200","hide-scrollbar flex flex-row items-center justify-between overflow-x-auto"),children:[(0,s.jsx)(h(),{href:p.Qy?"/projects":"/project/".concat(i),className:"flex items-center h-[26px] w-[26px] min-w-[26px]",children:(0,s.jsx)("img",{alt:"Supabase",src:"".concat(e.basePath,"/img/supabase-logo.svg"),className:"absolute h-[26px] w-[26px] cursor-pointer rounded"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(j.av,{children:(0,s.jsx)("button",{className:(0,g.cn)("group","flex-grow h-[30px] rounded-md","p-2","flex items-center justify-between","bg-transparent border-none text-foreground-lighter","hover:bg-opacity-100 hover:border-strong hover:text-foreground-light","focus-visible:!outline-4 focus-visible:outline-offset-1 focus-visible:outline-brand-600","transition"),children:(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)(d.Z,{size:18,strokeWidth:2})})})}),(0,s.jsx)("button",{title:"Menu dropdown button",className:(0,g.cn)((0,y.d)({type:"default"}),"flex lg:hidden border-default bg-surface-100/75 text-foreground-light rounded-md min-w-[30px] w-[30px] h-[30px] data-[state=open]:bg-overlay-hover/30"),onClick:()=>n(!0),children:(0,s.jsx)(u.Z,{size:18,strokeWidth:1})})]})]}),(0,s.jsx)(v.Z,{open:t,onOpenChange:n,"data-state":"expanded",children:(0,s.jsx)(a.TZ,{})})]})},k=n(32672),w=e=>{let{children:t,showProductMenu:n}=e,{ref:d}=(0,r.UO)();return(0,s.jsx)(o.Hn,{defaultOpen:!1,children:(0,s.jsx)(k.Ml,{projectRef:d,children:(0,s.jsx)(l.EA,{children:(0,s.jsxs)("div",{className:"flex flex-col h-screen w-screen",children:[(0,s.jsx)(i.l,{}),(0,s.jsxs)("div",{className:"flex-shrink-0",children:[(0,s.jsx)(b,{}),(0,s.jsx)(c.N,{showProductMenu:n})]}),(0,s.jsxs)("div",{className:"flex flex-1 w-full overflow-y-hidden",children:[(0,s.jsx)(a.YE,{}),(0,s.jsx)("div",{className:"flex-grow h-full overflow-y-auto",children:t})]})]})})})})}},47594:function(e,t,n){"use strict";var s=n(97458),r=n(99033),i=n(2861),l=n(83145),a=n.n(l),o=n(53486);t.Z=e=>{let{title:t="",size:n="medium",children:l,ctaButtonLabel:c="",infoButtonLabel:d="",infoButtonUrl:u="",onClickCta:m=()=>{},loading:h=!1,disabled:x=!1,disabledMessage:f="",ctaUrl:p}=e,g=c&&m||u&&d;return(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)("div",{className:"flex space-x-4 rounded border bg-surface-100 p-6 shadow-md",children:(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsxs)("div",{className:"".concat("medium"===n?"w-80":"w-[400px]"," space-y-4"),children:[(0,s.jsx)("h5",{className:"text-foreground",children:t}),(0,s.jsx)("div",{className:"flex flex-col space-y-2 text-foreground-light",children:l}),g&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[c&&p?(0,s.jsx)(o.z,{asChild:!0,type:"primary",children:(0,s.jsx)(a(),{href:p,children:c})}):c&&m?(0,s.jsx)(i.u,{type:"primary",onClick:m,loading:h,disabled:h||x,tooltip:{content:{side:"bottom",text:x&&f.length>0?f:void 0}},children:c}):null,u&&d?(0,s.jsx)(o.z,{type:"default",icon:(0,s.jsx)(r.Z,{strokeWidth:1.5}),children:(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",href:u,children:d})}):null]})]})})})})}},74172:function(e,t,n){"use strict";var s=n(97458),r=n(83145),i=n.n(r),l=n(33880),a=n(33971),o=n(53486);t.Z=e=>{let{name:t="",isActive:n,isExternal:r,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:h,textClassName:x="",hoverText:f="",label:p}=e,g=(0,s.jsx)(l.ZP.Item,{icon:c,rounded:!0,active:n,onClick:h,children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,s.jsxs)("div",{title:f||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+x,children:[(0,s.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==p&&(0,s.jsx)(a.C,{variant:"warning",className:"py-0 px-1.5 capitalize",children:p})]}),d&&(0,s.jsx)("div",{children:d})]})});return u?r?(0,s.jsx)(o.z,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,s.jsx)(i(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,s.jsx)(i(),{href:u,className:"block",target:m,children:g}):g}},4879:function(e,t,n){"use strict";n.d(t,{Q:function(){return a}});var s=n(97458),r=n(33880),i=n(33971),l=n(74172),a=e=>{let{page:t,menu:n}=e;return(0,s.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto",children:(0,s.jsx)(r.ZP,{type:"pills",children:n.map((e,a)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"my-6 space-y-8",children:(0,s.jsxs)("div",{className:"mx-3",children:[(0,s.jsx)(r.ZP.Group,{title:e.title?(0,s.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,s.jsx)("span",{children:e.title}),e.isPreview&&(0,s.jsx)(i.C,{variant:"warning",children:"Not production ready"})]}):null}),(0,s.jsx)("div",{children:e.items.map(e=>{let n=e.pages?e.pages.includes(t):t===e.key;return(0,s.jsx)(l.Z,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:n,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),a!==n.length-1&&(0,s.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},58427:function(e,t,n){"use strict";var s=n(97458),r=n(40540),i=n(26833),l=n(9738),a=n(4534),o=n(52983),c=n(32672),d=n(1447),u=n(94281),m=n(53486),h=n(95293),x=n(19405),f=n(12753),p=n(22921),g=n(12361);t.Z=e=>{let{className:t,disabled:n=!1,size:y="tiny",showError:j=!0,selectedSchemaName:v,supportSelectAll:b=!1,excludedSchemas:k=[],onSelectSchema:w,onSelectCreateSchema:N}=e,[_,Z]=(0,o.useState)(!1),C=(0,u.Xo)(r.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:E}=(0,c.d2)(),{data:S,isLoading:M,isSuccess:z,isError:A,error:R,refetch:P}=(0,d.Q1)({projectRef:null==E?void 0:E.ref,connectionString:null==E?void 0:E.connectionString}),W=(S||[]).filter(e=>!k.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,s.jsxs)("div",{className:t,children:[M&&(0,s.jsx)(m.z,{type:"default",className:"w-full [&>span]:w-full",size:y,disabled:!0,children:(0,s.jsx)(h.O,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),j&&A&&(0,s.jsxs)(x.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,s.jsx)(x.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,s.jsxs)(x.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==R?void 0:R.message]}),(0,s.jsx)(m.z,{type:"default",size:"tiny",onClick:()=>P(),children:"Reload schemas"})]}),z&&(0,s.jsxs)(f.J2,{open:_,onOpenChange:Z,modal:!1,children:[(0,s.jsx)(f.xo,{asChild:!0,children:(0,s.jsx)(m.z,{size:y,disabled:n,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,s.jsx)(i.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:v?(0,s.jsxs)("div",{className:"w-full flex gap-1",children:[(0,s.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,s.jsx)("p",{className:"text-foreground",children:"*"===v?"All schemas":v})]}):(0,s.jsx)("div",{className:"w-full flex gap-1",children:(0,s.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schemaâ€¦"})})})}),(0,s.jsx)(f.yk,{className:"p-0 min-w-[200px]",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,s.jsxs)(p.mY,{children:[(0,s.jsx)(p.sZ,{placeholder:"Find schema..."}),(0,s.jsxs)(p.e8,{children:[(0,s.jsx)(p.rb,{children:"No schemas found"}),(0,s.jsx)(p.fu,{children:(0,s.jsxs)(g.xr,{className:(W||[]).length>7?"h-[210px]":"",children:[b&&(0,s.jsxs)(p.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w("*"),Z(!1)},onClick:()=>{w("*"),Z(!1)},children:[(0,s.jsx)("span",{children:"All schemas"}),"*"===v&&(0,s.jsx)(l.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==W?void 0:W.map(e=>(0,s.jsxs)(p.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w(e.name),Z(!1)},onClick:()=>{w(e.name),Z(!1)},children:[(0,s.jsx)("span",{children:e.name}),v===e.name&&(0,s.jsx)(l.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==N&&C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.zz,{}),(0,s.jsx)(p.fu,{children:(0,s.jsxs)(p.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{N(),Z(!1)},onClick:()=>{N(),Z(!1)},children:[(0,s.jsx)(a.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},31723:function(e,t,n){"use strict";n.d(t,{H:function(){return c}});var s=n(28894),r=n(129),i=n(39310),l=n(289),a=n(56535);async function o(e,t){let{projectRef:n,connectionString:s}=e;if(!n)throw Error("projectRef is required");let i=new Headers;s&&i.set("x-connection-encrypted",s);let{data:l,error:a}=await (0,r.U2)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":s},path:{ref:n}},headers:i,signal:t});return a&&(0,r.S3)(a),l}let c=function(e){let{projectRef:t,connectionString:n}=e,{enabled:r=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,l.Vm)(),u=(null==d?void 0:d.status)===a.S.ACTIVE_HEALTHY;return(0,s.a)(i.o.list(t),e=>{let{signal:s}=e;return o({projectRef:t,connectionString:n},s)},{enabled:r&&void 0!==t&&u,...c})}},50998:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});var s=n(62213),r=n(52983),i=n(73512),l=n(56535);let a=e=>(0,s.v1)("schema",s.Oi.withDefault(e)),o=()=>{let{ref:e}=(0,i.UO)(),t=e&&e.length>0&&window.localStorage.getItem(l.dA.LAST_SELECTED_SCHEMA(e))||"public",[n,s]=a((0,r.useMemo)(()=>t,[e]));return(0,r.useEffect)(()=>{e&&e.length>0&&window.localStorage.setItem(l.dA.LAST_SELECTED_SCHEMA(e),n)},[n,e]),{selectedSchema:n,setSelectedSchema:s}}},531:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var s=n(97458),r=n(9069),i=n(64305),l=n(11968),a=n(85847),o=n(98809),c=n(52983),d=n(33235),u=n(61768),m=n(58152),h=n(73319),x=n(72905),f=n(30271);let p=({id:e,x:t,y:n,width:s,height:r,style:i,color:l,strokeColor:a,strokeWidth:o,className:d,borderRadius:m,shapeRendering:h,onClick:x,selected:f})=>{let{background:p,backgroundColor:g}=i||{};return c.createElement("rect",{className:(0,u.Z)(["react-flow__minimap-node",{selected:f},d]),x:t,y:n,rx:m,ry:m,width:s,height:r,fill:l||p||g,stroke:a,strokeWidth:o,shapeRendering:h,onClick:x?t=>x(t,e):void 0})};p.displayName="MiniMapNode";var g=(0,c.memo)(p);let y=e=>e.nodeOrigin,j=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),v=e=>e instanceof Function?e:()=>e;var b=(0,c.memo)(function({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:s=5,nodeStrokeWidth:i=2,nodeComponent:l=g,onClick:a}){let o=(0,r.oR)(j,m.X),d=(0,r.oR)(y),u=v(t),h=v(e),x=v(n),f="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return c.createElement(c.Fragment,null,o.map(e=>{let{x:t,y:n}=(0,r.VP)(e,d).positionAbsolute;return c.createElement(l,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:x(e),color:u(e),borderRadius:s,strokeColor:h(e),strokeWidth:i,shapeRendering:f,onClick:a,id:e.id})}))});let k=e=>{let t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?(0,r.oI)((0,r.RX)(t,e.nodeOrigin),n):n,rfId:e.rfId}};function w({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:s="#e2e2e2",nodeClassName:i="",nodeBorderRadius:l=5,nodeStrokeWidth:a=2,nodeComponent:o,maskColor:d="rgb(240, 240, 240, 0.6)",maskStrokeColor:p="none",maskStrokeWidth:g=1,position:y="bottom-right",onClick:j,onNodeClick:v,pannable:w=!1,zoomable:N=!1,ariaLabel:_="React Flow mini map",inversePan:Z=!1,zoomStep:C=10,offsetScale:E=5}){let S=(0,r.AC)(),M=(0,c.useRef)(null),{boundingRect:z,viewBB:A,rfId:R}=(0,r.oR)(k,m.X),P=e?.width??200,W=e?.height??150,I=Math.max(z.width/P,z.height/W),T=I*P,L=I*W,H=E*I,F=z.x-(T-z.width)/2-H,O=z.y-(L-z.height)/2-H,D=T+2*H,V=L+2*H,q=`react-flow__minimap-desc-${R}`,$=(0,c.useRef)(0);$.current=I,(0,c.useEffect)(()=>{if(M.current){let e=(0,x.Z)(M.current),t=(0,h.sP)().on("zoom",w?e=>{let{transform:t,d3Selection:n,d3Zoom:s,translateExtent:r,width:i,height:l}=S.getState();if("mousemove"!==e.sourceEvent.type||!n||!s)return;let a=$.current*Math.max(1,t[2])*(Z?-1:1),o={x:t[0]-e.sourceEvent.movementX*a,y:t[1]-e.sourceEvent.movementY*a},c=h.CR.translate(o.x,o.y).scale(t[2]),d=s.constrain()(c,[[0,0],[i,l]],r);s.transform(n,d)}:null).on("zoom.wheel",N?e=>{let{transform:t,d3Selection:n,d3Zoom:s}=S.getState();if("wheel"!==e.sourceEvent.type||!n||!s)return;let r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*C,i=t[2]*Math.pow(2,r);s.scaleTo(n,i)}:null);return e.call(t),()=>{e.on("zoom",null)}}},[w,N,Z,C]);let U=j?e=>{let t=(0,f.Z)(e);j(e,{x:t[0],y:t[1]})}:void 0;return c.createElement(r.s_,{position:y,style:e,className:(0,u.Z)(["react-flow__minimap",t]),"data-testid":"rf__minimap"},c.createElement("svg",{width:P,height:W,viewBox:`${F} ${O} ${D} ${V}`,role:"img","aria-labelledby":q,ref:M,onClick:U},_&&c.createElement("title",{id:q},_),c.createElement(b,{onClick:v?(e,t)=>{v(e,S.getState().nodeInternals.get(t))}:void 0,nodeColor:s,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:i,nodeStrokeWidth:a,nodeComponent:o}),c.createElement("path",{className:"react-flow__minimap-mask",d:`M${F-H},${O-H}h${D+2*H}v${V+2*H}h${-D-2*H}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fill:d,fillRule:"evenodd",stroke:p,strokeWidth:g,pointerEvents:"none"})))}w.displayName="MiniMap";var N=(0,c.memo)(w);n(96689);var _=n(73512),Z=n(32672),C=n(47594),E=n(84261),S=n(2861),M=n(58427),z=n(1447),A=n(21925),R=n(35721),P=n(50998),W=n(56535),I=n(58312),T=n(818),L=n(8358),H=n(72519);let F=()=>(0,s.jsx)("div",{className:"absolute bottom-0 left-0 border-t flex justify-center px-1 py-2 shadow-md bg-surface-100 w-full z-10",children:(0,s.jsxs)("ul",{className:"flex flex-wrap  items-center justify-center gap-4",children:[(0,s.jsxs)("li",{className:"flex items-center text-xs font-mono gap-1",children:[(0,s.jsx)(I.Z,{size:15,strokeWidth:1.5,className:"flex-shrink-0 text-light"}),"Primary key"]}),(0,s.jsxs)("li",{className:"flex items-center text-xs font-mono gap-1",children:[(0,s.jsx)(T.Z,{size:15,strokeWidth:1.5,className:"flex-shrink-0 text-light"}),"Identity"]}),(0,s.jsxs)("li",{className:"flex items-center text-xs font-mono gap-1",children:[(0,s.jsx)(L.Z,{size:15,strokeWidth:1.5,className:"flex-shrink-0 text-light"}),"Unique"]}),(0,s.jsxs)("li",{className:"flex items-center text-xs font-mono gap-1",children:[(0,s.jsx)(H.Z,{size:15,strokeWidth:1.5,className:"flex-shrink-0 text-light"}),"Nullable"]}),(0,s.jsxs)("li",{className:"flex items-center text-xs font-mono gap-1",children:[(0,s.jsx)(H.Z,{size:15,strokeWidth:1.5,fill:"currentColor",className:"flex-shrink-0 text-light"}),"Non-Nullable"]})]})});var O=n(75165),D=n(2929);let V=()=>{var e;let{ref:t}=(0,_.UO)(),{resolvedTheme:n}=(0,o.F)(),{project:u}=(0,Z.d2)(),{selectedSchema:m,setSelectedSchema:h}=(0,P.B)(),[x,f]=(0,c.useState)(!1),p=(null==n?void 0:n.includes("dark"))?"rgb(17, 19, 24, .8)":"rgb(237, 237, 237, .8)",g=(0,r._K)(),y=(0,c.useMemo)(()=>({table:D.Fh}),[]),{data:j,error:v,isSuccess:b,isLoading:k,isError:w}=(0,z.Q1)({projectRef:null==u?void 0:u.ref,connectionString:null==u?void 0:u.connectionString}),{data:I,error:T,isSuccess:L,isLoading:H,isError:V}=(0,A.Bj)({projectRef:null==u?void 0:u.ref,connectionString:null==u?void 0:u.connectionString,schema:m,includeColumns:!0}),q=(null!=j?j:[]).find(e=>e.name===m),[$,U]=(0,R._)(W.dA.SCHEMA_VISUALIZER_POSITIONS(t,null!==(e=null==q?void 0:q.id)&&void 0!==e?e:0),{}),B=()=>{if(void 0===q)return console.error("Schema is required");let e=g.getNodes();e.length>0&&U(e.reduce((e,t)=>({...e,[t.id]:t.position}),{}))};return(0,c.useEffect)(()=>{if(L&&b&&I.length>0){let e=j.find(e=>e.name===m);(0,O.b)(t,e,I).then(e=>{let{nodes:t,edges:n}=e;g.setNodes(t),g.setEdges(n),setTimeout(()=>g.fitView({}))})}},[L,b,I,n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-muted",children:[k&&(0,s.jsx)("div",{className:"h-[34px] w-[260px] bg-foreground-lighter rounded shimmering-loader"}),w&&(0,s.jsx)(E.Z,{error:v,subject:"Failed to retrieve schemas"}),b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(M.Z,{className:"w-[180px]",size:"tiny",showError:!1,selectedSchemaName:m,onSelectSchema:h}),(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)(S.u,{type:"default",loading:x,className:"px-1.5",icon:(0,s.jsx)(l.Z,{}),onClick:()=>{let e=document.querySelector(".react-flow__viewport");if(!e)return;f(!0);let n=e.clientWidth,s=e.clientHeight,{x:r,y:l,zoom:a}=g.getViewport();(0,i.YM)(e,{backgroundColor:"white",width:n,height:s,style:{width:n.toString(),height:s.toString(),transform:"translate(".concat(r,"px, ").concat(l,"px) scale(").concat(a,")")}}).then(e=>{let n=document.createElement("a");n.setAttribute("download","supabase-schema-".concat(t,".png")),n.setAttribute("href",e),n.click()}).finally(()=>{f(!1)})},tooltip:{content:{side:"bottom",text:"Download current view as PNG"}}}),(0,s.jsx)(S.u,{type:"default",onClick:()=>{let e=g.getNodes(),t=g.getEdges();(0,O.T)(e,t),g.setNodes(e),g.setEdges(t),setTimeout(()=>g.fitView({})),B()},tooltip:{content:{side:"bottom",text:"Automatically arrange the layout of all nodes"}},children:"Auto layout"})]})]})]}),H&&(0,s.jsxs)("div",{className:"w-full h-full flex items-center justify-center gap-x-2",children:[(0,s.jsx)(a.Z,{className:"animate-spin text-foreground-light",size:16}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Loading tables"})]}),V&&(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center px-20",children:(0,s.jsx)(E.Z,{subject:"Failed to retrieve tables",error:T})}),L&&(0,s.jsx)(s.Fragment,{children:0===I.length?(0,s.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,s.jsx)(C.Z,{title:"No tables created yet",ctaButtonLabel:"Create a new table",ctaUrl:"/project/".concat(t,"/editor?create=table"),children:(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:['There are no tables found in the schema "',m,'"']})})}):(0,s.jsx)("div",{className:"w-full h-full",children:(0,s.jsxs)(r.x$,{defaultNodes:[],defaultEdges:[],defaultEdgeOptions:{type:"smoothstep",animated:!0,deletable:!1,style:{stroke:"hsl(var(--border-stronger))",strokeWidth:1}},nodeTypes:y,fitView:!0,minZoom:.8,maxZoom:1.8,proOptions:{hideAttribution:!0},onNodeDragStop:()=>B(),children:[(0,s.jsx)(d.A,{gap:16,className:"[&>*]:stroke-foreground-muted opacity-[25%]",variant:d.T.Dots,color:"inherit"}),(0,s.jsx)(N,{pannable:!0,zoomable:!0,nodeColor:"#111318",maskColor:p,className:"border rounded-md shadow-sm"}),(0,s.jsx)(F,{})]})})})]})};var q=n(405),$=n(38057);let U=()=>(0,s.jsx)("div",{className:"flex w-full h-full flex-col",children:(0,s.jsx)(r.tV,{children:(0,s.jsx)(V,{})})});U.getLayout=e=>(0,s.jsx)($.Z,{children:(0,s.jsx)(q.Z,{title:"Database",children:e})});var B=U},72439:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},11794:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},68141:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]])},72519:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]])},8358:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]])},818:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},58312:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},56476:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},76524:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]])},65206:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},30808:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},36462:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("PanelLeftDashed",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 14v1",key:"askpd8"}],["path",{d:"M9 19v2",key:"16tejx"}],["path",{d:"M9 3v2",key:"1noubl"}],["path",{d:"M9 9v1",key:"19ebxg"}]])},66136:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]])},71534:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(74234).Z)("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]])},78978:function(e,t,n){"use strict";n.d(t,{B_:function(){return y},_f:function(){return k},aG:function(){return g},av:function(){return b}});var s=n(97458),r=n(72439),i=n(28570),l=n(52983),a=n(9060),o=n(73512),c=n(39957),d=n(43633),u=n(22921),m=n(53486),h=n(79180),x=n(92654),f=n(69133),p=n(82040);function g(e){let{className:t}=e,n=(0,x.Wo)(),i=(0,x.yg)();if(n)return(0,s.jsxs)("button",{className:(0,d.cn)("p-2 bg-overlay flex items-center gap-2 text-xs text-foreground-muted",t),onClick:i,children:[(0,s.jsx)(r.Z,{width:12,height:12}),n.name]})}let y=(0,l.forwardRef)((e,t)=>{let{children:n,className:r,...i}=e;return(0,s.jsx)(u.mY,{ref:t,className:(0,d.cn)("h-full w-full flex flex-col overflow-hidden","[&_[cmdk-group]]:px-2 [&_[cmdk-group]]:!bg-transparent [&_[cmdk-group-heading]]:!bg-transparent [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-border-stronger [&_[cmdk-input]]:h-12","[&_[cmdk-item]_svg]:h-5","[&_[cmdk-item]_svg]:w-5","[&_[cmdk-item]_svg]:stroke-1","[&_[cmdk-input-wrapper]_svg]:h-5","[&_[cmdk-input-wrapper]_svg]:w-5","[&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0",r),...i,children:n})});function j(e){let{resetErrorBoundary:t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("min-h-64","flex items-center justify-center"),children:(0,s.jsxs)("div",{className:"p-10 flex flex-col items-center gap-6 mt-4",children:[(0,s.jsx)(i.Z,{strokeWidth:1.5,size:40}),(0,s.jsx)("p",{className:"text-lg text-center",children:"Sorry, looks like we're having some issues with the command menu!"}),(0,s.jsx)("p",{className:"text-sm text-center",children:"Please try again in a bit."}),(0,s.jsx)(m.z,{size:"tiny",type:"secondary",onClick:t,children:"Try again?"})]})})}function v(e){let{children:t}=e,n=(0,x.EB)();return n?(0,s.jsx)(n,{}):(0,s.jsx)(y,{children:t})}function b(e){let{children:t}=e,n=(0,p.Cc)(),s=(0,p.FX)(),r=l.Children.only(t);return r&&(0,l.isValidElement)(r)?(0,l.cloneElement)(r,{onClick:()=>{var e,t;s(!n),null===(e=(t=r.props).onOpen)||void 0===e||e.call(t,!n)},"aria-haspopup":"dialog","aria-expanded":n,"aria-controls":"command-menu-dialog-content",className:(0,d.cn)("h-10 px-4 py-2","inline-flex items-center justify-center","whitespace-nowrap","rounded-md border border-input bg-background","text-sm font-medium","hover:bg-accent hover:text-accent-foreground","ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","transition-colors",r.props.className)}):null}function k(e){let{children:t,trigger:n}=e,r=(0,p.Cc)(),i=(0,p.FX)(),u=(0,o.Gc)("sm"),m=(0,p.Qd)(),g=(0,x.Wo)(),y=(0,x.yg)(),b=(0,f.a)(),k=(0,f.A)(),{ref:w}=function(e){let{toggleOpen:t}=e,{ref:n,handleTouchStart:s,handleTouchMove:r,handleTouchEnd:i}=(0,c.Z)({onClose:t}),a=(0,p.Gk)(),o=(0,l.useMemo)(()=>({handleTouchStart:s,handleTouchMove:r,handleTouchEnd:i}),[s,r,i]);return(0,l.useEffect)(()=>{a(o)},[o]),{ref:n}}({toggleOpen:()=>i(!r)});return(0,s.jsxs)(h.Vq,{open:r,onOpenChange:i,children:[n,(0,s.jsx)(h.cZ,{id:"command-menu-dialog-content",hideClose:!0,forceMount:!0,ref:w,onOpenAutoFocus:e=>u&&e.preventDefault(),onInteractOutside:()=>i(!1),onEscapeKeyDown:e=>(e.preventDefault(),b?k(""):g?y():i(!1)),size:m,className:(0,d.cn)("relative flex flex-col my-0 mx-auto rounded-t-lg overflow-hidden","h-[85dvh] mt-[15vh] md:max-h-[500px] md:mt-0 left-0 bottom-0 md:bottom-auto","!animate-in !slide-in-from-bottom-[85%] !duration-300","data-[state=closed]:!animate-out data-[state=closed]:!slide-out-to-bottom","!slide-in-from-left-[0%] :!slide-in-from-top-[0%]","!slide-out-to-left-[0%] !slide-out-to-top-[0%]","md:data-[state=open]:!slide-in-from-bottom-[0%] md:data-[state=closed]:!slide-out-to-bottom-[0%]","md:data-[state=open]:!zoom-in-95 md:data-[state=closed]:!zoom-out-95"),dialogOverlayProps:{className:(0,d.cn)("overflow-hidden flex data-closed:delay-100")},children:(0,s.jsx)(a.SV,{FallbackComponent:j,children:(0,s.jsx)(v,{children:t})})})]})}y.displayName=u.mY.displayName},92654:function(e,t,n){"use strict";n.d(t,{EB:function(){return u},Qy:function(){return f},SL:function(){return m},Wo:function(){return d},yg:function(){return h}});var s=n(85466),r=n.n(s),i=n(52983),l=n(34653),a=n(42807),o=n(36478),c=n(69133);let d=()=>{let{pagesState:e}=(0,a.D)(),{commandPages:t,pageStack:n}=(0,l.R)(e),s=n.at(-1);return(0,i.useMemo)(()=>s&&t[s]?{...t[s],name:s}:void 0,[t,s])},u=()=>{let e=d();if(e&&(0,o.sG)(e))return e.component},m=()=>{let{pagesState:e}=(0,a.D)(),t=(0,c.A)();return function(n){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.appendPageStack(n),s||t("")}},h=()=>{let{pagesState:e}=(0,a.D)(),{popPageStack:t}=(0,l.R)(e);return t},x=[],f=function(e,t){let{deps:n=x,enabled:s=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{pagesState:o}=(0,a.D)(),{registerNewPage:c}=(0,l.R)(o),d=(0,i.useRef)(n),u=(0,i.useRef)(s),m=(0,i.useRef)();(0,i.useMemo)(()=>{if(!r()(d.current,n)||u.current!==s){var i;null===(i=m.current)||void 0===i||i.call(m),m.current=s?c(e,t):void 0,d.current=n,u.current=s}},[c,e,t,n,s]),(0,i.useEffect)(()=>(m.current=s?c(e,t):void 0,()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.call(m)}),[])}},69133:function(e,t,n){"use strict";n.d(t,{A:function(){return l},a:function(){return i}});var s=n(34653),r=n(42807);let i=()=>{let{queryState:e}=(0,r.D)(),{query:t}=(0,s.R)(e);return t},l=()=>{let{queryState:e}=(0,r.D)(),{setQuery:t}=(0,s.R)(e);return t}},33880:function(e,t,n){"use strict";n.d(t,{ZP:function(){return m}});var s=n(97458),r=n(52983),i=n(92334),l=n(43633);function a(e){let{children:t,className:n,tag:r="div",style:i}=e;return(0,s.jsx)("".concat(r),{style:i,children:t})}a.Title=function(e){let{className:t,level:n=1,children:r,style:i}=e;return(0,s.jsx)("h".concat(n),{style:i,children:r})},a.Text=function(e){let{className:t,children:n,style:r,type:i,disabled:l,mark:a,code:o,keyboard:c,underline:d,strikethrough:u,strong:m,small:h}=e;return o?(0,s.jsx)("code",{style:r,children:n}):a?(0,s.jsx)("mark",{style:r,children:n}):c?(0,s.jsx)("kbd",{style:r,children:n}):m?(0,s.jsx)("strong",{style:r,children:n}):(0,s.jsx)("span",{style:r,children:n})},a.Link=function(e){let{children:t,target:n="_blank",href:r,className:i,onClick:l,style:a}=e;return(0,s.jsx)("a",{onClick:l,href:r,target:n,rel:"noopener noreferrer",style:a,children:t})};let o=(0,r.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,s.jsx)(o.Provider,{value:{type:t},children:e.children})},d=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:n,ulClassName:r,style:i,type:l="text"}=e;return(0,s.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:n,style:i,children:(0,s.jsx)(c,{type:l,children:(0,s.jsx)("ul",{className:r,children:t})})})}u.Item=function(e){let{children:t,icon:n,active:r,rounded:a,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:m}=e,h=(0,i.Z)("menu"),{type:x}=d(),f=[h.item.base];f.push(h.item.variants[x].base),r?f.push(h.item.variants[x].active):f.push(h.item.variants[x].normal);let p=[h.item.content.base];r?p.push(h.item.content.active):p.push(h.item.content.normal);let g=[h.item.icon.base];return r?g.push(h.item.icon.active):g.push(h.item.icon.normal),(0,s.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",f),style:m,onClick:o,"aria-current":r?"page":void 0,children:[n&&(0,s.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:n}),(0,s.jsx)("span",{className:p.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:n,title:r}=e,l=(0,i.Z)("menu"),{type:a}=d();return(0,s.jsxs)("div",{className:[l.group.base,l.group.variants[a]].join(" "),children:[n&&(0,s.jsx)("span",{className:l.group.icon,children:n}),(0,s.jsx)("span",{className:l.group.content,children:r}),t]})},u.Misc=function(e){let{children:t}=e;return(0,s.jsx)("div",{children:(0,s.jsx)(a.Text,{children:(0,s.jsx)("span",{children:t})})})};var m=u}},function(e){e.O(0,[6665,9442,7623,588,7037,8e3,6402,4418,8703,2303,6823,6499,4837,3297,441,1577,5605,1503,7702,5834,7198,3535,8232,3048,264,8005,2578,1446,9198,4554,5631,8803,9774,2888,179],function(){return e(e.s=76996)}),_N_E=e.O()}]);